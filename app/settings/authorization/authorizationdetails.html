<div [ngSwitch]="mode" class="ui sixteen column grid ">
    <div class="ui row pageHeader">
        <div class="left aligned eight wide column">
            <div *ngSwitchCase="'details'" class="content pageTitle">Details: {{authorization.PrincipalName}}</div>
            <div *ngSwitchCase="'edit'" class="content pageTitle">Editing: {{authorization.PrincipalName}}</div>
        </div>
        <div class="right aligned eight wide column">

            <div id="delete-auth-modal" class="ui small modal">
                <div class="header">Remove Authorization: {{authorization.PrincipalName}}
                    for Tenant: {{authorization.TenantName}}
                </div>
                <div class="content">
                    <p>Are you sure you want to remove this authorization?</p>
                </div>
                <div class="actions">
                    <div class="ui negative button">Cancel</div>
                    <div class="ui positive button" (click)="deleteAuthorization()">
                        Remove
                    </div>
                </div>
            </div>

            <button *ngSwitchCase="'details'" class="ui large button cancelBtn"
                    (click)="returnToList()">
                Close
            </button>
            <button *ngSwitchCase="'edit-notsupported'" class="ui large button cancelBtn"
                    (click)="cancelEditing()">
                Cancel
            </button>
            <button *ngSwitchCase="'details-edit-notsupported'" class="ui large button secondaryBtn"
                    (click)="editAuthorization()">
                Edit
            </button>
            <button class="ui large button secondaryBtn" onclick="$('#delete-auth-modal').modal('show')">
                <i class="trash icon"></i>
                Remove
            </button>

        </div>
    </div>

    <div class="ui row">
        <div class="ui sixteen wide column">
            <div class="breadcrumbs">
                <span class="crumb">
                    <a [routerLink]="['../../list']">
                        Authorizations List
                    </a>
                </span>
                <span class="crumb">{{authorization.PrincipalName}}</span>
            </div>
        </div>
    </div>

    <div class="ui row">
        <div class="ui sixteen wide column">

            <div class="ui basic segment" [ngClass]="{loading: showLoader}">

                <div class="ui row">
                    <div class="ui sixteen wide column">

                        <div class="description">Authorization records cannot be edited. Remove this record and recreate it if what you see here is not what you want.</div>

                        <table class="ui very basic selectable table">
                            <tbody>
                                <tr>
                                    <td class="ui four wide column key">Username</td>
                                    <td class="value">{{authorization.PrincipalName}}</td>
                                </tr>
                                <tr>
                                    <td class="ui four wide column key">Local</td>
                                    <td class="value">{{(authorization.Local?'yes':'no')}}</td>
                                </tr>
                                <tr *ngSwitchCase="'details'">
                                    <td class="ui four wide column key">Role</td>
                                    <td class="value">{{authorization.Role}}</td>
                                </tr>
                                <tr *ngSwitchCase="'details'">
                                    <td class="ui four wide column key">Tenant Authorization</td>
                                    <td class="value">{{authorization.TenantName}}</td>
                                </tr>
                                <tr>
                                    <td class="ui four wide column key">Authorization UUID</td>
                                    <td class="value">{{authorization.AuthzUUID}}</td>
                                </tr>
                            </tbody>
                        </table>

                    </div>
                </div>

                <div class="ui row" *ngSwitchCase="'edit-notsupported'">
                    <div class="ui sixteen wide column">
                        <form class="ui form"
                              role="form"
                              (submit)="saveAuthorization(formRef.valid)" novalidate #formRef="ngForm">

                            <div class="field">
                                <label for="role">Role</label>
                                <select class="ui dropdown" id="role" name="role" [(ngModel)]="authorization.Role">
                                    <option value="admin">Admin</option>
                                    <option value="ops">DevOps</option>
                                </select>
                            </div>

                            <div class="field">
                                <label for="role">Tenant</label>
                                <select class="ui dropdown" id="tenantname" name="tenantname" [(ngModel)]="authorization.TenantName">
                                    <option *ngFor="let tenant of tenants">{{tenant.tenantName}}</option>
                                </select>
                            </div>

                            <div class="ui grid">
                                <div class="right aligned sixteen wide column buttonRow">
                                    <button type="button" class="ui large button cancelBtn"
                                            (click)="cancelEditing()">
                                        Cancel
                                    </button>
                                    <button type="submit" class="ui blue large button primaryBtn">
                                        Save
                                    </button>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>

