<div ng-switch="nodeCommissionCtrl.mode">
    <form class="ui form" name="nodeCommissionCtrl.form" role="form"
          ng-submit="nodeCommissionCtrl.mode == 'commission' ? nodeCommissionCtrl.commission():nodeCommissionCtrl.discover()"
          novalidate>
        <div class="ui active inverted dimmer" ng-show="nodeCommissionCtrl.showLoader">
            <div class="ui loader"></div>
        </div>
        <div class="field">
            <div ng-show="nodeCommissionCtrl.form.$submitted">
                <div ng-hide="nodeCommissionCtrl.form.$valid" class="ui negative message">
                    <ul class="list">
                        <li ng-show="nodeCommissionCtrl.form.controlInterface.$error.required">
                            Please enter control interface
                        </li>

                        <!--Node discovery related validation -->
                        <li ng-show="nodeCommissionCtrl.form.ipAddr.$error.required">
                            Please enter IP address for node
                        </li>

                        <!--Node commissioning related validation -->
                        <li ng-show="nodeCommissionCtrl.form.serviceVIP.$error.required">
                            Please enter virtual IP address for cluster services
                        </li>
                        <li ng-show="nodeCommissionCtrl.form.dataInterface.$error.required">
                            Please enter data interface
                        </li>

                        <li ng-show="nodeCommissionCtrl.form.ucpBootstrapNodeName.$error.required">
                            Please enter node name
                        </li>

                        <!-- APIC settings validation, part of commissioning node -->
                        <li ng-show="nodeCommissionCtrl.form.apicURL.$error.required">
                            Please enter URL for APIC
                        </li>
                        <li ng-show="nodeCommissionCtrl.form.apicUserName.$error.required">
                            Please enter user name for APIC
                        </li>
                        <li ng-show="nodeCommissionCtrl.form.apicPassword.$error.required">
                            Please enter password for APIC
                        </li>
                        <li ng-show="nodeCommissionCtrl.form.apicLeafNodes.$error.required">
                            Please enter leaf nodes for APIC
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="field">
            <label for="controlInterface">Control interface</label>
            <input type="text" id="controlInterface" name="controlInterface"
                   ng-model="nodeCommissionCtrl.extra_vars['control_interface']"
                   placeholder="Enter control interface" required>
        </div>
        <div ng-switch-when="discover" class="field">
            <label for="clusterName">Cluster name</label>
            <input type="text" id="clusterName" name="clusterName"
                   ng-model="nodeCommissionCtrl.extra_vars['cluster_name']"
                   placeholder="Enter cluster name">
        </div>
        <div ng-switch-when="discover" class="field">
            <label for="ipAddr">IP Addresses</label>
            <input type="text" id="ipAddr" name="ipAddr"
                   ng-model="nodeCommissionCtrl.nodeIPAddr"
                   placeholder="Enter IP addresses of nodes, comma separated" required>
        </div>
        <div ng-switch-when="commission">
            <div class="field">
                <label for="dataInterface">Data interface</label>
                <input type="text" id="dataInterface" name="dataInterface"
                       ng-model="nodeCommissionCtrl.extra_vars['netplugin_if']"
                       placeholder="Enter data interface" required>
            </div>
            <div class="field">
                <label for="serviceVIP">Virtual IP address for cluster services</label>
                <input type="text" id="serviceVIP" name="serviceVIP"
                       ng-model="nodeCommissionCtrl.extra_vars['service_vip']"
                       placeholder="Enter virtual IP address" required>
            </div>
            <div class="field">
                <label for="hostgroup">Host group</label>
                <select id="hostgroup" class="ui dropdown"
                        name="hostgroup"
                        ng-model="nodeCommissionCtrl.nodeOpsObj.host_group">
                    <option value="">-- Please select host group --</option>
                    <option value="service-master">Service Master</option>
                    <option value="service-worker">Service Worker</option>
                </select>
            </div>
            <div class="field">
                <label for="scheduler">Scheduler</label>
                <select id="scheduler" class="ui dropdown"
                        name="scheduler"
                        ng-model="nodeCommissionCtrl.extra_vars['scheduler_provider']">
                    <option value="">-- Please select scheduler --</option>
                    <option value="native-swarm">Swarm</option>
                    <option value="ucp-swarm">UCP Swarm</option>
                </select>
            </div>
            <div ng-if="nodeCommissionCtrl.extra_vars['scheduler_provider'] == 'ucp-swarm'" class="field">
                <label for="ucpBootstrapNodeName">Node name</label>
                <input type="text" id="ucpBootstrapNodeName" name="ucpBootstrapNodeName"
                       ng-model="nodeCommissionCtrl.extra_vars['ucp_bootstrap_node_name']"
                       placeholder="Enter node name" required>

            </div>
            <div class="ui section divider"></div>
            <div class="field">
                <div ng-click="nodeCommissionCtrl.networkModeVisible = !nodeCommissionCtrl.networkModeVisible">
                    <h4 class="ui header">
                        <i ng-if="nodeCommissionCtrl.networkModeVisible" class="grey minus circle outline icon"></i>
                        <i ng-if="!nodeCommissionCtrl.networkModeVisible" class="grey plus circle outline icon"></i>
                        Network Mode
                    </h4>
                </div>
                <div ng-show="nodeCommissionCtrl.networkModeVisible">
                    <div class="field" style="margin-top: 10px">
                        <label>
                            <input type="radio" class="ui radio checkbox"
                                   ng-model="nodeCommissionCtrl.extra_vars['contiv_network_mode']" value="standalone">
                            Standalone
                        </label>
                        <label>
                            <input type="radio" class="ui radio checkbox"
                                   ng-model="nodeCommissionCtrl.extra_vars['contiv_network_mode']" value="aci">
                            ACI
                        </label>
                    </div>
                    <div ng-if="nodeCommissionCtrl.extra_vars['contiv_network_mode'] == 'standalone'" class="field">
                        <label for="forwardingMode">Forwarding mode</label>
                        <select id="forwardingMode" class="ui dropdown"
                                ng-model="nodeCommissionCtrl.extra_vars['fwd_mode']">
                            <option value="">-- Please select --</option>
                            <option value="bridge">Bridge</option>
                            <option value="routing">Routing</option>
                        </select>
                    </div>
                    <div ng-if="nodeCommissionCtrl.extra_vars['contiv_network_mode'] == 'aci'">
                        <div class="field">
                            <label for="apicURL">URL</label>
                            <input type="text" id="apicURL" name="apicURL"
                                   ng-model="nodeCommissionCtrl.extra_vars['apic_url']"
                                   placeholder="Enter URL" required>
                        </div>
                        <div class="field">
                            <label for="apicUserName">User name</label>
                            <input type="text" id="apicUserName" name="apicUserName"
                                   ng-model="nodeCommissionCtrl.extra_vars['apic_username']"
                                   placeholder="Enter user name" required>
                        </div>
                        <div class="field">
                            <label for="apicPassword">Password</label>
                            <input type="password" id="apicPassword" name="apicPassword"
                                   ng-model="nodeCommissionCtrl.extra_vars['apic_password']"
                                   placeholder="Enter password" required>
                        </div>
                        <div class="field">
                            <label for="apicLeafNodes">Leaf nodes</label>
                            <input type="text" id="apicLeafNodes" name="apicLeafNodes"
                                   ng-model="nodeCommissionCtrl.extra_vars['apic_leaf_nodes']"
                                   placeholder="Enter full path of leaf nodes, comma separated" required>
                        </div>

                        <div class="field">
                            <label for="apicPhysicalDomain">Physical domain</label>
                            <input type="text" id="apicPhysicalDomain" name="apicPhysicalDomain"
                                   ng-model="nodeCommissionCtrl.extra_vars['apic_phys_domain']"
                                   placeholder="Enter physical domain name">
                        </div>
                        <div class="field">
                            <label for="apicBridgeDomain">Bridge domain</label>
                            <input type="text" id="apicBridgeDomain" name="apicBridgeDomain"
                                   ng-model="nodeCommissionCtrl.extra_vars['apic_epg_bridge_domain']"
                                   placeholder="Enter bridge domain name">
                        </div>
                        <div class="field">
                            <label>
                                <input type="checkbox" name="apicContractsUnrestrictedMode" tabindex="0"
                                       ng-model="nodeCommissionCtrl.extra_vars['apic_contracts_unrestricted_mode']">
                                Allow unrestricted communication between EPGs
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="ui section divider"></div>
        <div class="field">
            <div ng-click="nodeCommissionCtrl.ansibleVariablesVisible = !nodeCommissionCtrl.ansibleVariablesVisible">
                <h4 class="ui header">
                    <i ng-if="nodeCommissionCtrl.ansibleVariablesVisible" class="grey minus circle outline icon"></i>
                    <i ng-if="!nodeCommissionCtrl.ansibleVariablesVisible" class="grey plus circle outline icon"></i>
                    Ansible Variables
                </h4>
            </div>
            <div ng-show="nodeCommissionCtrl.ansibleVariablesVisible">
                <ctv-namevalue items="nodeCommissionCtrl.ansibleVariables"></ctv-namevalue>
            </div>
        </div>

        <div class="ui section divider"></div>
        <div class="field">
            <div ng-click="nodeCommissionCtrl.envVariablesVisible = !nodeCommissionCtrl.envVariablesVisible">
                <h4 class="ui header">
                    <i ng-if="nodeCommissionCtrl.envVariablesVisible" class="grey minus circle outline icon"></i>
                    <i ng-if="!nodeCommissionCtrl.envVariablesVisible" class="grey plus circle outline icon"></i>
                    Environment
                </h4>
            </div>
            <div ng-show="nodeCommissionCtrl.envVariablesVisible">
                <ctv-namevalue items="nodeCommissionCtrl.envVariables"></ctv-namevalue>
            </div>
        </div>

        <div class="ui sixteen column grid">
            <div class="right floated four wide column">
                <div style="margin-top: 40px">
                    <button ng-switch-when="commission" type="button" class="ui basic button"
                            ng-click="nodeCommissionCtrl.cancelCommissioningNode()">
                        Cancel
                    </button>
                    <button ng-switch-when="commission" type="submit" class="ui blue button">
                        Commission
                    </button>
                    <button ng-switch-when="discover" type="button" class="ui basic button"
                            ng-click="nodeCommissionCtrl.cancelDiscoveringNode()">
                        Cancel
                    </button>
                    <button ng-switch-when="discover" type="submit" class="ui blue button">
                        Discover
                    </button>
                </div>
            </div>
        </div>
        <ctv-error ng-switch-when="discover" ng-show="nodeCommissionCtrl.showServerError" header="Error discovering nodes" error="nodeCommissionCtrl.serverErrorMessage">
        </ctv-error>
        <ctv-error ng-switch-when="commission" ng-show="nodeCommissionCtrl.showServerError" header="Error commissioning node" error="nodeCommissionCtrl.serverErrorMessage">
        </ctv-error>
    </form>
</div>