function BaseCollection(e,t,o){this.models=[],this.$http=e,this.$q=t,this.url=o}function Collection(e,t,o){BaseCollection.call(this,e,t,o)}function NodesCollection(e,t){BaseCollection.call(this,e,t,ContivGlobals.NODES_LIST_ENDPOINT)}angular.module("contiv.directives",[]),angular.module("contiv.models",[]);var ContivGlobals=function(){return{NETWORKS_ENDPOINT:"/netmaster/api/v1/networks/",POLICIES_ENDPOINT:"/netmaster/api/v1/policys/",RULES_ENDPOINT:"/netmaster/api/v1/rules/",APPLICATIONGROUPS_ENDPOINT:"/netmaster/api/v1/endpointGroups/",SERVICELBS_ENDPOINT:"/netmaster/api/v1/serviceLBs/",ORGANIZATIONS_ENDPOINT:"/netmaster/api/v1/tenants/",VOLUMES_ENDPOINT:"/volmaster/volumes/",VOLUMES_CREATE_ENDPOINT:"/volmaster/volumes/create/",VOLUMES_DELETE_ENDPOINT:"/volmaster/volumes/remove/",VOLUMES_COPYSNAPSHOTS_ENDPOINT:"/volmaster/volumes/copy/",VOLUMES_USES_ENDPOINT:"/volmaster/uses/mounts/",VOLUMES_SNAPSHOTS_ENDPOINT:"/volmaster/snapshots/",STORAGEPOLICIES_ENDPOINT:"/volmaster/policies/",NODES_LIST_ENDPOINT:"/info/nodes",NODES_DISCOVER_ENDPOINT:"/discover/nodes",NODES_COMMISSION_ENDPOINT:"/commission/nodes",NODES_DECOMMISSION_ENDPOINT:"/decommission/nodes",NODES_MAINTENANCE_ENDPOINT:"/maintenance/nodes",LAST_JOB_ENDPOINT:"/info/job/last",ACTIVE_JOB_ENDPOINT:"/info/job/active",REFRESH_INTERVAL:5e3,CIDR_REGEX:"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(/([0-9]|[1-2][0-9]|3[0-2]))$"}}();angular.module("contiv.utils",[]),angular.module("contiv.applicationgroups",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.applicationgroups",{url:"/applicationgroups","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.dashboard",["contiv.models"]),angular.module("contiv.login",["contiv.utils"]),angular.module("contiv.menu",[]),angular.module("contiv.networks",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.networks",{url:"/networks","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.networkpolicies",["contiv.models","contiv.directives","contiv.utils"]),angular.module("contiv.nodes",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.nodes",{url:"/nodes","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.organizations",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.organizations",{url:"/organizations","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.servicelbs",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.servicelbs",{url:"/servicelbs","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.storagepolicies",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.storagepolicies",{url:"/storagepolicies","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.volumes",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.volumes",{url:"/volumes","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contivApp",["ui.router","contiv.login","contiv.menu","contiv.dashboard","contiv.applicationgroups","contiv.networks","contiv.networkpolicies","contiv.storagepolicies","contiv.servicelbs","contiv.volumes","contiv.nodes","contiv.organizations"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("contiv",{url:"","abstract":!0,template:'<div ui-view class="ui fluid container"/>'}),t.otherwise("/")}]),angular.module("contiv.applicationgroups").config(["$stateProvider",function(e){e.state("contiv.menu.applicationgroups.create",{url:"/create",controller:"ApplicationGroupCreateCtrl as applicationGroupCreateCtrl",templateUrl:"applicationgroups/applicationgroupcreate.html"})}]).controller("ApplicationGroupCreateCtrl",["$state","ApplicationGroupsModel","NetworksModel","PoliciesModel","RulesModel","ApplicationGroupService","CRUDHelperService",function(e,t,o,n,i,r,l){function a(){e.go("contiv.menu.applicationgroups.list")}function c(){a()}function s(){o.get().then(function(e){f.networks=_.filter(e,{tenantName:"default"})})}function u(){n.get().then(function(e){f.isolationPolicies=_.filter(e,{tenantName:"default"})})}function d(){r.addIsolationPolicy(f)}function p(e){r.removeIsolationPolicy(f,e)}function v(){f.form.$valid&&(l.hideServerError(f),l.startLoader(f),f.applicationGroup.networkName=f.selectedNetwork.networkName,f.applicationGroup.key=t.generateKey(f.applicationGroup),t.create(f.applicationGroup).then(function(e){l.stopLoader(f),a()},function(e){l.stopLoader(f),l.showServerError(f,e)}))}function m(){l.stopLoader(f),l.hideServerError(f),f.applicationGroup={groupName:"",networkName:"",policies:[],tenantName:"default"}}var f=this;f.networks=[],f.isolationPolicies=[],f.applicationGroup={},f.selectedNetwork={},f.selectedPolicy={},f.selectedPolicies=[],f.incomingRules=[],f.outgoingRules=[],f.isolationPoliciesVisible=!1,s(),u(),f.createApplicationGroup=v,f.cancelCreating=c,f.addIsolationPolicy=d,f.removeIsolationPolicy=p,m()}]),angular.module("contiv.applicationgroups").config(["$stateProvider",function(e){e.state("contiv.menu.applicationgroups.details",{url:"/details/:key",controller:"ApplicationGroupDetailsCtrl as applicationGroupDetailsCtrl",templateUrl:"applicationgroups/applicationgroupdetails.html"}).state("contiv.menu.applicationgroups.edit",{url:"/edit/:key",controller:"ApplicationGroupDetailsCtrl as applicationGroupDetailsCtrl",templateUrl:"applicationgroups/applicationgroupdetails.html"})}]).controller("ApplicationGroupDetailsCtrl",["$state","$stateParams","ApplicationGroupsModel","PoliciesModel","RulesModel","ApplicationGroupService","CRUDHelperService",function(e,t,o,n,i,r,l){function a(){e.is("contiv.menu.applicationgroups.edit")?h.mode="edit":h.mode="details"}function c(){e.go("contiv.menu.applicationgroups.list")}function s(){e.go("contiv.menu.applicationgroups.details",{key:h.applicationGroup.key})}function u(){s()}function d(){h.applicationGroup.policies.forEach(function(e){i.getIncomingRules(e,"default").then(function(e){Array.prototype.push.apply(h.incomingRules,e)}),i.getOutgoingRules(e,"default").then(function(e){Array.prototype.push.apply(h.outgoingRules,e)})})}function p(){l.hideServerError(h),l.startLoader(h),o["delete"](h.applicationGroup).then(function(e){l.stopLoader(h),c()},function(e){l.stopLoader(h),l.showServerError(h,e)})}function v(){n.get().then(function(e){h.isolationPolicies=_.filter(e,{tenantName:"default"})})}function m(){r.addIsolationPolicy(h)}function f(e){r.removeIsolationPolicy(h,e)}function g(){l.hideServerError(h),l.startLoader(h),o.save(h.applicationGroup).then(function(e){l.stopLoader(h),s()},function(e){l.stopLoader(h),l.showServerError(h,e)})}var h=this;h.isolationPolicies=[],h.applicationGroup={},h.selectedNetwork={},h.selectedPolicy={},h.selectedPolicies=[],h.incomingRules=[],h.outgoingRules=[],h.isolationPoliciesVisible=!1,l.stopLoader(h),l.hideServerError(h),o.getModelByKey(t.key).then(function(e){h.applicationGroup=e,void 0===h.applicationGroup.policies&&(h.applicationGroup.policies=[]),d()}),v(),h.saveApplicationGroup=g,h.cancelEditing=u,h.addIsolationPolicy=m,h.removeIsolationPolicy=f,h.deleteApplicationGroup=p,a()}]),angular.module("contiv.applicationgroups").config(["$stateProvider",function(e){e.state("contiv.menu.applicationgroups.list",{url:"/list",controller:"ApplicationGroupListCtrl as applicationGroupListCtrl",templateUrl:"applicationgroups/applicationgrouplist.html"})}]).controller("ApplicationGroupListCtrl",["$scope","$interval","$filter","ApplicationGroupsModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.groups=o("orderBy")(e,"groupName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},5e3)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.applicationgroups").factory("ApplicationGroupService",["RulesModel",function(e){function t(t){void 0===_.find(t.selectedPolicies,t.selectedPolicy)&&(t.selectedPolicies.push(t.selectedPolicy),e.getIncomingRules(t.selectedPolicy.policyName,"default").then(function(e){Array.prototype.push.apply(t.incomingRules,e)}),e.getOutgoingRules(t.selectedPolicy.policyName,"default").then(function(e){Array.prototype.push.apply(t.outgoingRules,e)}),t.applicationGroup.policies.push(t.selectedPolicy.policyName))}function o(e,t){_.remove(e.applicationGroup.policies,function(e){return e==t}),_.remove(e.incomingRules,function(e){return e.policyName==t}),_.remove(e.outgoingRules,function(e){return e.policyName==t})}return{addIsolationPolicy:t,removeIsolationPolicy:o}}]),angular.module("contiv.dashboard").config(["$stateProvider",function(e){e.state("contiv.menu.dashboard",{url:"/dashboard",controller:"DashboardCtrl as dashboardCtrl",templateUrl:"dashboard/dashboard.html"})}]).controller("DashboardCtrl",["$scope","$interval","NodesModel","NetworksModel","VolumesModel","ApplicationGroupsModel","PoliciesModel","StoragePoliciesModel",function(e,t,o,n,i,r,l,a){function c(e){o.get(e).then(function(e){s.nodes=e.length}),n.get(e).then(function(e){s.networks=e.length}),i.get(e).then(function(e){s.volumes=e.length}),r.get(e).then(function(e){s.groups=e.length}),l.get(e).then(function(e){s.networkpolicies=e.length}),a.get(e).then(function(e){s.storagepolicies=e.length})}var s=this;s.nodes=0,s.networks=0,s.volumes=0,s.groups=0,s.networkpolicies=0,s.storagepolicies=0,c(!1);var u=t(function(){c(!0)},5e3);e.$on("$destroy",function(){t.cancel(u)})}]),angular.module("contiv.login").config(["$stateProvider",function(e){e.state("contiv.login",{url:"/",templateUrl:"login/login.html",controller:"LoginCtrl as loginCtrl"})}]).controller("LoginCtrl",["$state","CRUDHelperService",function(e,t){function o(){e.go("contiv.menu.dashboard",{username:i.username})}function n(){o()}var i=this;t.stopLoader(i),t.hideServerError(i),i.login=n}]),angular.module("contiv.menu").config(["$stateProvider",function(e){e.state("contiv.menu",{url:"/m",templateUrl:"menu/menu.html",controller:"MenuCtrl as menuCtrl",params:{username:null}})}]).controller("MenuCtrl",["$state","$stateParams",function(e,t){function o(){e.go("contiv.login")}var n=this;n.username=t.username,n.logout=o}]),angular.module("contiv.networks").config(["$stateProvider",function(e){e.state("contiv.menu.networks.create",{url:"/create",templateUrl:"networks/networkcreate.html",controller:"NetworkCreateCtrl as networkCreateCtrl"})}]).controller("NetworkCreateCtrl",["$state","$stateParams","NetworksModel","CRUDHelperService",function(e,t,o,n){function i(){e.go("contiv.menu.networks.list")}function r(){i()}function l(){c.form.$valid&&(n.hideServerError(c),n.startLoader(c),c.newNetwork.key=c.newNetwork.tenantName+":"+c.newNetwork.networkName,o.create(c.newNetwork).then(function(e){n.stopLoader(c),i()},function(e){n.stopLoader(c),n.showServerError(c,e)}))}function a(){n.stopLoader(c),n.hideServerError(c),c.newNetwork={networkName:"",encap:"vxlan",subnet:"",gateway:"",tenantName:"default"}}var c=this;c.cidrPattern=ContivGlobals.CIDR_REGEX,c.createNetwork=l,c.cancelCreating=r,a()}]),angular.module("contiv.networks").config(["$stateProvider",function(e){e.state("contiv.menu.networks.details",{url:"/details/:key",controller:"NetworkDetailsCtrl as networkDetailsCtrl",templateUrl:"networks/networkdetails.html"})}]).controller("NetworkDetailsCtrl",["$state","$stateParams","$scope","$interval","$filter","NetworksModel","ApplicationGroupsModel","CRUDHelperService",function(e,t,o,n,i,r,l,a){function c(){e.go("contiv.menu.networks.list")}function s(){a.hideServerError(d),a.startLoader(d),r["delete"](d.network).then(function(e){a.stopLoader(d),c()},function(e){a.stopLoader(d),a.showServerError(d,e)})}function u(e){l.get(e).then(function(e){d.applicationGroups=i("orderBy")(_.filter(e,{networkName:d.network.networkName}),"groupName")})}var d=this;a.stopLoader(d),a.hideServerError(d),r.getModelByKey(t.key).then(function(e){d.network=e,u(!1)}),d.deleteNetwork=s;var p;angular.isDefined(p)||(p=n(function(){u(!0)},ContivGlobals.REFRESH_INTERVAL)),o.$on("$destroy",function(){n.cancel(p)})}]),angular.module("contiv.networks").config(["$stateProvider",function(e){e.state("contiv.menu.networks.list",{url:"/list",controller:"NetworksListCtrl as networksListCtrl",templateUrl:"networks/networklist.html"})}]).controller("NetworksListCtrl",["$scope","$interval","$filter","NetworksModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.networks=o("orderBy")(e,"networkName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.isolation.create",{url:"/create",controller:"IsolationPolicyCreateCtrl as isolationPolicyCreateCtrl",templateUrl:"network_policies/isolationpolicycreate.html"})}]).controller("IsolationPolicyCreateCtrl",["$state","PoliciesModel","CRUDHelperService",function(e,t,o){function n(){e.go("contiv.menu.networkpolicies.isolation.list")}function i(){n()}function r(){a.form.$valid&&(o.hideServerError(a),o.startLoader(a),a.newPolicy.key=t.generateKey(a.newPolicy),t.create(a.newPolicy).then(function(e){o.stopLoader(a),n()},function(e){o.stopLoader(a),o.showServerError(a,e)}))}function l(){o.stopLoader(a),o.hideServerError(a),a.newPolicy={policyName:"",tenantName:"default"}}var a=this;a.createPolicy=r,a.cancelCreating=i,l()}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.isolation.details",{url:"/details/:key",controller:"IsolationPolicyDetailsCtrl as isolationPolicyDetailsCtrl",templateUrl:"network_policies/isolationpolicydetails.html"})}]).config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.isolation.edit",{url:"/edit/:key",controller:"IsolationPolicyDetailsCtrl as isolationPolicyDetailsCtrl",templateUrl:"network_policies/isolationpolicydetails.html"})}]).controller("IsolationPolicyDetailsCtrl",["$state","$stateParams","PoliciesModel","RulesModel","NetworksModel","ApplicationGroupsModel","CRUDHelperService",function(e,t,o,n,i,r,l){function a(){e.go("contiv.menu.networkpolicies.isolation.list")}function c(){e.go("contiv.menu.networkpolicies.isolation.details",{key:P.policy.key})}function s(){c()}function u(){c()}function d(){l.hideServerError(P),l.startLoader(P),o["delete"](P.policy).then(function(e){l.stopLoader(P),a()},function(e){l.stopLoader(P),l.showServerError(P,e)})}function p(){e.is("contiv.menu.networkpolicies.isolation.edit")?P.mode="edit":P.mode="details"}function v(){P.newIncomingRule={ruleId:"",priority:1,action:"allow",fromEndpointGroup:"",fromNetwork:"",fromIPAddress:"",protocol:"tcp",port:"",direction:"in",tenantName:"default",policyName:P.policy.policyName},P.newIncomingSelectedApplicationGroup="",P.disableIncomingNetworkSelection=!1,P.disableIncomingApplicationGroupSelection=!1}function m(){P.newOutgoingRule={ruleId:"",priority:1,action:"allow",toEndpointGroup:"",toNetwork:"",toIPAddress:"",protocol:"tcp",port:"",direction:"out",tenantName:"default",policyName:P.policy.policyName},P.newOutgoingSelectedApplicationGroup="",P.disableOutgoingNetworkSelection=!1,P.disableOutgoingApplicationGroupSelection=!1}function f(){i.get().then(function(e){P.networks=_.filter(e,{tenantName:"default"})})}function g(){r.get().then(function(e){P.applicationGroups=_.filter(e,{tenantName:"default"})})}function h(){null!=P.newOutgoingSelectedApplicationGroup?(P.newOutgoingRule.toEndpointGroup=P.newOutgoingSelectedApplicationGroup.groupName,P.newOutgoingRule.toNetwork="",P.disableOutgoingNetworkSelection=!0):(P.newOutgoingRule.toEndpointGroup="",P.disableOutgoingNetworkSelection=!1)}function y(){null!=P.newIncomingSelectedApplicationGroup?(P.newIncomingRule.fromEndpointGroup=P.newIncomingSelectedApplicationGroup.groupName,P.newIncomingRule.fromNetwork="",P.disableIncomingNetworkSelection=!0):(P.newIncomingRule.fromEndpointGroup="",P.disableIncomingNetworkSelection=!1)}function C(){null!=P.newOutgoingRule.toNetwork?(P.newOutgoingRule.ToEndpointGroup="",P.disableOutgoingApplicationGroupSelection=!0):P.disableOutgoingApplicationGroupSelection=!1}function N(){null!=P.newIncomingRule.fromNetwork?(P.newIncomingRule.fromEndpointGroup="",P.disableIncomingApplicationGroupSelection=!0):P.disableIncomingApplicationGroupSelection=!1}function w(e){e.ruleId=(P.incomingRules.length+P.outgoingRules.length+1).toString()+"-"+Date.now().toString()}function E(){l.hideServerError(P),l.startLoader(P),w(P.newIncomingRule),P.newIncomingRule.key=n.generateKey(P.newIncomingRule),n.create(P.newIncomingRule).then(function(e){l.stopLoader(P),P.incomingRules.push(e),v()},function(e){l.stopLoader(P),l.showServerError(P,e)})}function S(){l.hideServerError(P),l.startLoader(P),w(P.newOutgoingRule),P.newOutgoingRule.key=n.generateKey(P.newOutgoingRule),n.create(P.newOutgoingRule).then(function(e){l.stopLoader(P),P.outgoingRules.push(e),m()},function(e){l.stopLoader(P),l.showServerError(P,e)})}function k(e){l.hideServerError(P),l.startLoader(P),n.deleteUsingKey(e).then(function(t){l.stopLoader(P),_.remove(P.incomingRules,function(t){return t.key==e})},function(e){l.stopLoader(P),l.showServerError(P,e)})}function b(e){l.hideServerError(P),l.startLoader(P),n.deleteUsingKey(e).then(function(t){l.stopLoader(P),_.remove(P.outgoingRules,function(t){return t.key==e})},function(e){l.stopLoader(P),l.showServerError(P,e)})}var P=this;P.networks=[],P.applicationGroups=[],P.disableOutgoingNetworkSelection=!1,P.disableIncomingNetworkSelection=!1,P.disableOutgoingApplicationGroupSelection=!1,P.disableIncomingApplicationGroupSelection=!1,P.newIncomingSelectedApplicationGroup="",P.newOutgoingSelectedApplicationGroup="",l.stopLoader(P),l.hideServerError(P),o.getModelByKey(t.key).then(function(e){P.policy=e,n.getIncomingRules(e.policyName,"default").then(function(e){P.incomingRules=e,v()}),n.getOutgoingRules(e.policyName,"default").then(function(e){P.outgoingRules=e,m()})}),f(),g(),P.deletePolicy=d,P.deleteIncomingRule=k,P.deleteOutgoingRule=b,P.addIncomingRule=E,P.addOutgoingRule=S,P.doneEditing=u,P.cancelEditing=s,P.onChangeOutgoingApplicationGroupSelection=h,P.onChangeIncomingApplicationGroupSelection=y,P.onChangeOutgoingNetworkSelection=C,P.onChangeIncomingNetworkSelection=N,p()}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.isolation.list",{url:"/list",controller:"IsolationPolicyListCtrl as isolationPolicyListCtrl",templateUrl:"network_policies/isolationpolicylist.html"})}]).controller("IsolationPolicyListCtrl",["$scope","$interval","$filter","PoliciesModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.policies=o("orderBy")(e,"policyName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies",{url:"/networkpolicies",controller:"NetworkPoliciesTabsCtrl as networkPoliciesTabsCtrl",templateUrl:"network_policies/networkpoliciestabs.html"}).state("contiv.menu.networkpolicies.isolation",{url:"/isolation","abstract":!0,template:"<ui-view/>"}).state("contiv.menu.networkpolicies.prioritization",{url:"/prioritization",controller:"NetworkPoliciesTabsCtrl as networkPoliciesTabsCtrl",templateUrl:"network_policies/prioritizationpolicylist.html"}).state("contiv.menu.networkpolicies.bandwidth",{url:"/bandwidth",controller:"NetworkPoliciesTabsCtrl as networkPoliciesTabsCtrl",templateUrl:"network_policies/bandwidthpolicylist.html"}).state("contiv.menu.networkpolicies.redirection",{url:"/redirection",controller:"NetworkPoliciesTabsCtrl as networkPoliciesTabsCtrl",templateUrl:"network_policies/redirectionpolicylist.html"})}]).controller("NetworkPoliciesTabsCtrl",["$state",function(e){}]),angular.module("contiv.nodes").config(["$stateProvider",function(e){e.state("contiv.menu.nodes.commission",{url:"/commission/:key",controller:"NodeCommissionCtrl as nodeCommissionCtrl",templateUrl:"nodes/nodecommission.html"}).state("contiv.menu.nodes.discover",{url:"/discover",controller:"NodeCommissionCtrl as nodeCommissionCtrl",templateUrl:"nodes/nodecommission.html"})}]).controller("NodeCommissionCtrl",["$state","$stateParams","NodesModel","CRUDHelperService",function(e,t,o,n){function i(){e.is("contiv.menu.nodes.commission")?m.mode="commission":m.mode="discover"}function r(){e.go("contiv.menu.nodes.details.info",{key:t.key})}function l(){e.go("contiv.menu.nodes.list")}function a(){r()}function c(){l()}function s(){m.ansibleVariables.forEach(function(e){m.extra_vars[e.name]=e.value});var e={};m.envVariables.forEach(function(t){e[t.name]=t.value}),m.extra_vars.env=e,m.nodeOpsObj.extra_vars=JSON.stringify(m.extra_vars)}function u(){m.form.$valid&&(n.hideServerError(m),n.startLoader(m),m.nodeOpsObj.nodes=[t.key],p(),s(),o.commission(m.nodeOpsObj).then(function(e){n.stopLoader(m),r()},function(e){n.stopLoader(m),n.showServerError(m,e)}))}function d(){m.form.$valid&&(n.hideServerError(m),n.startLoader(m),v(),s(),o.discover(m.nodeOpsObj).then(function(e){n.stopLoader(m),l()},function(e){n.stopLoader(m),n.showServerError(m,e)}))}function p(){"aci"==m.extra_vars.contiv_network_mode?delete m.extra_vars.fwd_mode:(delete m.extra_vars.apic_url,delete m.extra_vars.apic_username,delete m.extra_vars.apic_password,delete m.extra_vars.apic_leaf_nodes,delete m.extra_vars.apic_phys_domain,delete m.extra_vars.apic_epg_bridge_domain,delete m.extra_vars.apic_contracts_unrestricted_mode),"native-swarm"==m.extra_vars.scheduler_provider&&delete m.extra_vars.ucp_bootstrap_node_name}function v(){m.nodeOpsObj.addrs=_.words(m.nodeIPAddr,/[^, ]+/g)}var m=this;m.nodeOpsObj={},m.extra_vars={},m.ansibleVariables=[],m.envVariables=[],m.nodeIPAddr="",m.cancelCommissioningNode=a,m.commission=u,m.discover=d,m.cancelDiscoveringNode=c,i(),n.stopLoader(m),n.hideServerError(m)}]),angular.module("contiv.nodes").config(["$stateProvider",function(e){e.state("contiv.menu.nodes.details",{url:"/details/:key",controller:"NodeDetailsCtrl as nodeDetailsCtrl",templateUrl:"nodes/nodedetails.html"}).state("contiv.menu.nodes.details.info",{url:"/info",controller:"NodeDetailsCtrl as nodeDetailsCtrl",templateUrl:"nodes/nodeinfo.html"}).state("contiv.menu.nodes.details.stats",{url:"/stats",controller:"NodeDetailsCtrl as nodeDetailsCtrl",templateUrl:"nodes/nodestats.html"}).state("contiv.menu.nodes.details.logs",{url:"/logs",controller:"NodeDetailsCtrl as nodeDetailsCtrl",templateUrl:"nodes/nodelogs.html"})}]).controller("NodeDetailsCtrl",["$state","$stateParams","$scope","$interval","NodesModel",function(e,t,o,n,i){function r(){var e={nodes:[t.key]};i.decommission(e).then(function(e){s.showCommissionButton=!1,s.commissionButtonEnabled=!1,s.upgradeButtonEnabled=!1})}function l(){var e={nodes:[t.key]};i.upgrade(e).then(function(e){s.showCommissionButton=!1,s.commissionButtonEnabled=!1,s.upgradeButtonEnabled=!1})}function a(){switch(s.node.inventory_state.status){case"Unallocated":s.showCommissionButton=!0,s.commissionButtonEnabled=!0,s.upgradeButtonEnabled=!1;break;case"Decommissioned":s.showCommissionButton=!0,s.commissionButtonEnabled=!0,s.upgradeButtonEnabled=!1;break;case"Provisioning":s.showCommissionButton=!0,s.commissionButtonEnabled=!1,s.upgradeButtonEnabled=!1;break;case"Allocated":s.showCommissionButton=!1,s.commissionButtonEnabled=!0,s.upgradeButtonEnabled=!0;break;case"Cancelled":s.showCommissionButton=!1,s.commissionButtonEnabled=!1,s.upgradeButtonEnabled=!1;break;case"Maintenance":s.showCommissionButton=!0,s.commissionButtonEnabled=!1,s.upgradeButtonEnabled=!1;break;default:s.showCommissionButton=!0,s.commissionButtonEnabled=!1,s.upgradeButtonEnabled=!1}}function c(e){i.getModelByKey(t.key,e).then(function(e){s.node=e,a()})}var s=this;s.decommission=r,s.upgrade=l,c(!1);var u;angular.isDefined(u)||(u=n(function(){c(!0)},5e3)),o.$on("$destroy",function(){n.cancel(u)})}]),angular.module("contiv.nodes").config(["$stateProvider",function(e){e.state("contiv.menu.nodes.list",{url:"/list",controller:"NodeListCtrl as nodeListCtrl",templateUrl:"nodes/nodelist.html"})}]).controller("NodeListCtrl",["$scope","$interval","$filter","NodesModel","CRUDHelperService","NodeService",function(e,t,o,n,i,r){function l(e){n.get(e).then(function(e){i.stopLoader(u),u.nodes=o("orderBy")(e,"key")},function(e){i.stopLoader(u)})}function a(e){n.get(e).then(function(e){c(),s()})}function c(){r.getActiveLogs(u.nodes).then(function(e){u.activeLogs=e},function(e){})}function s(){r.getLastLogs(u.nodes).then(function(e){u.lastLogs=e},function(e){})}var u=this;u.getActiveLogs=c,u.getLastLogs=s,l(!1),a(!1);var d;angular.isDefined(d)||(d=t(function(){l(!0),a(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(d)})}]),angular.module("contiv.nodes").factory("NodeService",["$http","$q",function(e,t){function o(o){var n=t.defer(),i=ContivGlobals.ACTIVE_JOB_ENDPOINT;return e.get(i).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise}function n(o){var n=t.defer(),i=ContivGlobals.LAST_JOB_ENDPOINT;return e.get(i).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise}return{getActiveLogs:o,getLastLogs:n}}]),angular.module("contiv.organizations").config(["$stateProvider",function(e){e.state("contiv.menu.organizations.create",{url:"/create",templateUrl:"organizations/organizationcreate.html",controller:"OrganizationCreateCtrl as organizationCreateCtrl"})}]).controller("OrganizationCreateCtrl",["$state","$stateParams","OrganizationsModel","CRUDHelperService",function(e,t,o,n){function i(){e.go("contiv.menu.organizations.list")}function r(){i()}function l(){c.form.$valid&&(n.hideServerError(c),n.startLoader(c),c.newOrganization.key=c.newOrganization.tenantName,o.create(c.newOrganization).then(function(e){n.stopLoader(c),i()},function(e){n.stopLoader(c),n.showServerError(c,e)}))}function a(){n.stopLoader(c),n.hideServerError(c),c.newOrganization={tenantName:""}}var c=this;c.createOrganization=l,c.cancelCreating=r,a()}]),angular.module("contiv.organizations").config(["$stateProvider",function(e){e.state("contiv.menu.organizations.details",{url:"/details/:key",controller:"OrganizationDetailsCtrl as organizationDetailsCtrl",templateUrl:"organizations/organizationdetails.html"})}]).controller("OrganizationDetailsCtrl",["$state","$stateParams","$scope","$interval","$filter","OrganizationsModel","CRUDHelperService",function(e,t,o,n,i,r,l){function a(){e.go("contiv.menu.organizations.list")}function c(){l.hideServerError(s),l.startLoader(s),r["delete"](s.organization).then(function(e){l.stopLoader(s),a()},function(e){l.stopLoader(s),l.showServerError(s,e)})}var s=this;l.stopLoader(s),l.hideServerError(s),r.getModelByKey(t.key).then(function(e){s.organization=e}),s.deleteOrganization=c}]),angular.module("contiv.organizations").config(["$stateProvider",function(e){e.state("contiv.menu.organizations.list",{url:"/list",controller:"OrganizationsListCtrl as organizationsListCtrl",templateUrl:"organizations/organizationlist.html"})}]).controller("OrganizationsListCtrl",["$scope","$interval","$filter","OrganizationsModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.organizations=o("orderBy")(e,"tenantName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.servicelbs").config(["$stateProvider",function(e){e.state("contiv.menu.servicelbs.create",{url:"/create",templateUrl:"service_lbs/servicelbcreate.html",controller:"ServicelbCreateCtrl as servicelbCreateCtrl"})}]).controller("ServicelbCreateCtrl",["$state","$stateParams","ServicelbsModel","NetworksModel","CRUDHelperService",function(e,t,o,n,i){function r(){e.go("contiv.menu.servicelbs.list")}function l(){r()}function a(){n.get().then(function(e){d.networks=_.filter(e,{tenantName:"default"})})}function c(){d.servicelb.selectors=[],angular.forEach(d.labelSelectors,function(e){var t=e.name+"="+e.value;d.servicelb.selectors.push(t)})}function s(){c(),d.form.$valid&&(i.hideServerError(d),i.startLoader(d),d.servicelb.key=d.servicelb.tenantName+":"+d.servicelb.serviceName,o.create(d.servicelb).then(function(e){i.stopLoader(d),r()},function(e){i.stopLoader(d),i.showServerError(d,e)}))}function u(){i.stopLoader(d),i.hideServerError(d),d.servicelb={serviceName:"",networkName:"",ipAddress:"",selectors:[],ports:[],tenantName:"default"}}var d=this;d.labelSelectors=[],d.networks=[],d.createServicelb=s,d.cancelCreating=l,a(),u()}]),angular.module("contiv.servicelbs").config(["$stateProvider",function(e){e.state("contiv.menu.servicelbs.details",{url:"/details/:key",controller:"ServicelbDetailsCtrl as servicelbDetailsCtrl",templateUrl:"service_lbs/servicelbdetails.html"}).state("contiv.menu.servicelbs.edit",{url:"/edit/:key",controller:"ServicelbDetailsCtrl as servicelbDetailsCtrl",templateUrl:"service_lbs/servicelbdetails.html"})}]).controller("ServicelbDetailsCtrl",["$state","$stateParams","ServicelbsModel","CRUDHelperService",function(e,t,o,n){function i(){e.is("contiv.menu.servicelbs.edit")?p.mode="edit":p.mode="details"}function r(){e.go("contiv.menu.servicelbs.list")}function l(){e.go("contiv.menu.servicelbs.details",{key:p.servicelb.key})}function a(){l()}function c(){n.hideServerError(p),n.startLoader(p),o["delete"](p.servicelb).then(function(e){n.stopLoader(p),r()},function(e){n.stopLoader(p),n.showServerError(p,e)})}function s(){n.hideServerError(p),n.startLoader(p),d(),o.save(p.servicelb).then(function(e){n.stopLoader(p),l()},function(e){n.stopLoader(p),n.showServerError(p,e)})}function u(){angular.forEach(p.servicelb.selectors,function(e){var t={name:e.split("=")[0],value:e.split("=")[1]};p.labelSelectors.push(t)})}function d(){p.servicelb.selectors=[],angular.forEach(p.labelSelectors,function(e){var t=e.name+"="+e.value;p.servicelb.selectors.push(t)})}var p=this;p.labelSelectors=[],n.stopLoader(p),n.hideServerError(p),o.getModelByKey(t.key).then(function(e){p.servicelb=e,u()}),p.saveServicelb=s,p.cancelEditing=a,p.deleteServicelb=c,i()}]),angular.module("contiv.servicelbs").config(["$stateProvider",function(e){e.state("contiv.menu.servicelbs.list",{url:"/list",controller:"ServicelbListCtrl as servicelbListCtrl",templateUrl:"service_lbs/servicelblist.html"})}]).controller("ServicelbListCtrl",["$scope","$interval","$filter","ServicelbsModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.servicelbs=o("orderBy")(e,"serviceName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.servicelbs").directive("ctvServicelbports",function(){return{restrict:"E",scope:{items:"="},link:function(e){function t(e,t){return e===t}function o(){e.newItem={servicePort:"",providerPort:"",protocol:""}}function n(e){return""===e.servicePort&&""===e.providerPort&&""===e.protocol}e.add=function(){if(!n(e.newItem)){void 0===e.items&&(e.items=[]);var i=e.newItem.servicePort+":"+e.newItem.providerPort+":"+e.newItem.protocol;_.pullAllWith(e.items,[i],t),e.items.push(i),
o()}},e.remove=function(o){_.remove(e.items,function(e){return t(e,o)})},o()},templateUrl:"service_lbs/servicelbports.html"}}),angular.module("contiv.storagepolicies").config(["$stateProvider",function(e){e.state("contiv.menu.storagepolicies.create",{url:"/create",templateUrl:"storage_policies/storagepolicycreate.html",controller:"StoragePolicyCreateCtrl as storagePolicyCreateCtrl"})}]).controller("StoragePolicyCreateCtrl",["$state","$stateParams","StoragePoliciesModel","CRUDHelperService",function(e,t,o,n){function i(){e.go("contiv.menu.storagepolicies.list")}function r(){i()}function l(){s.filesystemcmds.forEach(function(e){s.newStoragePolicy.filesystems[e.name]=e.value})}function a(){s.form.$valid&&(n.hideServerError(s),n.startLoader(s),l(),o.create(s.newStoragePolicy).then(function(e){n.stopLoader(s),i()},function(e){n.stopLoader(s),n.showServerError(s,e)}))}function c(){n.stopLoader(s),n.hideServerError(s),s.newStoragePolicy={name:"",backends:{crud:"ceph",mount:"ceph",snapshot:"ceph"},unlocked:!1,driver:{pool:"rbd"},create:{size:"10MB",filesystem:"ext4"},runtime:{snapshots:!0,snapshot:{frequency:"30m",keep:20},"rate-limit":{"write-iops":1e3,"read-iops":1e3,"write-bps":1e8,"read-bps":1e8}},filesystems:{}}}var s=this;s.createPolicy=a,s.cancelCreating=r,s.filesystemcmds=[],c()}]),angular.module("contiv.storagepolicies").config(["$stateProvider",function(e){e.state("contiv.menu.storagepolicies.details",{url:"/details/:key",controller:"StoragePolicyDetailsCtrl as storagePolicyDetailsCtrl",templateUrl:"storage_policies/storagepolicydetails.html"}).state("contiv.menu.storagepolicies.edit",{url:"/details/:key",controller:"StoragePolicyDetailsCtrl as storagePolicyDetailsCtrl",templateUrl:"storage_policies/storagepolicydetails.html"})}]).controller("StoragePolicyDetailsCtrl",["$state","$stateParams","$scope","$interval","$filter","StoragePoliciesModel","VolumesModel","CRUDHelperService",function(e,t,o,n,i,r,l,a){function c(){e.is("contiv.menu.storagepolicies.edit")?g.mode="edit":g.mode="details"}function s(){e.go("contiv.menu.storagepolicies.list")}function u(){e.go("contiv.menu.storagepolicies.details",{key:g.policy.name})}function d(){u()}function p(){a.hideServerError(g),a.startLoader(g),r.deleteUsingKey(g.policy.name,"name").then(function(e){a.stopLoader(g),s()},function(e){a.stopLoader(g),a.showServerError(g,e)})}function v(){angular.forEach(g.policy.filesystems,function(e,t){this.push({name:t,value:e})},g.filesystemcmds)}function m(){g.filesystemcmds.forEach(function(e){g.policy.filesystems[e.name]=e.value})}function f(){g.form.$valid&&(a.hideServerError(g),a.startLoader(g),m(),r.save(g.policy).then(function(e){a.stopLoader(g),u()},function(e){a.stopLoader(g),a.showServerError(g,e)}))}var g=this;g.filesystemcmds=[],a.stopLoader(g),a.hideServerError(g),r.getModelByKey(t.key,!1,"name").then(function(e){g.policy=e,v()}),g.deletePolicy=p,g.savePolicy=f,g.cancelEditing=d,c();var h;angular.isDefined(h)||(h=n(function(){},ContivGlobals.REFRESH_INTERVAL)),o.$on("$destroy",function(){n.cancel(h)})}]),angular.module("contiv.storagepolicies").directive("ctvStoragepolicybasicsettings",function(){return{}}).directive("ctvStoragepolicyfilesystemsettings",function(){return{restrict:"E",scope:{policy:"=",filesystemcmds:"="},link:function(e){e.filesystems=["ext4","btrfs"]},templateUrl:"storage_policies/filesystemsettings.html"}}).directive("ctvStoragepolicysnapshotsettings",function(){return{restrict:"E",scope:{policy:"="},templateUrl:"storage_policies/snapshotsettings.html"}}).directive("ctvStoragepolicyrwopssettings",function(){return{restrict:"E",scope:{policy:"="},templateUrl:"storage_policies/rwopssettings.html"}}).directive("ctvStoragepolicybackenddrivers",function(){return{restrict:"E",scope:{policy:"="},templateUrl:"storage_policies/backenddrivers.html"}}),angular.module("contiv.storagepolicies").config(["$stateProvider",function(e){e.state("contiv.menu.storagepolicies.list",{url:"/list",controller:"StoragePolicyListCtrl as storagePolicyListCtrl",templateUrl:"storage_policies/storagepolicylist.html"})}]).controller("StoragePolicyListCtrl",["$scope","$interval","$filter","StoragePoliciesModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.policies=o("orderBy")(e,"name")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.volumes").config(["$stateProvider",function(e){e.state("contiv.menu.volumes.create",{url:"/create",templateUrl:"volumes/volumecreate.html",controller:"VolumeCreateCtrl as volumeCreateCtrl"})}]).controller("VolumeCreateCtrl",["$state","$stateParams","VolumesModel","StoragePoliciesModel","CRUDHelperService",function(e,t,o,n,i){function r(){e.go("contiv.menu.volumes.list")}function l(){r()}function a(){n.get().then(function(e){d.policies=e})}function c(){d.newVolume.policy=d.selectedPolicy.name,d.newVolume.backends=d.selectedPolicy.backends,d.newVolume.driver=d.selectedPolicy.driver,d.newVolume.create=d.selectedPolicy.create,d.newVolume.runtime=d.selectedPolicy.runtime}function s(){d.form.$valid&&(i.hideServerError(d),i.startLoader(d),c(),o.create(d.newVolume).then(function(e){i.stopLoader(d),r()},function(e){i.stopLoader(d),i.showServerError(d,e)}))}function u(){i.stopLoader(d),i.hideServerError(d),d.newVolume={name:"",backends:{},driver:{},create:{},runtime:{}}}var d=this;d.filesystems=["ext4","btrfs"],d.createVolume=s,d.cancelCreating=l,a(),u()}]),angular.module("contiv.volumes").config(["$stateProvider",function(e){e.state("contiv.menu.volumes.details",{url:"/details/:key",controller:"VolumeDetailsCtrl as volumeDetailsCtrl",templateUrl:"volumes/volumedetails.html"})}]).controller("VolumeDetailsCtrl",["$state","$stateParams","$scope","$interval","$http","VolumesModel","VolumeService",function(e,t,o,n,i,r,l){function a(){e.go("contiv.menu.volumes.list")}function c(){r["delete"](v.volume).then(function(e){a()})}function s(e){var o=t.key.split("/"),n={};n.policy=o[0],n.name=o[1],r.getModel(n,e).then(function(e){v.volume=e,u(),d()})}function u(){l.getVolumeUseInfo(v.volume).then(function(e){v.volumeUse=e},function(e){})}function d(){l.getVolumeSnapshots(v.volume).then(function(e){v.snapshots=e},function(e){})}function p(e,t){r.copy(model,e,t).then(function(e){},function(e){})}var v=this;v.deleteVolume=c,v.copySnapshot=p,s(!1);var m;angular.isDefined(m)||(m=n(function(){s(!0)},ContivGlobals.REFRESH_INTERVAL)),o.$on("$destroy",function(){n.cancel(m)})}]),angular.module("contiv.volumes").config(["$stateProvider",function(e){e.state("contiv.menu.volumes.list",{url:"/list",controller:"VolumeListCtrl as volumeListCtrl",templateUrl:"volumes/volumelist.html"})}]).controller("VolumeListCtrl",["$scope","$interval","$filter","VolumesModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.volumes=o("orderBy")(e,"name")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.volumes").factory("VolumeService",["$http","$q",function(e,t){function o(o){var n=t.defer(),i=ContivGlobals.VOLUMES_USES_ENDPOINT+o.policy+"/"+o.name;return e.get(i).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise}function n(o){var n=t.defer(),i=ContivGlobals.VOLUMES_SNAPSHOTS_ENDPOINT+o.policy+"/"+o.name;return e.get(i).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise}return{getVolumeUseInfo:o,getVolumeSnapshots:n}}]),angular.module("contiv.directives").directive("ctvCollapsible",function(){return{restrict:"E",scope:{title:"@",collapsed:"@"},transclude:!0,link:function(e){void 0===e.collapsed&&(e.collapsed=!0)},templateUrl:"components/directives/collapsible.html"}}),angular.module("contiv.directives").directive("ctvError",function(){return{restrict:"E",scope:{header:"@",error:"="},link:function(e,t,o){t.find("i").on("click",function(){t.addClass("ng-hide")})},templateUrl:"components/directives/errormessage.html"}}),angular.module("contiv.directives").directive("ctvNamevalue",function(){return{restrict:"E",scope:{items:"=",nameheader:"@",valueheader:"@",type:"@",options:"="},link:function(e){function t(e,t){return e.name==t.name}function o(){e.newItem={name:"",value:""}}function n(e){return""===e.name&&""===e.value}e.add=function(){n(e.newItem)||(void 0===e.item&&(e.item=[]),_.pullAllWith(e.items,[e.newItem],t),e.items.push(e.newItem),o())},e.remove=function(t){_.remove(e.items,function(e){return e.name==t.name})},o(),void 0===e.nameheader&&(e.nameheader="Name"),void 0===e.valueheader&&(e.valueheader="Value"),void 0===e.type&&(e.type="text")},templateUrl:"components/directives/namevalue.html"}}),angular.module("contiv.directives").directive("ctvTable",["filterFilter","limitToFilter",function(e,t){return{restrict:"E",transclude:!0,scope:{items:"=",filtereditems:"=",size:"@"},controller:["$scope","$element","$attrs",function(o,n,i){function r(n,i){if(s.searchText=i,(void 0===n||0>n)&&(n=0),s.pageNo=n,void 0!==o.items){var r=e(o.items,s.searchText),l=Math.ceil(r.length/s.size);0==l&&(l=1),s.chunks=[];for(var a=0;l>a;a++)s.chunks.push({selected:!1,pageNo:a});if(n>=s.chunks.length&&(s.pageNo=0),s.chunks[s.pageNo].selected=!0,s.chunks.length>5){var c,u;c=s.pageNo-2,u=s.pageNo+3,0>c&&(u-=c,c=0),u>s.chunks.length&&(c-=u-s.chunks.length,u=s.chunks.length),o.paginationMenu.chunks=s.chunks.slice(c,u)}else o.paginationMenu.chunks=s.chunks;s.filteredItems=t(r,s.size,s.pageNo*s.size),o.filtereditems=s.filteredItems}return!1}function l(){var e;return e=s.pageNo<=0?0:s.pageNo-1,r(e)}function a(){var e;return e=s.pageNo+1,e>s.chunks.length-1&&(e=s.chunks.length-1),r(e)}function c(e){o.paginationMenu=e}var s=this;s.chunks=[],s.pageNo=0,s.size=parseInt(o.size,10),isNaN(s.size)&&(s.size=12),s.showChunk=r,s.showNextChunk=a,s.showPrevChunk=l,s.addPaginationMenu=c}],link:function(e,t,o,n){e.$parent.$watch(o.items,function(){n.showChunk(n.pageNo,n.searchText)})},templateUrl:"components/directives/table.html"}}]).directive("ctvThead",function(){return{restrict:"E",transclude:!0,replace:!0,template:"<thead ng-transclude></thead>"}}).directive("ctvTh",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{"class":"@"},template:'<th ng-class="class" ng-transclude></th>'}}).directive("ctvTbody",function(){return{restrict:"E",scope:{},transclude:!0,replace:!0,template:"<tbody ng-transclude></tbody>"}}).directive("ctvTfoot",function(){return{restrict:"E",scope:{},transclude:!0,replace:!0,template:"<tfoot ng-transclude></tfoot>"}}).directive("ctvTsearch",function(){return{restrict:"E",require:"^^ctvTable",scope:{placeholder:"@",size:"@"},link:function(e,t,o,n){e.showChunk=function(){n.showChunk(n.pageNo,e.searchText)}},templateUrl:"components/directives/searchinput.html"}}).directive("ctvTr",function(){return{restrict:"E",transclude:"true",replace:!0,scope:{},template:"<tr ng-transclude></tr>"}}).directive("ctvTd",function(){return{restrict:"E",transclude:!0,replace:!0,scope:!0,template:"<td ng-transclude></td>"}}).directive("ctvTpagination",function(){return{restrict:"E",require:"^^ctvTable",scope:{},link:function(e,t,o,n){n.addPaginationMenu(e),n.showChunk(n.pageNo,n.searchText),e.showChunk=function(e){n.showChunk(e,n.searchText)},e.showPrevChunk=n.showPrevChunk,e.showNextChunk=n.showNextChunk},templateUrl:"components/directives/paginationmenu.html"}}),angular.module("contiv.models").factory("ApplicationGroupsModel",["$http","$q",function(e,t){var o=new Collection(e,t,ContivGlobals.APPLICATIONGROUPS_ENDPOINT);return o.generateKey=function(e){return e.tenantName+":"+e.groupName},o}]),BaseCollection.prototype.extract=function(e){return e.data},BaseCollection.prototype.get=function(e){var t=this;return void 0===e&&(e=!1),!e&&t.models.length>0?t.$q.when(t.models):t.$http.get(t.url).then(function(e){return t.models=t.extract(e),t.models})},BaseCollection.prototype.getModelByKey=function(e,t,o){function n(){return _.find(i.models,function(t){return t[o]==e})}var i=this;void 0===t&&(t=!1),void 0===o&&(o="key");var r=i.$q.defer();return!t&&i.models.length>0?r.resolve(n()):i.get(t).then(function(){r.resolve(n())}),r.promise},BaseCollection.prototype.getModel=function(e,t){function o(){return _.find(n.models,e)}var n=this;void 0===t&&(t=!1);var i=n.$q.defer();return!t&&n.models.length>0?i.resolve(o()):n.get(t).then(function(){i.resolve(o())}),i.promise},Collection.prototype=Object.create(BaseCollection.prototype),Collection.prototype.create=function(e,t){var o=this,n=o.$q.defer();return void 0===t&&(t=o.url+e.key+"/"),o.$http.post(t,e).then(function(t){var i=o.extract(t);void 0!==i&&""!==i||(i=e),o.models.push(i),n.resolve(o.extract(t))},function(e){n.reject(o.extract(e))}),n.promise},Collection.prototype.save=function(e){var t=this,o=t.$q.defer(),n=t.url+e.key+"/";return t.$http.put(n,e).then(function(n){_.remove(t.models,function(t){return t.key==e.key}),t.models.push(t.extract(n)),o.resolve(t.extract(n))},function(e){o.reject(t.extract(e))}),o.promise},Collection.prototype["delete"]=function(e){var t=this,o=t.$q.defer(),n=t.url+e.key+"/";return t.$http["delete"](n).then(function(n){_.remove(t.models,function(t){return t.key==e.key}),o.resolve(t.extract(n))},function(e){o.reject(t.extract(e))}),o.promise},Collection.prototype.deleteUsingKey=function(e,t,o){var n=this;void 0===t&&(t="key");var i=n.$q.defer();return void 0===o&&(o=n.url+e+"/"),n.$http["delete"](o).then(function(o){_.remove(n.models,function(o){return o[t]==e}),i.resolve(n.extract(o))},function(e){i.reject(n.extract(e))}),i.promise},angular.module("contiv.models").factory("NetworksModel",["$http","$q",function(e,t){return new Collection(e,t,ContivGlobals.NETWORKS_ENDPOINT)}]),angular.module("contiv.models").factory("NodesModel",["$http","$q",function(e,t){var o=new NodesCollection(e,t);return o}]),NodesCollection.prototype=Object.create(BaseCollection.prototype),NodesCollection.prototype.extract=function(e){return _.map(e.data,function(e,t){return e.key=t,e})},NodesCollection.prototype.commission=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.NODES_COMMISSION_ENDPOINT;return t.$http.post(n,e,{headers:{"Content-Type":"application/json"}}).then(function(e){o.resolve()},function(e){o.reject(e)}),o.promise},NodesCollection.prototype.decommission=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.NODES_DECOMMISSION_ENDPOINT;return t.$http.post(n,e,{headers:{"Content-Type":"application/json"}}).then(function(e){o.resolve()},function(e){o.reject(e)}),o.promise},NodesCollection.prototype.upgrade=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.NODES_MAINTENANCE_ENDPOINT;return t.$http.post(n,e,{headers:{"Content-Type":"application/json"}}).then(function(e){o.resolve()},function(e){o.reject(e)}),o.promise},NodesCollection.prototype.discover=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.NODES_DISCOVER_ENDPOINT;return t.$http.post(n,e,{headers:{"Content-Type":"application/json"}}).then(function(e){o.resolve()},function(e){o.reject(e)}),o.promise},angular.module("contiv.models").factory("OrganizationsModel",["$http","$q",function(e,t){return new Collection(e,t,ContivGlobals.ORGANIZATIONS_ENDPOINT)}]),angular.module("contiv.models").factory("PoliciesModel",["$http","$q",function(e,t){var o=new Collection(e,t,ContivGlobals.POLICIES_ENDPOINT);return o.generateKey=function(e){return e.tenantName+":"+e.policyName},o}]),angular.module("contiv.models").factory("RulesModel",["$http","$q",function(e,t){var o=new Collection(e,t,ContivGlobals.RULES_ENDPOINT);return o.getIncomingRules=function(e,t){return o.get().then(function(o){return _.filter(o,{policyName:e,direction:"in",tenantName:t})})},o.getOutgoingRules=function(e,t){return o.get().then(function(o){return _.filter(o,{policyName:e,direction:"out",tenantName:t})})},o.generateKey=function(e){return e.tenantName+":"+e.policyName+":"+e.ruleId},o}]),angular.module("contiv.models").factory("ServicelbsModel",["$http","$q",function(e,t){return new Collection(e,t,ContivGlobals.SERVICELBS_ENDPOINT)}]),angular.module("contiv.models").factory("StoragePoliciesModel",["$http","$q",function(e,t){function o(e,t){Collection.call(this,e,t,ContivGlobals.STORAGEPOLICIES_ENDPOINT)}o.prototype=Object.create(Collection.prototype),o.prototype.create=function(e){var t=this,o=t.url+e.name;return Collection.prototype.create.call(t,e,o)},o.prototype.save=function(e){var t=this,o=t.$q.defer(),n=t.url+e.name;return t.$http.post(n,e).then(function(n){_.remove(t.models,function(t){return t.name==e.name}),t.models.push(e),o.resolve(t.extract(n))},function(e){o.reject(t.extract(e))}),o.promise};var n=new o(e,t);return n}]),angular.module("contiv.models").factory("VolumesModel",["$http","$q",function(e,t){function o(e,t){Collection.call(this,e,t,ContivGlobals.VOLUMES_ENDPOINT)}o.prototype=Object.create(Collection.prototype),o.prototype["delete"]=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.VOLUMES_DELETE_ENDPOINT;e.volume=e.name;var i={data:e};return t.$http["delete"](n,i).then(function(n){_.remove(t.models,function(t){return t.name==e.name&&t.policy==e.policy}),o.resolve(t.extract(n))},function(e){o.reject(t.extract(e))}),o.promise},o.prototype.create=function(e){var t=this,o=ContivGlobals.VOLUMES_CREATE_ENDPOINT;return Collection.prototype.create.call(t,e,o)},o.prototype.copy=function(e,t,o){var n=this,i=n.$q.defer(),r=ContivGlobals.VOLUMES_COPYSNAPSHOTS_ENDPOINT,l={volume:e.name,policy:e.policy,Options:{target:o,snapshot:t}};return n.$http.post(r,l).then(function(e){i.resolve(n.extract(e))},function(e){i.reject(n.extract(e))}),i.promise};var n=new o(e,t);return n}]),angular.module("contiv.utils").factory("CRUDHelperService",function(){function e(e){e.showLoader=!0}function t(e){e.showLoader=!1}function o(e,t){e.showServerError=!0,e.serverErrorMessage=t}function n(e){e.showServerError=!1}return{startLoader:e,stopLoader:t,showServerError:o,hideServerError:n}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbW9kZWxzL2NvbGxlY3Rpb24uanMiLCJjb21wb25lbnRzL21vZGVscy9ub2Rlc21vZGVsLmpzIiwiZGlyZWN0aXZlcy9tb2R1bGUuanMiLCJtb2RlbHMvbW9kdWxlLmpzIiwidXRpbHMvbW9kdWxlLmpzIiwiYXBwbGljYXRpb25ncm91cHMvbW9kdWxlLmpzIiwiZGFzaGJvYXJkL21vZHVsZS5qcyIsImxvZ2luL21vZHVsZS5qcyIsIm1lbnUvbW9kdWxlLmpzIiwibmV0d29ya3MvbW9kdWxlLmpzIiwibmV0d29ya19wb2xpY2llcy9tb2R1bGUuanMiLCJub2Rlcy9tb2R1bGUuanMiLCJvcmdhbml6YXRpb25zL21vZHVsZS5qcyIsInNlcnZpY2VfbGJzL21vZHVsZS5qcyIsInN0b3JhZ2VfcG9saWNpZXMvbW9kdWxlLmpzIiwidm9sdW1lcy9tb2R1bGUuanMiLCJhcHAuanMiLCJhcHBsaWNhdGlvbmdyb3Vwcy9hcHBsaWNhdGlvbmdyb3VwY3JlYXRlY3RybC5qcyIsImFwcGxpY2F0aW9uZ3JvdXBzL2FwcGxpY2F0aW9uZ3JvdXBkZXRhaWxzY3RybC5qcyIsImFwcGxpY2F0aW9uZ3JvdXBzL2FwcGxpY2F0aW9uZ3JvdXBsaXN0Y3RybC5qcyIsImFwcGxpY2F0aW9uZ3JvdXBzL2FwcGxpY2F0aW9uZ3JvdXBzZXJ2aWNlLmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZGN0cmwuanMiLCJsb2dpbi9sb2dpbmN0cmwuanMiLCJtZW51L21lbnVDdHJsLmpzIiwibmV0d29ya3MvbmV0d29ya2NyZWF0ZWN0cmwuanMiLCJuZXR3b3Jrcy9uZXR3b3JrZGV0YWlsc2N0cmwuanMiLCJuZXR3b3Jrcy9uZXR3b3JrbGlzdGN0cmwuanMiLCJuZXR3b3JrX3BvbGljaWVzL2lzb2xhdGlvbnBvbGljeWNyZWF0ZWN0cmwuanMiLCJuZXR3b3JrX3BvbGljaWVzL2lzb2xhdGlvbnBvbGljeWRldGFpbHNjdHJsLmpzIiwibmV0d29ya19wb2xpY2llcy9pc29sYXRpb25wb2xpY3lsaXN0Y3RybC5qcyIsIm5ldHdvcmtfcG9saWNpZXMvbmV0d29ya3BvbGljaWVzdGFic2N0cmwuanMiLCJub2Rlcy9ub2RlY29tbWlzc2lvbmN0cmwuanMiLCJub2Rlcy9ub2RlZGV0YWlsc2N0cmwuanMiLCJub2Rlcy9ub2RlbGlzdGN0cmwuanMiLCJub2Rlcy9ub2Rlc2VydmljZS5qcyIsIm9yZ2FuaXphdGlvbnMvb3JnYW5pemF0aW9uY3JlYXRlY3RybC5qcyIsIm9yZ2FuaXphdGlvbnMvb3JnYW5pemF0aW9uZGV0YWlsc2N0cmwuanMiLCJvcmdhbml6YXRpb25zL29yZ2FuaXphdGlvbmxpc3RjdHJsLmpzIiwic2VydmljZV9sYnMvc2VydmljZWxiY3JlYXRlY3RybC5qcyIsInNlcnZpY2VfbGJzL3NlcnZpY2VsYmRldGFpbHNjdHJsLmpzIiwic2VydmljZV9sYnMvc2VydmljZWxibGlzdGN0cmwuanMiLCJzZXJ2aWNlX2xicy9zZXJ2aWNlbGJwb3J0c2RpcmVjdGl2ZS5qcyIsInN0b3JhZ2VfcG9saWNpZXMvc3RvcmFnZXBvbGljeWNyZWF0ZWN0cmwuanMiLCJzdG9yYWdlX3BvbGljaWVzL3N0b3JhZ2Vwb2xpY3lkZXRhaWxzY3RybC5qcyIsInN0b3JhZ2VfcG9saWNpZXMvc3RvcmFnZXBvbGljeWRpcmVjdGl2ZS5qcyIsInN0b3JhZ2VfcG9saWNpZXMvc3RvcmFnZXBvbGljeWxpc3RjdHJsLmpzIiwidm9sdW1lcy92b2x1bWVjcmVhdGVjdHJsLmpzIiwidm9sdW1lcy92b2x1bWVkZXRhaWxzY3RybC5qcyIsInZvbHVtZXMvdm9sdW1lbGlzdGN0cmwuanMiLCJ2b2x1bWVzL3ZvbHVtZXNlcnZpY2UuanMiLCJjb21wb25lbnRzL2RpcmVjdGl2ZXMvY29sbGFwc2libGVkaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL2RpcmVjdGl2ZXMvZXJyb3JtZXNzYWdlZGlyZWN0aXZlLmpzIiwiY29tcG9uZW50cy9kaXJlY3RpdmVzL25hbWV2YWx1ZWRpcmVjdGl2ZS5qcyIsImNvbXBvbmVudHMvZGlyZWN0aXZlcy90YWJsZWRpcmVjdGl2ZS5qcyIsImNvbXBvbmVudHMvbW9kZWxzL2FwcGxpY2F0aW9uZ3JvdXBzbW9kZWwuanMiLCJjb21wb25lbnRzL21vZGVscy9uZXR3b3Jrc21vZGVsLmpzIiwiY29tcG9uZW50cy9tb2RlbHMvb3JnYW5pemF0aW9uc21vZGVsLmpzIiwiY29tcG9uZW50cy9tb2RlbHMvcG9saWNpZXNtb2RlbC5qcyIsImNvbXBvbmVudHMvbW9kZWxzL3J1bGVzbW9kZWwuanMiLCJjb21wb25lbnRzL21vZGVscy9zZXJ2aWNlbGJzbW9kZWwuanMiLCJjb21wb25lbnRzL21vZGVscy9zdG9yYWdlcG9saWNpZXNtb2RlbC5qcyIsImNvbXBvbmVudHMvbW9kZWxzL3ZvbHVtZXNtb2RlbC5qcyIsImNvbXBvbmVudHMvdXRpbHMvY3J1ZGhlbHBlcnNlcnZpY2UuanMiXSwibmFtZXMiOlsiQmFzZUNvbGxlY3Rpb24iLCIkaHR0cCIsIiRxIiwidXJsIiwidGhpcyIsIm1vZGVscyIsIkNvbGxlY3Rpb24iLCJjYWxsIiwiTm9kZXNDb2xsZWN0aW9uIiwiQ29udGl2R2xvYmFscyIsIk5PREVTX0xJU1RfRU5EUE9JTlQiLCJhbmd1bGFyIiwibW9kdWxlIiwiTkVUV09SS1NfRU5EUE9JTlQiLCJQT0xJQ0lFU19FTkRQT0lOVCIsIlJVTEVTX0VORFBPSU5UIiwiQVBQTElDQVRJT05HUk9VUFNfRU5EUE9JTlQiLCJTRVJWSUNFTEJTX0VORFBPSU5UIiwiT1JHQU5JWkFUSU9OU19FTkRQT0lOVCIsIlZPTFVNRVNfRU5EUE9JTlQiLCJWT0xVTUVTX0NSRUFURV9FTkRQT0lOVCIsIlZPTFVNRVNfREVMRVRFX0VORFBPSU5UIiwiVk9MVU1FU19DT1BZU05BUFNIT1RTX0VORFBPSU5UIiwiVk9MVU1FU19VU0VTX0VORFBPSU5UIiwiVk9MVU1FU19TTkFQU0hPVFNfRU5EUE9JTlQiLCJTVE9SQUdFUE9MSUNJRVNfRU5EUE9JTlQiLCJOT0RFU19ESVNDT1ZFUl9FTkRQT0lOVCIsIk5PREVTX0NPTU1JU1NJT05fRU5EUE9JTlQiLCJOT0RFU19ERUNPTU1JU1NJT05fRU5EUE9JTlQiLCJOT0RFU19NQUlOVEVOQU5DRV9FTkRQT0lOVCIsIkxBU1RfSk9CX0VORFBPSU5UIiwiQUNUSVZFX0pPQl9FTkRQT0lOVCIsIlJFRlJFU0hfSU5URVJWQUwiLCJDSURSX1JFR0VYIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCJzdGF0ZSIsImFic3RyYWN0IiwidGVtcGxhdGUiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCIkc3RhdGUiLCJBcHBsaWNhdGlvbkdyb3Vwc01vZGVsIiwiTmV0d29ya3NNb2RlbCIsIlBvbGljaWVzTW9kZWwiLCJSdWxlc01vZGVsIiwiQXBwbGljYXRpb25Hcm91cFNlcnZpY2UiLCJDUlVESGVscGVyU2VydmljZSIsInJldHVyblRvQXBwbGljYXRpb25Hcm91cCIsImdvIiwiY2FuY2VsQ3JlYXRpbmciLCJnZXROZXR3b3JrcyIsImdldCIsInRoZW4iLCJyZXN1bHQiLCJhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybCIsIm5ldHdvcmtzIiwiXyIsImZpbHRlciIsInRlbmFudE5hbWUiLCJnZXRJc29sYXRpb25Qb2xpY2llcyIsImlzb2xhdGlvblBvbGljaWVzIiwiYWRkSXNvbGF0aW9uUG9saWN5IiwicmVtb3ZlSXNvbGF0aW9uUG9saWN5IiwicG9saWN5TmFtZSIsImNyZWF0ZUFwcGxpY2F0aW9uR3JvdXAiLCJmb3JtIiwiJHZhbGlkIiwiaGlkZVNlcnZlckVycm9yIiwic3RhcnRMb2FkZXIiLCJhcHBsaWNhdGlvbkdyb3VwIiwibmV0d29ya05hbWUiLCJzZWxlY3RlZE5ldHdvcmsiLCJrZXkiLCJnZW5lcmF0ZUtleSIsImNyZWF0ZSIsInN0b3BMb2FkZXIiLCJzaG93U2VydmVyRXJyb3IiLCJyZXNldEZvcm0iLCJncm91cE5hbWUiLCJwb2xpY2llcyIsInNlbGVjdGVkUG9saWN5Iiwic2VsZWN0ZWRQb2xpY2llcyIsImluY29taW5nUnVsZXMiLCJvdXRnb2luZ1J1bGVzIiwiaXNvbGF0aW9uUG9saWNpZXNWaXNpYmxlIiwiJHN0YXRlUGFyYW1zIiwic2V0TW9kZSIsImlzIiwiYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsIiwibW9kZSIsInJldHVyblRvQXBwbGljYXRpb25Hcm91cERldGFpbHMiLCJjYW5jZWxFZGl0aW5nIiwiZ2V0UnVsZXMiLCJmb3JFYWNoIiwicG9saWN5IiwiZ2V0SW5jb21pbmdSdWxlcyIsInJ1bGVzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJwdXNoIiwiYXBwbHkiLCJnZXRPdXRnb2luZ1J1bGVzIiwiZGVsZXRlQXBwbGljYXRpb25Hcm91cCIsInNhdmVBcHBsaWNhdGlvbkdyb3VwIiwic2F2ZSIsImdldE1vZGVsQnlLZXkiLCJncm91cCIsInVuZGVmaW5lZCIsIiRzY29wZSIsIiRpbnRlcnZhbCIsIiRmaWx0ZXIiLCJnZXRBcHBsaWNhdGlvbkdyb3VwcyIsInJlbG9hZCIsImFwcGxpY2F0aW9uR3JvdXBMaXN0Q3RybCIsImdyb3VwcyIsInByb21pc2UiLCJpc0RlZmluZWQiLCIkb24iLCJjYW5jZWwiLCJmYWN0b3J5IiwiYXBwbGljYXRpb25Hcm91cEN0cmwiLCJmaW5kIiwicmVtb3ZlIiwicnVsZSIsIk5vZGVzTW9kZWwiLCJWb2x1bWVzTW9kZWwiLCJTdG9yYWdlUG9saWNpZXNNb2RlbCIsImdldERhc2hib2FyZEluZm8iLCJkYXNoYm9hcmRDdHJsIiwibm9kZXMiLCJsZW5ndGgiLCJ2b2x1bWVzIiwibmV0d29ya3BvbGljaWVzIiwic3RvcmFnZXBvbGljaWVzIiwicmV0dXJuVG9EYXNoYm9hcmQiLCJ1c2VybmFtZSIsImxvZ2luQ3RybCIsImxvZ2luIiwicGFyYW1zIiwibG9nb3V0IiwibWVudUN0cmwiLCJyZXR1cm5Ub05ldHdvcmtzIiwiY3JlYXRlTmV0d29yayIsIm5ldHdvcmtDcmVhdGVDdHJsIiwibmV3TmV0d29yayIsImVuY2FwIiwic3VibmV0IiwiZ2F0ZXdheSIsImNpZHJQYXR0ZXJuIiwiZGVsZXRlTmV0d29yayIsIm5ldHdvcmtEZXRhaWxzQ3RybCIsIm5ldHdvcmsiLCJhcHBsaWNhdGlvbkdyb3VwcyIsIm5ldHdvcmtzTGlzdEN0cmwiLCJyZXR1cm5Ub1BvbGljaWVzIiwiY3JlYXRlUG9saWN5IiwiaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybCIsIm5ld1BvbGljeSIsInJldHVyblRvUG9saWN5RGV0YWlscyIsImlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsIiwiZG9uZUVkaXRpbmciLCJkZWxldGVQb2xpY3kiLCJyZXNldE5ld0luY29taW5nUnVsZSIsIm5ld0luY29taW5nUnVsZSIsInJ1bGVJZCIsInByaW9yaXR5IiwiYWN0aW9uIiwiZnJvbUVuZHBvaW50R3JvdXAiLCJmcm9tTmV0d29yayIsImZyb21JUEFkZHJlc3MiLCJwcm90b2NvbCIsInBvcnQiLCJkaXJlY3Rpb24iLCJuZXdJbmNvbWluZ1NlbGVjdGVkQXBwbGljYXRpb25Hcm91cCIsImRpc2FibGVJbmNvbWluZ05ldHdvcmtTZWxlY3Rpb24iLCJkaXNhYmxlSW5jb21pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uIiwicmVzZXROZXdPdXRnb2luZ1J1bGUiLCJuZXdPdXRnb2luZ1J1bGUiLCJ0b0VuZHBvaW50R3JvdXAiLCJ0b05ldHdvcmsiLCJ0b0lQQWRkcmVzcyIsIm5ld091dGdvaW5nU2VsZWN0ZWRBcHBsaWNhdGlvbkdyb3VwIiwiZGlzYWJsZU91dGdvaW5nTmV0d29ya1NlbGVjdGlvbiIsImRpc2FibGVPdXRnb2luZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24iLCJvbkNoYW5nZU91dGdvaW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbiIsIm9uQ2hhbmdlSW5jb21pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uIiwib25DaGFuZ2VPdXRnb2luZ05ldHdvcmtTZWxlY3Rpb24iLCJUb0VuZHBvaW50R3JvdXAiLCJvbkNoYW5nZUluY29taW5nTmV0d29ya1NlbGVjdGlvbiIsImdlbmVyYXRlUnVsZUlkIiwidG9TdHJpbmciLCJEYXRlIiwibm93IiwiYWRkSW5jb21pbmdSdWxlIiwiYWRkT3V0Z29pbmdSdWxlIiwiZGVsZXRlSW5jb21pbmdSdWxlIiwiZGVsZXRlVXNpbmdLZXkiLCJuIiwiZGVsZXRlT3V0Z29pbmdSdWxlIiwiZ2V0UG9saWNpZXMiLCJwb2xpY2llc0xpc3RDdHJsIiwibm9kZUNvbW1pc3Npb25DdHJsIiwicmV0dXJuVG9Ob2RlRGV0YWlscyIsInJldHVyblRvTm9kZXMiLCJjYW5jZWxDb21taXNzaW9uaW5nTm9kZSIsImNhbmNlbERpc2NvdmVyaW5nTm9kZSIsImNyZWF0ZUV4dHJhVmFycyIsImFuc2libGVWYXJpYWJsZXMiLCJpdGVtIiwiZXh0cmFfdmFycyIsIm5hbWUiLCJ2YWx1ZSIsImVudlZhcnMiLCJlbnZWYXJpYWJsZXMiLCJub2RlT3BzT2JqIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbW1pc3Npb24iLCJjbGVhbnVwRXh0cmFWYXJzIiwiZGlzY292ZXIiLCJjcmVhdGVJUEFkZHJBcnJheSIsImFkZHJzIiwid29yZHMiLCJub2RlSVBBZGRyIiwiZGVjb21taXNzaW9uIiwibm9kZURldGFpbHNDdHJsIiwic2hvd0NvbW1pc3Npb25CdXR0b24iLCJjb21taXNzaW9uQnV0dG9uRW5hYmxlZCIsInVwZ3JhZGVCdXR0b25FbmFibGVkIiwidXBncmFkZSIsInNldEJ1dHRvbkRpc3BsYXkiLCJub2RlIiwic3RhdHVzIiwiZ2V0Tm9kZUluZm8iLCJOb2RlU2VydmljZSIsImdldE5vZGVzIiwibm9kZUxpc3RDdHJsIiwiZ2V0TG9nSW5mbyIsImdldEFjdGl2ZUxvZ3MiLCJnZXRMYXN0TG9ncyIsImFjdGl2ZUxvZ3MiLCJsYXN0TG9ncyIsImRlZmVycmVkIiwiZGVmZXIiLCJyZXNvbHZlIiwiZGF0YSIsInJlamVjdCIsIk9yZ2FuaXphdGlvbnNNb2RlbCIsInJldHVyblRvT3JnYW5pemF0aW9ucyIsImNyZWF0ZU9yZ2FuaXphdGlvbiIsIm9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwiLCJuZXdPcmdhbml6YXRpb24iLCJkZWxldGVPcmdhbml6YXRpb24iLCJvcmdhbml6YXRpb25EZXRhaWxzQ3RybCIsIm9yZ2FuaXphdGlvbiIsImdldE9yZ2FuaXphdGlvbnMiLCJvcmdhbml6YXRpb25zTGlzdEN0cmwiLCJvcmdhbml6YXRpb25zIiwiU2VydmljZWxic01vZGVsIiwicmV0dXJuVG9TZXJ2aWNlbGJzIiwic2VydmljZWxiQ3JlYXRlQ3RybCIsImNyZWF0ZUxhYmVsU2VsZWN0b3JTdHJpbmdzIiwic2VydmljZWxiIiwic2VsZWN0b3JzIiwibGFiZWxTZWxlY3RvcnMiLCJsYWJlbFNlbGVjdG9yIiwic2VsZWN0b3JTdHJpbmciLCJjcmVhdGVTZXJ2aWNlbGIiLCJzZXJ2aWNlTmFtZSIsImlwQWRkcmVzcyIsInBvcnRzIiwic2VydmljZWxiRGV0YWlsc0N0cmwiLCJyZXR1cm5Ub1NlcnZpY2VsYkRldGFpbHMiLCJkZWxldGVTZXJ2aWNlbGIiLCJzYXZlU2VydmljZWxiIiwiY3JlYXRlTGFiZWxTZWxlY3RvcnMiLCJzZWxlY3RvclN0ciIsInNlbGVjdG9yIiwic3BsaXQiLCJnZXRTZXJ2aWNlbGJzIiwic2VydmljZWxiTGlzdEN0cmwiLCJzZXJ2aWNlbGJzIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsIml0ZW1zIiwibGluayIsImNvbXBhcmUiLCJ2YWwxIiwidmFsMiIsInJlc2V0TmV3SXRlbSIsIm5ld0l0ZW0iLCJzZXJ2aWNlUG9ydCIsInByb3ZpZGVyUG9ydCIsImlzRW1wdHlJdGVtIiwiYWRkIiwibmV3SXRlbVN0ciIsInB1bGxBbGxXaXRoIiwicGFzc2VkSXRlbSIsInJldHVyblRvU3RvcmFnZVBvbGljaWVzIiwiY3JlYXRlRmlsZXN5c3RlbUNtZHMiLCJzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybCIsImZpbGVzeXN0ZW1jbWRzIiwibmV3U3RvcmFnZVBvbGljeSIsImZpbGVzeXN0ZW1zIiwiYmFja2VuZHMiLCJjcnVkIiwibW91bnQiLCJzbmFwc2hvdCIsInVubG9ja2VkIiwiZHJpdmVyIiwicG9vbCIsInNpemUiLCJmaWxlc3lzdGVtIiwicnVudGltZSIsInNuYXBzaG90cyIsImZyZXF1ZW5jeSIsImtlZXAiLCJyYXRlLWxpbWl0Iiwid3JpdGUtaW9wcyIsInJlYWQtaW9wcyIsIndyaXRlLWJwcyIsInJlYWQtYnBzIiwic3RvcmFnZVBvbGljeURldGFpbHNDdHJsIiwiaW5pdGlhbGl6ZUZpbGVzeXN0ZW1DbWRzQXJyYXkiLCJzYXZlUG9saWN5Iiwic3RvcmFnZVBvbGljeUxpc3RDdHJsIiwicmV0dXJuVG9Wb2x1bWVzTW9kZWwiLCJnZXRTdG9yYWdlUG9saWNpZXMiLCJ2b2x1bWVDcmVhdGVDdHJsIiwiYXBwbHlQb2xpY3lTZXR0aW5ncyIsIm5ld1ZvbHVtZSIsImNyZWF0ZVZvbHVtZSIsIlZvbHVtZVNlcnZpY2UiLCJyZXR1cm5Ub1ZvbHVtZXMiLCJkZWxldGVWb2x1bWUiLCJ2b2x1bWVEZXRhaWxzQ3RybCIsInZvbHVtZSIsImdldFZvbHVtZUluZm8iLCJ0b2tlbnMiLCJtb2RlbCIsImdldE1vZGVsIiwiZ2V0Vm9sdW1lVXNlSW5mbyIsImdldFZvbHVtZVNuYXBzaG90cyIsInZvbHVtZVVzZSIsImNvcHlTbmFwc2hvdCIsImNvcHkiLCJnZXRWb2x1bWVzIiwidm9sdW1lTGlzdEN0cmwiLCJ0aXRsZSIsImNvbGxhcHNlZCIsInRyYW5zY2x1ZGUiLCJoZWFkZXIiLCJlcnJvciIsImVsZW1lbnQiLCJhdHRyIiwib24iLCJhZGRDbGFzcyIsIm5hbWVoZWFkZXIiLCJ2YWx1ZWhlYWRlciIsInR5cGUiLCJvcHRpb25zIiwiZmlsdGVyRmlsdGVyIiwibGltaXRUb0ZpbHRlciIsImZpbHRlcmVkaXRlbXMiLCIkZWxlbWVudCIsIiRhdHRycyIsInNob3dDaHVuayIsInBhZ2VObyIsInNlYXJjaFRleHQiLCJ0YWJsZUN0cmwiLCJzZWFyY2hUZXh0RmlsdGVyZWRJdGVtcyIsIm5vT2ZDaHVua3MiLCJNYXRoIiwiY2VpbCIsImNodW5rcyIsImkiLCJzZWxlY3RlZCIsInNsaWNlU3RhcnQiLCJzbGljZUVuZCIsInBhZ2luYXRpb25NZW51Iiwic2xpY2UiLCJmaWx0ZXJlZEl0ZW1zIiwic2hvd1ByZXZDaHVuayIsInByZXZDaHVuayIsInNob3dOZXh0Q2h1bmsiLCJuZXh0Q2h1bmsiLCJhZGRQYWdpbmF0aW9uTWVudSIsIm1lbnUiLCJwYXJzZUludCIsImlzTmFOIiwiYXR0cnMiLCIkcGFyZW50IiwiJHdhdGNoIiwicmVwbGFjZSIsImNsYXNzIiwicmVxdWlyZSIsInBsYWNlaG9sZGVyIiwiZ3JvdXBzbW9kZWwiLCJleHRyYWN0IiwiY29sbGVjdGlvbiIsIndoZW4iLCJrZXluYW1lIiwiZmluZE1vZGVsIiwiYyIsIk9iamVjdCIsInBvc3QiLCJyZXNwb25zZSIsInJlc3BvbnNlRGF0YSIsInB1dCIsIm5vZGVzbW9kZWwiLCJtYXAiLCJub2Rlc2NvbGxlY3Rpb24iLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwicG9saWNpZXNtb2RlbCIsInJ1bGVzbW9kZWwiLCJTdG9yYWdlUG9saWNpZXNDb2xsZWN0aW9uIiwiVm9sdW1lc0NvbGxlY3Rpb24iLCJ2b2x1bWVzY29sbGVjdGlvbiIsInZvbGNvcHltb2RlbCIsIk9wdGlvbnMiLCJ0YXJnZXQiLCJ2b2x1bWVzbW9kZWwiLCJzaG93TG9hZGVyIiwibWVzc2FnZSIsInNlcnZlckVycm9yTWVzc2FnZSJdLCJtYXBwaW5ncyI6IkFBT0EsUUFBQUEsZ0JBQUFDLEVBQUFDLEVBQUFDLEdBQ0FDLEtBQUFDLFVBQ0FELEtBQUFILE1BQUFBLEVBQ0FHLEtBQUFGLEdBQUFBLEVBQ0FFLEtBQUFELElBQUFBLEVBMkZBLFFBQUFHLFlBQUFMLEVBQUFDLEVBQUFDLEdBQ0FILGVBQUFPLEtBQUFILEtBQUFILEVBQUFDLEVBQUFDLEdDdkZBLFFBQUFLLGlCQUFBUCxFQUFBQyxHQUNBRixlQUFBTyxLQUFBSCxLQUFBSCxFQUFBQyxFQUFBTyxjQUFBQyxxQkNqQkFDLFFBQUFDLE9BQUEsd0JDR0FELFFBQUFDLE9BQUEsbUJBQ0EsSUFBQUgsZUFBQSxXQUVBLE9BRUFJLGtCQUFB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QUFBLFNBQUFtVyxHQUdBckssRUFBQUUsUUFBQTRKLEVBQUFELFFBQUFRLEtBQ0EsU0FBQUEsR0FDQXJLLEVBQUFJLE9BQUEwSixFQUFBRCxRQUFBUSxNQUVBckssRUFBQS9ILFFBR0EsSUFBQW9ULEdBQUEsR0FBQUwsR0FBQXBhLEVBQUFDLEVBQ0EsT0FBQXdhLE1DakVBL1osUUFBQUMsT0FBQSxnQkFDQThHLFFBQUEsb0JBQUEsV0FDQSxRQUFBbkQsR0FBQTlCLEdBQ0FBLEVBQUFrWSxZQUFBLEVBR0EsUUFBQTdWLEdBQUFyQyxHQUNBQSxFQUFBa1ksWUFBQSxFQUdBLFFBQUE1VixHQUFBdEMsRUFBQW1ZLEdBQ0FuWSxFQUFBc0MsaUJBQUEsRUFDQXRDLEVBQUFvWSxtQkFBQUQsRUFHQSxRQUFBdFcsR0FBQTdCLEdBQ0FBLEVBQUFzQyxpQkFBQSxFQUdBLE9BQ0FSLFlBQUFBLEVBQ0FPLFdBQUFBLEVBQ0FDLGdCQUFBQSxFQUNBVCxnQkFBQUEiLCJmaWxlIjoiYXBwL2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBCYXNlQ29sbGVjdGlvbiBjbGFzcyB0aGF0IGRvZXMganVzdCBmZXRjaCBvZiB0aGUgb2JqZWN0cy5cclxuICogQHBhcmFtICRodHRwXHJcbiAqIEBwYXJhbSAkcVxyXG4gKiBAcGFyYW0gdXJsIFVzZWQgZm9yIGRvaW5nIEhUVFAgR0VUIGFuZCBmZXRjaCBvYmplY3RzIGZyb20gc2VydmVyXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZnVuY3Rpb24gQmFzZUNvbGxlY3Rpb24oJGh0dHAsICRxLCB1cmwpIHtcclxuICAgIHRoaXMubW9kZWxzID0gW107XHJcbiAgICB0aGlzLiRodHRwID0gJGh0dHA7XHJcbiAgICB0aGlzLiRxID0gJHE7XHJcbiAgICB0aGlzLnVybCA9IHVybDtcclxufVxyXG5cclxuQmFzZUNvbGxlY3Rpb24ucHJvdG90eXBlLmV4dHJhY3QgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICByZXR1cm4gcmVzdWx0LmRhdGE7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHJlbG9hZCBPcHRpb25hbC4gRGVmYXVsdCBpcyBmYWxzZVxyXG4gKiBAcmV0dXJucyB7Kn1cclxuICovXHJcbkJhc2VDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocmVsb2FkKSB7XHJcbiAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XHJcbiAgICBpZiAocmVsb2FkID09PSB1bmRlZmluZWQpIHJlbG9hZCA9IGZhbHNlO1xyXG4gICAgcmV0dXJuICghcmVsb2FkICYmIGNvbGxlY3Rpb24ubW9kZWxzLmxlbmd0aCA+IDApID9cclxuICAgICAgICBjb2xsZWN0aW9uLiRxLndoZW4oY29sbGVjdGlvbi5tb2RlbHMpIDogY29sbGVjdGlvbi4kaHR0cC5nZXQoY29sbGVjdGlvbi51cmwpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBjb2xsZWN0aW9uLm1vZGVscyA9IGNvbGxlY3Rpb24uZXh0cmFjdChyZXN1bHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5tb2RlbHM7XHJcbiAgICAgICAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGtleVxyXG4gKiBAcGFyYW0gcmVsb2FkIE9wdGlvbmFsLiBEZWZhdWx0IGlzIGZhbHNlXHJcbiAqIEBwYXJhbSBrZXluYW1lXHJcbiAqIEByZXR1cm5zIHsqfVxyXG4gKi9cclxuQmFzZUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldE1vZGVsQnlLZXkgPSBmdW5jdGlvbiAoa2V5LCByZWxvYWQsIGtleW5hbWUpIHtcclxuICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcclxuICAgIGlmIChyZWxvYWQgPT09IHVuZGVmaW5lZCkgcmVsb2FkID0gZmFsc2U7XHJcbiAgICBpZiAoa2V5bmFtZSA9PT0gdW5kZWZpbmVkKSBrZXluYW1lID0gJ2tleSc7XHJcblxyXG4gICAgdmFyIGRlZmVycmVkID0gY29sbGVjdGlvbi4kcS5kZWZlcigpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZpbmRNb2RlbCgpIHtcclxuICAgICAgICByZXR1cm4gXy5maW5kKGNvbGxlY3Rpb24ubW9kZWxzLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICByZXR1cm4gY1trZXluYW1lXSA9PSBrZXk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXJlbG9hZCAmJiBjb2xsZWN0aW9uLm1vZGVscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmaW5kTW9kZWwoKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbGxlY3Rpb24uZ2V0KHJlbG9hZClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmaW5kTW9kZWwoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBtb2RlbFxyXG4gKiBAcGFyYW0gcmVsb2FkIE9wdGlvbmFsLiBEZWZhdWx0IGlzIGZhbHNlXHJcbiAqIEByZXR1cm5zIHsqfVxyXG4gKi9cclxuQmFzZUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldE1vZGVsID0gZnVuY3Rpb24gKG1vZGVsLCByZWxvYWQpIHtcclxuICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcclxuICAgIGlmIChyZWxvYWQgPT09IHVuZGVmaW5lZCkgcmVsb2FkID0gZmFsc2U7XHJcblxyXG4gICAgdmFyIGRlZmVycmVkID0gY29sbGVjdGlvbi4kcS5kZWZlcigpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZpbmRNb2RlbCgpIHtcclxuICAgICAgICByZXR1cm4gXy5maW5kKGNvbGxlY3Rpb24ubW9kZWxzLCBtb2RlbClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXJlbG9hZCAmJiBjb2xsZWN0aW9uLm1vZGVscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmaW5kTW9kZWwoKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbGxlY3Rpb24uZ2V0KHJlbG9hZClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmaW5kTW9kZWwoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBFeHRlbmRzIEJhc2VDb2xsZWN0aW9uIGNsYXNzIHRvIGRvIGNyZWF0ZSwgdXBkYXRlIGFuZCBkZWxldGUgdXNpbmcgUE9TVCwgUFVUIGFuZCBERUxFVEUgdmVyYnMuXHJcbiAqIEBwYXJhbSAkaHR0cFxyXG4gKiBAcGFyYW0gJHFcclxuICogQHBhcmFtIHVybCBVc2VkIGZvciBkb2luZyBIVFRQIEdFVCBhbmQgZmV0Y2ggb2JqZWN0cyBmcm9tIHNlcnZlclxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIENvbGxlY3Rpb24oJGh0dHAsICRxLCB1cmwpIHtcclxuICAgIEJhc2VDb2xsZWN0aW9uLmNhbGwodGhpcywgJGh0dHAsICRxLCB1cmwpO1xyXG59XHJcblxyXG5Db2xsZWN0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQmFzZUNvbGxlY3Rpb24ucHJvdG90eXBlKTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gbW9kZWxcclxuICogQHBhcmFtIHVybCBPcHRpb25hbCBpZiBub3QgcGFzc2VkIGl0IGlzIGNvbnN0cnVjdGVkIHVzaW5nIGtleSBhbmQgdXJsIHBhc3NlZCBpbiBjb25zdHJ1Y3RvclxyXG4gKiBAcmV0dXJucyB7Kn1cclxuICovXHJcbkNvbGxlY3Rpb24ucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChtb2RlbCwgdXJsKSB7XHJcbiAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XHJcbiAgICB2YXIgZGVmZXJyZWQgPSBjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XHJcbiAgICBpZiAodXJsID09PSB1bmRlZmluZWQpIHVybCA9IGNvbGxlY3Rpb24udXJsICsgbW9kZWwua2V5ICsgJy8nO1xyXG4gICAgY29sbGVjdGlvbi4kaHR0cC5wb3N0KHVybCwgbW9kZWwpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHZhciByZXNwb25zZURhdGEgPSBjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAvL0ZvciByZXN0IGVuZHBvaW50cyB0aGF0IGRvIG5vdCByZXR1cm4gY3JlYXRlZCBqc29uIG9iamVjdCBpbiByZXNwb25zZVxyXG4gICAgICAgICAgICBpZiAoKHJlc3BvbnNlRGF0YSA9PT0gdW5kZWZpbmVkKSB8fCAocmVzcG9uc2VEYXRhID09PSAnJykpIHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IG1vZGVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vY29sbGVjdGlvbi5tb2RlbHMucHVzaChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgY29sbGVjdGlvbi5tb2RlbHMucHVzaChyZXNwb25zZURhdGEpO1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbn07XHJcblxyXG4vKipcclxuICogVGhpcyBpcyBmb3IgbmV0bWFzdGVyIHNwZWNpZmljIGVuZHBvaW50cyBhbmQgdXNlZCBieSBuZXRtYXN0ZXIgb2JqZWN0cyBvbmx5LlxyXG4gKiBUT0RPOiBHZW5lcmFsaXplXHJcbiAqIEBwYXJhbSBtb2RlbFxyXG4gKiBAcGFyYW0gdXJsIE9wdGlvbmFsXHJcbiAqIEByZXR1cm5zIHsqfVxyXG4gKi9cclxuQ29sbGVjdGlvbi5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIChtb2RlbCkge1xyXG4gICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xyXG4gICAgdmFyIGRlZmVycmVkID0gY29sbGVjdGlvbi4kcS5kZWZlcigpO1xyXG4gICAgdmFyIHVybCA9IGNvbGxlY3Rpb24udXJsICsgbW9kZWwua2V5ICsgJy8nO1xyXG4gICAgY29sbGVjdGlvbi4kaHR0cC5wdXQodXJsLCBtb2RlbClcclxuICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgXy5yZW1vdmUoY29sbGVjdGlvbi5tb2RlbHMsIGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5rZXkgPT0gbW9kZWwua2V5O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29sbGVjdGlvbi5tb2RlbHMucHVzaChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcclxuICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcclxuICAgICAgICB9KTtcclxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRoaXMgaXMgZm9yIG5ldG1hc3RlciBzcGVjaWZpYyBlbmRwb2ludHMgYW5kIHVzZWQgYnkgbmV0bWFzdGVyIG9iamVjdHMgb25seS5cclxuICogVE9ETzogR2VuZXJhbGl6ZVxyXG4gKiBAcGFyYW0gbW9kZWxcclxuICogQHJldHVybnMgeyp9XHJcbiAqL1xyXG5Db2xsZWN0aW9uLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAobW9kZWwpIHtcclxuICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcclxuICAgIHZhciBkZWZlcnJlZCA9IGNvbGxlY3Rpb24uJHEuZGVmZXIoKTtcclxuICAgIHZhciB1cmwgPSBjb2xsZWN0aW9uLnVybCArIG1vZGVsLmtleSArICcvJztcclxuICAgIGNvbGxlY3Rpb24uJGh0dHAuZGVsZXRlKHVybClcclxuICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgXy5yZW1vdmUoY29sbGVjdGlvbi5tb2RlbHMsIGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5rZXkgPT0gbW9kZWwua2V5O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcclxuICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcclxuICAgICAgICB9KTtcclxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBrZXlcclxuICogQHBhcmFtIGtleW5hbWVcclxuICogQHBhcmFtIHVybCBPcHRpb25hbCBpZiBub3QgcGFzc2VkIGl0IGlzIGNvbnN0cnVjdGVkIHVzaW5nIGtleSBhbmQgdXJsIHBhc3NlZCBpbiBjb25zdHJ1Y3RvclxyXG4gKiBAcmV0dXJucyB7Kn1cclxuICovXHJcbkNvbGxlY3Rpb24ucHJvdG90eXBlLmRlbGV0ZVVzaW5nS2V5ID0gZnVuY3Rpb24gKGtleSwga2V5bmFtZSwgdXJsKSB7XHJcbiAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XHJcbiAgICBpZiAoa2V5bmFtZSA9PT0gdW5kZWZpbmVkKSBrZXluYW1lID0gJ2tleSc7XHJcblxyXG4gICAgdmFyIGRlZmVycmVkID0gY29sbGVjdGlvbi4kcS5kZWZlcigpO1xyXG4gICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB1cmwgPSBjb2xsZWN0aW9uLnVybCArIGtleSArICcvJztcclxuICAgIGNvbGxlY3Rpb24uJGh0dHAuZGVsZXRlKHVybClcclxuICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgXy5yZW1vdmUoY29sbGVjdGlvbi5tb2RlbHMsIGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbltrZXluYW1lXSA9PSBrZXk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbn07IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMjIvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm1vZGVscycpXHJcbiAgICAuZmFjdG9yeSgnTm9kZXNNb2RlbCcsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XHJcbiAgICAgICAgdmFyIG5vZGVzbW9kZWwgPSBuZXcgTm9kZXNDb2xsZWN0aW9uKCRodHRwLCAkcSk7XHJcbiAgICAgICAgcmV0dXJuIG5vZGVzbW9kZWw7XHJcbiAgICB9XSk7XHJcblxyXG4vKipcclxuICogTm9kZXNDb2xsZWN0aW9uIGV4dGVuZHMgZnJvbSBCYXNlQ29sbGVjdGlvbi4gSXQgb3ZlcnJpZGVzIGV4dHJhY3QoKSBhbmQgYWRkcyBjb21taXNzaW9uLCBkZWNvbW1pc3Npb24sIHVwZ3JhZGUgYW5kXHJcbiAqIGRpc2NvdmVyIG1ldGhvZHNcclxuICogQHBhcmFtICRodHRwXHJcbiAqIEBwYXJhbSAkcVxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIE5vZGVzQ29sbGVjdGlvbigkaHR0cCwgJHEpIHtcclxuICAgIEJhc2VDb2xsZWN0aW9uLmNhbGwodGhpcywgJGh0dHAsICRxLCBDb250aXZHbG9iYWxzLk5PREVTX0xJU1RfRU5EUE9JTlQpO1xyXG59XHJcblxyXG5Ob2Rlc0NvbGxlY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShCYXNlQ29sbGVjdGlvbi5wcm90b3R5cGUpO1xyXG5cclxuTm9kZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5leHRyYWN0ID0gZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgLy9Db252ZXJ0IHRvIGFycmF5IGlmIHRoZSByZXR1cm5lZCBjb2xsZWN0aW9uIGlzIG5vdCBhbiBhcnJheVxyXG4gICAgcmV0dXJuIF8ubWFwKHJlc3VsdC5kYXRhLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgIHZhbHVlLmtleSA9IGtleTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGtleVxyXG4gKiBAcGFyYW0gZXh0cmFWYXJzIEpTT04gb2JqZWN0IG9mIGV4dHJhIGFuc2libGUgYW5kIGVudmlyb25tZW50IHZhcmlhYmxlcyB0byBiZSBwYXNzZWQgd2hpbGUgY29tbWlzc2lvbmluZyBhIG5vZGVcclxuICoge1xyXG4gICAgICogXCJlbnZcIjp7XCJodHRwX3Byb3h5XCI6XCJodHRwOi8vcHJveHkuZXNsLmNpc2NvLmNvbTo4MDgwXCIsIFwiaHR0cHNfcHJveHlcIjpcImh0dHA6Ly9wcm94eS5lc2wuY2lzY28uY29tOjgwODBcIn0sXHJcbiAgICAgKiBcImNvbnRyb2xfaW50ZXJmYWNlXCI6IFwiZXRoMVwiLCBcInNlcnZpY2VfdmlwXCI6IFwiMTkyLjE2OC4yLjI1MlwiLCBcInZhbGlkYXRlX2NlcnRzXCI6IFwiZmFsc2VcIiwgXCJuZXRwbHVnaW5faWZcIiA6IFwiZXRoMlwiXHJcbiAgICAgKiB9XHJcbiAqIEByZXR1cm5zIHsqfVxyXG4gKi9cclxuTm9kZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5jb21taXNzaW9uID0gZnVuY3Rpb24gKG5vZGVPcHNPYmopIHtcclxuICAgIHZhciBub2Rlc2NvbGxlY3Rpb24gPSB0aGlzO1xyXG4gICAgdmFyIGRlZmVycmVkID0gbm9kZXNjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XHJcbiAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5OT0RFU19DT01NSVNTSU9OX0VORFBPSU5UO1xyXG4gICAgbm9kZXNjb2xsZWN0aW9uLiRodHRwLnBvc3QodXJsLCBub2RlT3BzT2JqLCB7XHJcbiAgICAgICAgICAgICdoZWFkZXJzJzoge1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgLy9TZXJ2ZXIgZG9lc24ndCByZXR1cm4gYW55IGpzb24gaW4gcmVzcG9uc2VcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3BvbnNlKTtcclxuICAgICAgICB9KTtcclxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG59O1xyXG5cclxuTm9kZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5kZWNvbW1pc3Npb24gPSBmdW5jdGlvbiAobm9kZU9wc09iaikge1xyXG4gICAgdmFyIG5vZGVzY29sbGVjdGlvbiA9IHRoaXM7XHJcbiAgICB2YXIgZGVmZXJyZWQgPSBub2Rlc2NvbGxlY3Rpb24uJHEuZGVmZXIoKTtcclxuICAgIHZhciB1cmwgPSBDb250aXZHbG9iYWxzLk5PREVTX0RFQ09NTUlTU0lPTl9FTkRQT0lOVDtcclxuICAgIG5vZGVzY29sbGVjdGlvbi4kaHR0cC5wb3N0KHVybCwgbm9kZU9wc09iaiwge1xyXG4gICAgICAgICAgICAnaGVhZGVycyc6IHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXNwb25zZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxufTtcclxuXHJcbk5vZGVzQ29sbGVjdGlvbi5wcm90b3R5cGUudXBncmFkZSA9IGZ1bmN0aW9uIChub2RlT3BzT2JqKSB7XHJcbiAgICB2YXIgbm9kZXNjb2xsZWN0aW9uID0gdGhpcztcclxuICAgIHZhciBkZWZlcnJlZCA9IG5vZGVzY29sbGVjdGlvbi4kcS5kZWZlcigpO1xyXG4gICAgdmFyIHVybCA9IENvbnRpdkdsb2JhbHMuTk9ERVNfTUFJTlRFTkFOQ0VfRU5EUE9JTlQ7XHJcbiAgICBub2Rlc2NvbGxlY3Rpb24uJGh0dHAucG9zdCh1cmwsIG5vZGVPcHNPYmosIHtcclxuICAgICAgICAgICAgJ2hlYWRlcnMnOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVzcG9uc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGlwXHJcbiAqIEBwYXJhbSBleHRyYVZhcnMgSlNPTiBvYmplY3Qgb2YgZXh0cmEgYW5zaWJsZSBhbmQgZW52aXJvbm1lbnQgdmFyaWFibGVzIHRvIGJlIHBhc3NlZCB3aGlsZSBkaXNjb3ZlcmluZyBhIG5vZGVcclxuICoge1xyXG4gICAgICogXCJlbnZcIjp7XCJodHRwX3Byb3h5XCI6XCJodHRwOi8vcHJveHkuZXNsLmNpc2NvLmNvbTo4MDgwXCIsIFwiaHR0cHNfcHJveHlcIjpcImh0dHA6Ly9wcm94eS5lc2wuY2lzY28uY29tOjgwODBcIn0sXHJcbiAgICAgKiBcImNvbnRyb2xfaW50ZXJmYWNlXCI6IFwiZXRoMVwiLCBcInNlcnZpY2VfdmlwXCI6IFwiMTkyLjE2OC4yLjI1MlwiLCBcImNsdXN0ZXItbmFtZVwiOiBcImNvbnRpdlwiLCBcIm5vZGUtbGFiZWxcIiA6IFwibm9kZTFcIlxyXG4gICAgICogfVxyXG4gKiBAcmV0dXJucyB7Kn1cclxuICovXHJcbk5vZGVzQ29sbGVjdGlvbi5wcm90b3R5cGUuZGlzY292ZXIgPSBmdW5jdGlvbiAobm9kZU9wc09iaikge1xyXG4gICAgdmFyIG5vZGVzY29sbGVjdGlvbiA9IHRoaXM7XHJcbiAgICB2YXIgZGVmZXJyZWQgPSBub2Rlc2NvbGxlY3Rpb24uJHEuZGVmZXIoKTtcclxuICAgIHZhciB1cmwgPSBDb250aXZHbG9iYWxzLk5PREVTX0RJU0NPVkVSX0VORFBPSU5UO1xyXG4gICAgbm9kZXNjb2xsZWN0aW9uLiRodHRwLnBvc3QodXJsLCBub2RlT3BzT2JqLCB7XHJcbiAgICAgICAgICAgICdoZWFkZXJzJzoge1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3BvbnNlKTtcclxuICAgICAgICB9KTtcclxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG59OyIsImFuZ3VsYXIubW9kdWxlKFwiY29udGl2LmRpcmVjdGl2ZXNcIiwgW10pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiAzLzE0LzE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5tb2RlbHMnLCBbXSk7XHJcbnZhciBDb250aXZHbG9iYWxzID0gKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIC8vUkVTVCBlbmRwb2ludHMgZm9yIFxyXG4gICAgICAgICdORVRXT1JLU19FTkRQT0lOVCc6ICcvbmV0bWFzdGVyL2FwaS92MS9uZXR3b3Jrcy8nLFxyXG4gICAgICAgICdQT0xJQ0lFU19FTkRQT0lOVCc6ICcvbmV0bWFzdGVyL2FwaS92MS9wb2xpY3lzLycsXHJcbiAgICAgICAgJ1JVTEVTX0VORFBPSU5UJzogJy9uZXRtYXN0ZXIvYXBpL3YxL3J1bGVzLycsXHJcbiAgICAgICAgJ0FQUExJQ0FUSU9OR1JPVVBTX0VORFBPSU5UJzogJy9uZXRtYXN0ZXIvYXBpL3YxL2VuZHBvaW50R3JvdXBzLycsXHJcbiAgICAgICAgJ1NFUlZJQ0VMQlNfRU5EUE9JTlQnOiAnL25ldG1hc3Rlci9hcGkvdjEvc2VydmljZUxCcy8nLFxyXG4gICAgICAgICdPUkdBTklaQVRJT05TX0VORFBPSU5UJzonL25ldG1hc3Rlci9hcGkvdjEvdGVuYW50cy8nLFxyXG5cclxuICAgICAgICAvL1JFU1QgZW5kcG9pbnRzIGZvciBWT0xNQVNURVJcclxuICAgICAgICAnVk9MVU1FU19FTkRQT0lOVCc6ICcvdm9sbWFzdGVyL3ZvbHVtZXMvJyxcclxuICAgICAgICAnVk9MVU1FU19DUkVBVEVfRU5EUE9JTlQnOiAnL3ZvbG1hc3Rlci92b2x1bWVzL2NyZWF0ZS8nLFxyXG4gICAgICAgICdWT0xVTUVTX0RFTEVURV9FTkRQT0lOVCc6ICcvdm9sbWFzdGVyL3ZvbHVtZXMvcmVtb3ZlLycsXHJcbiAgICAgICAgJ1ZPTFVNRVNfQ09QWVNOQVBTSE9UU19FTkRQT0lOVCc6ICcvdm9sbWFzdGVyL3ZvbHVtZXMvY29weS8nLFxyXG4gICAgICAgICdWT0xVTUVTX1VTRVNfRU5EUE9JTlQnOiAnL3ZvbG1hc3Rlci91c2VzL21vdW50cy8nLFxyXG4gICAgICAgICdWT0xVTUVTX1NOQVBTSE9UU19FTkRQT0lOVCc6ICcvdm9sbWFzdGVyL3NuYXBzaG90cy8nLFxyXG5cclxuICAgICAgICAnU1RPUkFHRVBPTElDSUVTX0VORFBPSU5UJzogJy92b2xtYXN0ZXIvcG9saWNpZXMvJyxcclxuXHJcblxyXG4gICAgICAgIC8vUkVTVCBlbmRwb2ludHMgZm9yIENMVVNURVJcclxuICAgICAgICAnTk9ERVNfTElTVF9FTkRQT0lOVCc6ICcvaW5mby9ub2RlcycsXHJcbiAgICAgICAgJ05PREVTX0RJU0NPVkVSX0VORFBPSU5UJzogJy9kaXNjb3Zlci9ub2RlcycsXHJcbiAgICAgICAgJ05PREVTX0NPTU1JU1NJT05fRU5EUE9JTlQnOiAnL2NvbW1pc3Npb24vbm9kZXMnLFxyXG4gICAgICAgICdOT0RFU19ERUNPTU1JU1NJT05fRU5EUE9JTlQnOiAnL2RlY29tbWlzc2lvbi9ub2RlcycsXHJcbiAgICAgICAgJ05PREVTX01BSU5URU5BTkNFX0VORFBPSU5UJzogJy9tYWludGVuYW5jZS9ub2RlcycsXHJcbiAgICAgICAgJ0xBU1RfSk9CX0VORFBPSU5UJzogJy9pbmZvL2pvYi9sYXN0JyxcclxuICAgICAgICAnQUNUSVZFX0pPQl9FTkRQT0lOVCc6ICcvaW5mby9qb2IvYWN0aXZlJyxcclxuXHJcbiAgICAgICAgLy9SZWZyZXNoIGludGVydmFsIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgICAgICdSRUZSRVNIX0lOVEVSVkFMJzogNTAwMCxcclxuXHJcbiAgICAgICAgLy9SZWdFeCBmb3IgdmFsaWRhdGlvblxyXG4gICAgICAgICdDSURSX1JFR0VYJyA6ICdeKChbMC05XXxbMS05XVswLTldfDFbMC05XXsyfXwyWzAtNF1bMC05XXwyNVswLTVdKVxcLil7M30oWzAtOV18WzEtOV1bMC05XXwxWzAtOV17Mn18MlswLTRdWzAtOV18MjVbMC01XSkoXFwvKFswLTldfFsxLTJdWzAtOV18M1swLTJdKSkkJ1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xOC8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYudXRpbHMnLCBbXSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTgvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmFwcGxpY2F0aW9uZ3JvdXBzJywgWydjb250aXYubW9kZWxzJywgJ2NvbnRpdi5kaXJlY3RpdmVzJywgJ2NvbnRpdi51dGlscyddKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5hcHBsaWNhdGlvbmdyb3VwcycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9hcHBsaWNhdGlvbmdyb3VwcycsXHJcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiB1aS12aWV3IGNsYXNzPVwidWkgY29udGFpbmVyXCIvPidcclxuICAgICAgICAgICAgfSlcclxuICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTgvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmRhc2hib2FyZCcsIFsnY29udGl2Lm1vZGVscyddKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTkvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmxvZ2luJywgWydjb250aXYudXRpbHMnXSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTkvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm1lbnUnLCBbXSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTgvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm5ldHdvcmtzJywgWydjb250aXYubW9kZWxzJywgJ2NvbnRpdi5kaXJlY3RpdmVzJywgJ2NvbnRpdi51dGlscyddKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2NvbnRpdi5tZW51Lm5ldHdvcmtzJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvbmV0d29ya3MnLFxyXG4gICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHVpLXZpZXcgY2xhc3M9XCJ1aSBjb250YWluZXJcIi8+J1xyXG4gICAgICAgIH0pXHJcbiAgICB9XSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzE4LzE2LlxyXG4gKi9cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubmV0d29ya3BvbGljaWVzJywgWydjb250aXYubW9kZWxzJywgJ2NvbnRpdi5kaXJlY3RpdmVzJywgJ2NvbnRpdi51dGlscyddKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xOC8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubm9kZXMnLCBbJ2NvbnRpdi5tb2RlbHMnLCAnY29udGl2LmRpcmVjdGl2ZXMnLCAnY29udGl2LnV0aWxzJ10pXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5vZGVzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL25vZGVzJyxcclxuICAgICAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHVpLXZpZXcgY2xhc3M9XCJ1aSBjb250YWluZXJcIi8+J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfV0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2Lm9yZ2FuaXphdGlvbnMnLCBbJ2NvbnRpdi5tb2RlbHMnLCAnY29udGl2LmRpcmVjdGl2ZXMnLCAnY29udGl2LnV0aWxzJ10pXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnY29udGl2Lm1lbnUub3JnYW5pemF0aW9ucycsIHtcclxuICAgICAgICAgICAgdXJsOiAnL29yZ2FuaXphdGlvbnMnLFxyXG4gICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHVpLXZpZXcgY2xhc3M9XCJ1aSBjb250YWluZXJcIi8+J1xyXG4gICAgICAgIH0pXHJcbiAgICB9XSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTgvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnNlcnZpY2VsYnMnLCBbJ2NvbnRpdi5tb2RlbHMnLCAnY29udGl2LmRpcmVjdGl2ZXMnLCAnY29udGl2LnV0aWxzJ10pXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2VydmljZWxicycsXHJcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiB1aS12aWV3IGNsYXNzPVwidWkgY29udGFpbmVyXCIvPidcclxuICAgICAgICAgICAgfSlcclxuICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTgvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnN0b3JhZ2Vwb2xpY2llcycsIFsnY29udGl2Lm1vZGVscycsICdjb250aXYuZGlyZWN0aXZlcycsICdjb250aXYudXRpbHMnXSlcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc3RvcmFnZXBvbGljaWVzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N0b3JhZ2Vwb2xpY2llcycsXHJcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiB1aS12aWV3IGNsYXNzPVwidWkgY29udGFpbmVyXCIvPidcclxuICAgICAgICAgICAgfSlcclxuICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xOC8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYudm9sdW1lcycsIFsnY29udGl2Lm1vZGVscycsICdjb250aXYuZGlyZWN0aXZlcycsICdjb250aXYudXRpbHMnXSlcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUudm9sdW1lcycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy92b2x1bWVzJyxcclxuICAgICAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHVpLXZpZXcgY2xhc3M9XCJ1aSBjb250YWluZXJcIi8+J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfV0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5cclxuLy8gRGVjbGFyZSBhcHAgbGV2ZWwgbW9kdWxlIHdoaWNoIGRlcGVuZHMgb24gdmlld3MsIGFuZCBjb21wb25lbnRzXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXZBcHAnLCBbXHJcbiAgICAgICAgJ3VpLnJvdXRlcicsXHJcbiAgICAgICAgJ2NvbnRpdi5sb2dpbicsXHJcbiAgICAgICAgJ2NvbnRpdi5tZW51JyxcclxuICAgICAgICAnY29udGl2LmRhc2hib2FyZCcsXHJcbiAgICAgICAgJ2NvbnRpdi5hcHBsaWNhdGlvbmdyb3VwcycsXHJcbiAgICAgICAgJ2NvbnRpdi5uZXR3b3JrcycsXHJcbiAgICAgICAgJ2NvbnRpdi5uZXR3b3JrcG9saWNpZXMnLFxyXG4gICAgICAgICdjb250aXYuc3RvcmFnZXBvbGljaWVzJyxcclxuICAgICAgICAnY29udGl2LnNlcnZpY2VsYnMnLFxyXG4gICAgICAgICdjb250aXYudm9sdW1lcycsXHJcbiAgICAgICAgJ2NvbnRpdi5ub2RlcycsXHJcbiAgICAgICAgJ2NvbnRpdi5vcmdhbml6YXRpb25zJ1xyXG4gICAgXSlcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgLy9hYnN0cmFjdCBzdGF0ZSBzZXJ2ZXMgYXMgYSBQTEFDRUhPTERFUiBvciBOQU1FU1BBQ0UgZm9yIGFwcGxpY2F0aW9uIHN0YXRlc1xyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdicsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJycsXHJcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiB1aS12aWV3IGNsYXNzPVwidWkgZmx1aWQgY29udGFpbmVyXCIvPidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcblxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcclxuICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMTEvMTYuXHJcbiAqL1xyXG4vKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy8xMC8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuYXBwbGljYXRpb25ncm91cHMnKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5hcHBsaWNhdGlvbmdyb3Vwcy5jcmVhdGUnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY3JlYXRlJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybCBhcyBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcGxpY2F0aW9uZ3JvdXBzL2FwcGxpY2F0aW9uZ3JvdXBjcmVhdGUuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9XSlcclxuICAgIC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybCcsIFtcclxuICAgICAgICAnJHN0YXRlJyxcclxuICAgICAgICAnQXBwbGljYXRpb25Hcm91cHNNb2RlbCcsXHJcbiAgICAgICAgJ05ldHdvcmtzTW9kZWwnLFxyXG4gICAgICAgICdQb2xpY2llc01vZGVsJyxcclxuICAgICAgICAnUnVsZXNNb2RlbCcsXHJcbiAgICAgICAgJ0FwcGxpY2F0aW9uR3JvdXBTZXJ2aWNlJyxcclxuICAgICAgICAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uR3JvdXBzTW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgIE5ldHdvcmtzTW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgIFBvbGljaWVzTW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgIFJ1bGVzTW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uR3JvdXBTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZSkge1xyXG4gICAgICAgICAgICB2YXIgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwgPSB0aGlzO1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5uZXR3b3JrcyA9IFtdO1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5pc29sYXRpb25Qb2xpY2llcyA9IFtdO1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5hcHBsaWNhdGlvbkdyb3VwID0ge307XHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsLnNlbGVjdGVkTmV0d29yayA9IHt9O1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5zZWxlY3RlZFBvbGljeSA9IHt9O1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5zZWxlY3RlZFBvbGljaWVzID0gW107XHJcblxyXG4gICAgICAgICAgICAvL1RvIGRpc3BsYXkgaW5jb21pbmcgYW5kIG91dGdvaW5nIHJ1bGVzIGZvciBzZWxlY3RlZCBwb2xpY2llc1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5pbmNvbWluZ1J1bGVzID0gW107XHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsLm91dGdvaW5nUnVsZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsLmlzb2xhdGlvblBvbGljaWVzVmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9BcHBsaWNhdGlvbkdyb3VwKCkge1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5hcHBsaWNhdGlvbmdyb3Vwcy5saXN0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbENyZWF0aW5nKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVG9BcHBsaWNhdGlvbkdyb3VwKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBHZXQgbmV0d29ya3MgZm9yIHRoZSBnaXZlbiB0ZW5hbnQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXROZXR3b3JrcygpIHtcclxuICAgICAgICAgICAgICAgIE5ldHdvcmtzTW9kZWwuZ2V0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwubmV0d29ya3MgPSBfLmZpbHRlcihyZXN1bHQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RlbmFudE5hbWUnOiAnZGVmYXVsdCcvL1RPRE86IFJlbW92ZSBoYXJkY29kZWQgdGVuYW50LlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBHZXQgcG9saWNpZXMgZm9yIHRoZSBnaXZlbiB0ZW5hbnQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRJc29sYXRpb25Qb2xpY2llcygpIHtcclxuICAgICAgICAgICAgICAgIFBvbGljaWVzTW9kZWwuZ2V0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuaXNvbGF0aW9uUG9saWNpZXMgPSBfLmZpbHRlcihyZXN1bHQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RlbmFudE5hbWUnOiAnZGVmYXVsdCcvL1RPRE86IFJlbW92ZSBoYXJkY29kZWQgdGVuYW50LlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBBZGQgcG9saWN5IHRvIG5ldyBhcHBsaWNhdGlvbiBncm91cFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkSXNvbGF0aW9uUG9saWN5KCkge1xyXG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cFNlcnZpY2UuYWRkSXNvbGF0aW9uUG9saWN5KGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFJlbW92ZSBwb2xpY3kgZnJvbSBuZXcgYXBwbGljYXRpb24gZ3JvdXBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUlzb2xhdGlvblBvbGljeShwb2xpY3lOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3VwU2VydmljZS5yZW1vdmVJc29sYXRpb25Qb2xpY3koYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwsIHBvbGljeU5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVBcHBsaWNhdGlvbkdyb3VwKCkge1xyXG4gICAgICAgICAgICAgICAgLy9mb3JtIGNvbnRyb2xsZXIgaXMgaW5qZWN0ZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGVcclxuICAgICAgICAgICAgICAgIC8vY2hlY2tpbmcgaWYgYWxsIHZhbGlkYXRpb25zIGhhdmUgcGFzc2VkXHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuZm9ybS4kdmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5hcHBsaWNhdGlvbkdyb3VwLm5ldHdvcmtOYW1lID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuc2VsZWN0ZWROZXR3b3JrLm5ldHdvcmtOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsLmFwcGxpY2F0aW9uR3JvdXAua2V5ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5nZW5lcmF0ZUtleShhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5hcHBsaWNhdGlvbkdyb3VwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5jcmVhdGUoYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuYXBwbGljYXRpb25Hcm91cCkudGhlbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub0FwcGxpY2F0aW9uR3JvdXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuYXBwbGljYXRpb25Hcm91cCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBncm91cE5hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcmtOYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBwb2xpY2llczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50TmFtZTogJ2RlZmF1bHQnLy9UT0RPOiBSZW1vdmUgaGFyZGNvZGVkIHRlbmFudC5cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdldE5ldHdvcmtzKCk7XHJcbiAgICAgICAgICAgIGdldElzb2xhdGlvblBvbGljaWVzKCk7XHJcblxyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5jcmVhdGVBcHBsaWNhdGlvbkdyb3VwID0gY3JlYXRlQXBwbGljYXRpb25Hcm91cDtcclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuY2FuY2VsQ3JlYXRpbmcgPSBjYW5jZWxDcmVhdGluZztcclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuYWRkSXNvbGF0aW9uUG9saWN5ID0gYWRkSXNvbGF0aW9uUG9saWN5O1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5yZW1vdmVJc29sYXRpb25Qb2xpY3kgPSByZW1vdmVJc29sYXRpb25Qb2xpY3k7XHJcblxyXG4gICAgICAgICAgICByZXNldEZvcm0oKTtcclxuICAgICAgICB9XSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMTUvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmFwcGxpY2F0aW9uZ3JvdXBzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuYXBwbGljYXRpb25ncm91cHMuZGV0YWlscycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kZXRhaWxzLzprZXknLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0FwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCBhcyBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHBsaWNhdGlvbmdyb3Vwcy9hcHBsaWNhdGlvbmdyb3VwZGV0YWlscy5odG1sJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LmFwcGxpY2F0aW9uZ3JvdXBzLmVkaXQnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvZWRpdC86a2V5JyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwgYXMgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwbGljYXRpb25ncm91cHMvYXBwbGljYXRpb25ncm91cGRldGFpbHMuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9XSlcclxuICAgIC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwnLCBbXHJcbiAgICAgICAgJyRzdGF0ZScsXHJcbiAgICAgICAgJyRzdGF0ZVBhcmFtcycsXHJcbiAgICAgICAgJ0FwcGxpY2F0aW9uR3JvdXBzTW9kZWwnLFxyXG4gICAgICAgICdQb2xpY2llc01vZGVsJyxcclxuICAgICAgICAnUnVsZXNNb2RlbCcsXHJcbiAgICAgICAgJ0FwcGxpY2F0aW9uR3JvdXBTZXJ2aWNlJyxcclxuICAgICAgICAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICRzdGF0ZVBhcmFtcyxcclxuICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbCxcclxuICAgICAgICAgICAgICAgICAgUG9saWNpZXNNb2RlbCxcclxuICAgICAgICAgICAgICAgICAgUnVsZXNNb2RlbCxcclxuICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cFNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwgPSB0aGlzO1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuaXNvbGF0aW9uUG9saWNpZXMgPSBbXTtcclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXAgPSB7fTtcclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLnNlbGVjdGVkTmV0d29yayA9IHt9O1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuc2VsZWN0ZWRQb2xpY3kgPSB7fTtcclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLnNlbGVjdGVkUG9saWNpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vVG8gZGlzcGxheSBpbmNvbWluZyBhbmQgb3V0Z29pbmcgcnVsZXMgZm9yIHNlbGVjdGVkIHBvbGljaWVzXHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5pbmNvbWluZ1J1bGVzID0gW107XHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5vdXRnb2luZ1J1bGVzID0gW107XHJcblxyXG5cclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmlzb2xhdGlvblBvbGljaWVzVmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRvIHNob3cgZWRpdCBvciBkZXRhaWxzIHNjcmVlbiBiYXNlZCBvbiB0aGUgcm91dGVcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldE1vZGUoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHN0YXRlLmlzKCdjb250aXYubWVudS5hcHBsaWNhdGlvbmdyb3Vwcy5lZGl0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwubW9kZSA9ICdlZGl0JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLm1vZGUgPSAnZGV0YWlscyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvQXBwbGljYXRpb25Hcm91cCgpIHtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUuYXBwbGljYXRpb25ncm91cHMubGlzdCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub0FwcGxpY2F0aW9uR3JvdXBEZXRhaWxzKCkge1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5hcHBsaWNhdGlvbmdyb3Vwcy5kZXRhaWxzJywgeydrZXknOiBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuYXBwbGljYXRpb25Hcm91cC5rZXl9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsRWRpdGluZygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblRvQXBwbGljYXRpb25Hcm91cERldGFpbHMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UnVsZXMoKSB7XHJcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuYXBwbGljYXRpb25Hcm91cC5wb2xpY2llcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2xpY3kpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1RvIGRpc3BsYXkgcnVsZXMgb2Ygc2VsZWN0ZWQgcG9saWNpZXNcclxuICAgICAgICAgICAgICAgICAgICBSdWxlc01vZGVsLmdldEluY29taW5nUnVsZXMocG9saWN5LCAnZGVmYXVsdCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChydWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmluY29taW5nUnVsZXMsIHJ1bGVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUnVsZXNNb2RlbC5nZXRPdXRnb2luZ1J1bGVzKHBvbGljeSwgJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocnVsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5vdXRnb2luZ1J1bGVzLCBydWxlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVBcHBsaWNhdGlvbkdyb3VwKCkge1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5kZWxldGUoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXApLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvQXBwbGljYXRpb25Hcm91cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEdldCBwb2xpY2llcyBmb3IgdGhlIGdpdmVuIHRlbmFudC5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldElzb2xhdGlvblBvbGljaWVzKCkge1xyXG4gICAgICAgICAgICAgICAgUG9saWNpZXNNb2RlbC5nZXQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuaXNvbGF0aW9uUG9saWNpZXMgPSBfLmZpbHRlcihyZXN1bHQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RlbmFudE5hbWUnOiAnZGVmYXVsdCcvL1RPRE86IFJlbW92ZSBoYXJkY29kZWQgdGVuYW50LlxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEFkZCBwb2xpY3kgdG8gYXBwbGljYXRpb24gZ3JvdXBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZElzb2xhdGlvblBvbGljeSgpIHtcclxuICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uR3JvdXBTZXJ2aWNlLmFkZElzb2xhdGlvblBvbGljeShhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUmVtb3ZlIHBvbGljeSBmcm9tIGFwcGxpY2F0aW9uIGdyb3VwXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVJc29sYXRpb25Qb2xpY3kocG9saWN5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cFNlcnZpY2UucmVtb3ZlSXNvbGF0aW9uUG9saWN5KGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCwgcG9saWN5TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNhdmVBcHBsaWNhdGlvbkdyb3VwKCkge1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5zYXZlKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5hcHBsaWNhdGlvbkdyb3VwKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9BcHBsaWNhdGlvbkdyb3VwRGV0YWlscygpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwpO1xyXG5cclxuICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5nZXRNb2RlbEJ5S2V5KCRzdGF0ZVBhcmFtcy5rZXkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuYXBwbGljYXRpb25Hcm91cCA9IGdyb3VwO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQXBwbGljYXRpb24gR3JvdXBzIG1pZ2h0IG5vdCBoYXZlIGFueSBwb2xpY2llcyBhc3NvY2lhdGVkIHdpdGggdGhlbSBzbyBkZWZpbmUgYW4gZW1wdHkgYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXAucG9saWNpZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuYXBwbGljYXRpb25Hcm91cC5wb2xpY2llcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBnZXRSdWxlcygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBnZXRJc29sYXRpb25Qb2xpY2llcygpO1xyXG5cclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLnNhdmVBcHBsaWNhdGlvbkdyb3VwID0gc2F2ZUFwcGxpY2F0aW9uR3JvdXA7XHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5jYW5jZWxFZGl0aW5nID0gY2FuY2VsRWRpdGluZztcclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFkZElzb2xhdGlvblBvbGljeSA9IGFkZElzb2xhdGlvblBvbGljeTtcclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLnJlbW92ZUlzb2xhdGlvblBvbGljeSA9IHJlbW92ZUlzb2xhdGlvblBvbGljeTtcclxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmRlbGV0ZUFwcGxpY2F0aW9uR3JvdXAgPSBkZWxldGVBcHBsaWNhdGlvbkdyb3VwO1xyXG5cclxuICAgICAgICAgICAgc2V0TW9kZSgpO1xyXG5cclxuICAgICAgICB9XSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMTEvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmFwcGxpY2F0aW9uZ3JvdXBzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuYXBwbGljYXRpb25ncm91cHMubGlzdCcsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9saXN0JyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBcHBsaWNhdGlvbkdyb3VwTGlzdEN0cmwgYXMgYXBwbGljYXRpb25Hcm91cExpc3RDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwbGljYXRpb25ncm91cHMvYXBwbGljYXRpb25ncm91cGxpc3QuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9XSlcclxuICAgIC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkdyb3VwTGlzdEN0cmwnLFxyXG4gICAgICAgIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ0FwcGxpY2F0aW9uR3JvdXBzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaW50ZXJ2YWwsICRmaWx0ZXIsIEFwcGxpY2F0aW9uR3JvdXBzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXBwbGljYXRpb25Hcm91cExpc3RDdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRBcHBsaWNhdGlvbkdyb3VwcyhyZWxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLmdldChyZWxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYXBwbGljYXRpb25Hcm91cExpc3RDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBMaXN0Q3RybC5ncm91cHMgPSAkZmlsdGVyKCdvcmRlckJ5JykocmVzdWx0LCAnZ3JvdXBOYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBMaXN0Q3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vTG9hZCBmcm9tIGNhY2hlIGZvciBxdWljayBkaXNwbGF5IGluaXRpYWxseVxyXG4gICAgICAgICAgICAgICAgZ2V0QXBwbGljYXRpb25Hcm91cHMoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgLy9Eb24ndCBzdGFydCBhdXRvLXJlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcclxuICAgICAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQocHJvbWlzZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0QXBwbGljYXRpb25Hcm91cHModHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMTYvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmFwcGxpY2F0aW9uZ3JvdXBzJylcclxuICAgIC5mYWN0b3J5KCdBcHBsaWNhdGlvbkdyb3VwU2VydmljZScsIFsnUnVsZXNNb2RlbCcsIGZ1bmN0aW9uIChSdWxlc01vZGVsKSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCBwb2xpY3kgdG8gYXBwbGljYXRpb24gZ3JvdXBcclxuICAgICAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25Hcm91cEN0cmwgQ29udHJvbGxlciBmb3IgYXBwbGljYXRpb24gZ3JvdXAgZWRpdCBvciBjcmVhdGUgb3BlcmF0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkSXNvbGF0aW9uUG9saWN5KGFwcGxpY2F0aW9uR3JvdXBDdHJsKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmZpbmQoYXBwbGljYXRpb25Hcm91cEN0cmwuc2VsZWN0ZWRQb2xpY2llcywgYXBwbGljYXRpb25Hcm91cEN0cmwuc2VsZWN0ZWRQb2xpY3kpID09PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgICAgICAgICAvL1RvIGRpc3BsYXkgc2VsZWN0ZWQgcG9saWNpZXNcclxuICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBDdHJsLnNlbGVjdGVkUG9saWNpZXMucHVzaChhcHBsaWNhdGlvbkdyb3VwQ3RybC5zZWxlY3RlZFBvbGljeSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9UbyBkaXNwbGF5IHJ1bGVzIG9mIHNlbGVjdGVkIHBvbGljaWVzXHJcbiAgICAgICAgICAgICAgICBSdWxlc01vZGVsLmdldEluY29taW5nUnVsZXMoYXBwbGljYXRpb25Hcm91cEN0cmwuc2VsZWN0ZWRQb2xpY3kucG9saWN5TmFtZSwgJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChydWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcHBsaWNhdGlvbkdyb3VwQ3RybC5pbmNvbWluZ1J1bGVzLCBydWxlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBSdWxlc01vZGVsLmdldE91dGdvaW5nUnVsZXMoYXBwbGljYXRpb25Hcm91cEN0cmwuc2VsZWN0ZWRQb2xpY3kucG9saWN5TmFtZSwgJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChydWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcHBsaWNhdGlvbkdyb3VwQ3RybC5vdXRnb2luZ1J1bGVzLCBydWxlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9UbyBiZSBhZGRlZCB0byBhcHBsaWNhdGlvbiBncm91cCBhbmQgc2F2ZWQgdG8gdGhlIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cEN0cmwuYXBwbGljYXRpb25Hcm91cC5wb2xpY2llc1xyXG4gICAgICAgICAgICAgICAgICAgIC5wdXNoKGFwcGxpY2F0aW9uR3JvdXBDdHJsLnNlbGVjdGVkUG9saWN5LnBvbGljeU5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmUgcG9saWN5IGZyb20gYXBwbGljYXRpb24gZ3JvdXBcclxuICAgICAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25Hcm91cEN0cmwgQ29udHJvbGxlciBmb3IgYXBwbGljYXRpb24gZ3JvdXAgZWRpdCBvciBjcmVhdGUgb3BlcmF0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlSXNvbGF0aW9uUG9saWN5KGFwcGxpY2F0aW9uR3JvdXBDdHJsLCBwb2xpY3lOYW1lKSB7XHJcbiAgICAgICAgICAgIF8ucmVtb3ZlKGFwcGxpY2F0aW9uR3JvdXBDdHJsLmFwcGxpY2F0aW9uR3JvdXAucG9saWNpZXMsIGZ1bmN0aW9uIChwb2xpY3kpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwb2xpY3kgPT0gcG9saWN5TmFtZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIF8ucmVtb3ZlKGFwcGxpY2F0aW9uR3JvdXBDdHJsLmluY29taW5nUnVsZXMsIGZ1bmN0aW9uIChydWxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVsZS5wb2xpY3lOYW1lID09IHBvbGljeU5hbWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfLnJlbW92ZShhcHBsaWNhdGlvbkdyb3VwQ3RybC5vdXRnb2luZ1J1bGVzLCBmdW5jdGlvbiAocnVsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGUucG9saWN5TmFtZSA9PSBwb2xpY3lOYW1lO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFkZElzb2xhdGlvblBvbGljeTogYWRkSXNvbGF0aW9uUG9saWN5LFxyXG4gICAgICAgICAgICByZW1vdmVJc29sYXRpb25Qb2xpY3k6IHJlbW92ZUlzb2xhdGlvblBvbGljeVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMTEvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmRhc2hib2FyZCcpXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LmRhc2hib2FyZCcsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kYXNoYm9hcmQnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0Rhc2hib2FyZEN0cmwgYXMgZGFzaGJvYXJkQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Rhc2hib2FyZC9kYXNoYm9hcmQuaHRtbCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XSlcclxuICAgIC5jb250cm9sbGVyKCdEYXNoYm9hcmRDdHJsJyxcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgICckc2NvcGUnLFxyXG4gICAgICAgICAgICAnJGludGVydmFsJyxcclxuICAgICAgICAgICAgJ05vZGVzTW9kZWwnLFxyXG4gICAgICAgICAgICAnTmV0d29ya3NNb2RlbCcsXHJcbiAgICAgICAgICAgICdWb2x1bWVzTW9kZWwnLFxyXG4gICAgICAgICAgICAnQXBwbGljYXRpb25Hcm91cHNNb2RlbCcsXHJcbiAgICAgICAgICAgICdQb2xpY2llc01vZGVsJyxcclxuICAgICAgICAgICAgJ1N0b3JhZ2VQb2xpY2llc01vZGVsJyxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCRzY29wZSxcclxuICAgICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbCxcclxuICAgICAgICAgICAgICAgICAgICAgIE5vZGVzTW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBOZXR3b3Jrc01vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgVm9sdW1lc01vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgIFBvbGljaWVzTW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBTdG9yYWdlUG9saWNpZXNNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhc2hib2FyZEN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldERhc2hib2FyZEluZm8ocmVsb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTm9kZXNNb2RlbC5nZXQocmVsb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLm5vZGVzID0gcmVzdWx0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTmV0d29ya3NNb2RlbC5nZXQocmVsb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLm5ldHdvcmtzID0gcmVzdWx0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgVm9sdW1lc01vZGVsLmdldChyZWxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hib2FyZEN0cmwudm9sdW1lcyA9IHJlc3VsdC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uR3JvdXBzTW9kZWwuZ2V0KHJlbG9hZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC5ncm91cHMgPSByZXN1bHQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBQb2xpY2llc01vZGVsLmdldChyZWxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hib2FyZEN0cmwubmV0d29ya3BvbGljaWVzID0gcmVzdWx0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgU3RvcmFnZVBvbGljaWVzTW9kZWwuZ2V0KHJlbG9hZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC5zdG9yYWdlcG9saWNpZXMgPSByZXN1bHQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL1dpbGwgZGlzcGxheSAwIGlmIHRoZXJlIGlzIGVycm9yIGZldGNoaW5nIGRhdGFcclxuICAgICAgICAgICAgICAgIGRhc2hib2FyZEN0cmwubm9kZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC5uZXR3b3JrcyA9IDA7XHJcbiAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLnZvbHVtZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC5ncm91cHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC5uZXR3b3JrcG9saWNpZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC5zdG9yYWdlcG9saWNpZXMgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vTG9hZCBmcm9tIGNhY2hlIGZvciBxdWljayBkaXNwbGF5IGluaXRpYWxseVxyXG4gICAgICAgICAgICAgICAgZ2V0RGFzaGJvYXJkSW5mbyhmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldERhc2hib2FyZEluZm8odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTkvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmxvZ2luJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2LmxvZ2luJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnLycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2xvZ2luL2xvZ2luLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCBhcyBsb2dpbkN0cmwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignTG9naW5DdHJsJywgWyckc3RhdGUnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBsb2dpbkN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9EYXNoYm9hcmQoKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LmRhc2hib2FyZCcsIHt1c2VybmFtZTogbG9naW5DdHJsLnVzZXJuYW1lfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvZ2luKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVG9EYXNoYm9hcmQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihsb2dpbkN0cmwpO1xyXG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IobG9naW5DdHJsKTtcclxuICAgICAgICAgICAgbG9naW5DdHJsLmxvZ2luID0gbG9naW47XHJcblxyXG4gICAgICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xOS8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubWVudScpXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL20nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtZW51L21lbnUuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTWVudUN0cmwgYXMgbWVudUN0cmwnLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7dXNlcm5hbWU6IG51bGx9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignTWVudUN0cmwnLCBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgICAgICB2YXIgbWVudUN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2LmxvZ2luJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZW51Q3RybC51c2VybmFtZSA9ICRzdGF0ZVBhcmFtcy51c2VybmFtZTtcclxuICAgICAgICBtZW51Q3RybC5sb2dvdXQgPSBsb2dvdXQ7XHJcblxyXG4gICAgfV0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiAyLzE5LzE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5uZXR3b3JrcycpXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5ldHdvcmtzLmNyZWF0ZScsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jcmVhdGUnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICduZXR3b3Jrcy9uZXR3b3JrY3JlYXRlLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05ldHdvcmtDcmVhdGVDdHJsIGFzIG5ldHdvcmtDcmVhdGVDdHJsJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH1dKVxyXG4gICAgLmNvbnRyb2xsZXIoJ05ldHdvcmtDcmVhdGVDdHJsJywgWyckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJ05ldHdvcmtzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgTmV0d29ya3NNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdmFyIG5ldHdvcmtDcmVhdGVDdHJsID0gdGhpcztcclxuICAgICAgICAgICAgbmV0d29ya0NyZWF0ZUN0cmwuY2lkclBhdHRlcm4gPSBDb250aXZHbG9iYWxzLkNJRFJfUkVHRVg7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub05ldHdvcmtzKCkge1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5uZXR3b3Jrcy5saXN0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbENyZWF0aW5nKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVG9OZXR3b3JrcygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVOZXR3b3JrKCkge1xyXG4gICAgICAgICAgICAgICAgLy9mb3JtIGNvbnRyb2xsZXIgaXMgaW5qZWN0ZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGVcclxuICAgICAgICAgICAgICAgIC8vY2hlY2tpbmcgaWYgYWxsIHZhbGlkYXRpb25zIGhhdmUgcGFzc2VkXHJcbiAgICAgICAgICAgICAgICBpZiAobmV0d29ya0NyZWF0ZUN0cmwuZm9ybS4kdmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IobmV0d29ya0NyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKG5ldHdvcmtDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXR3b3JrQ3JlYXRlQ3RybC5uZXdOZXR3b3JrLmtleSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtDcmVhdGVDdHJsLm5ld05ldHdvcmsudGVuYW50TmFtZSArICc6JyArIG5ldHdvcmtDcmVhdGVDdHJsLm5ld05ldHdvcmsubmV0d29ya05hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgTmV0d29ya3NNb2RlbC5jcmVhdGUobmV0d29ya0NyZWF0ZUN0cmwubmV3TmV0d29yaykudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya0NyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub05ldHdvcmtzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihuZXR3b3JrQ3JlYXRlQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihuZXR3b3JrQ3JlYXRlQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya0NyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG5ldHdvcmtDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgIG5ldHdvcmtDcmVhdGVDdHJsLm5ld05ldHdvcmsgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya05hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuY2FwOiAndnhsYW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ym5ldDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50TmFtZTogJ2RlZmF1bHQnLy9UT0RPOiBSZW1vdmUgaGFyZGNvZGVkIHRlbmFudC5cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldHdvcmtDcmVhdGVDdHJsLmNyZWF0ZU5ldHdvcmsgPSBjcmVhdGVOZXR3b3JrO1xyXG4gICAgICAgICAgICBuZXR3b3JrQ3JlYXRlQ3RybC5jYW5jZWxDcmVhdGluZyA9IGNhbmNlbENyZWF0aW5nO1xyXG5cclxuICAgICAgICAgICAgcmVzZXRGb3JtKCk7XHJcbiAgICAgICAgfV0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2Lm5ldHdvcmtzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3MuZGV0YWlscycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kZXRhaWxzLzprZXknLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05ldHdvcmtEZXRhaWxzQ3RybCBhcyBuZXR3b3JrRGV0YWlsc0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICduZXR3b3Jrcy9uZXR3b3JrZGV0YWlscy5odG1sJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1dKVxyXG4gICAgLmNvbnRyb2xsZXIoJ05ldHdvcmtEZXRhaWxzQ3RybCcsXHJcbiAgICAgICAgWyckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJyRzY29wZScsICckaW50ZXJ2YWwnLCAnJGZpbHRlcicsICdOZXR3b3Jrc01vZGVsJywgJ0FwcGxpY2F0aW9uR3JvdXBzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRzY29wZSwgJGludGVydmFsLCAkZmlsdGVyLCBOZXR3b3Jrc01vZGVsLCBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ldHdvcmtEZXRhaWxzQ3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9OZXR3b3JrcygpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51Lm5ldHdvcmtzLmxpc3QnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVOZXR3b3JrKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihuZXR3b3JrRGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKG5ldHdvcmtEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTmV0d29ya3NNb2RlbC5kZWxldGUobmV0d29ya0RldGFpbHNDdHJsLm5ldHdvcmspLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5ldHdvcmtEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvTmV0d29ya3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5ldHdvcmtEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihuZXR3b3JrRGV0YWlsc0N0cmwsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiBHZXQgYXBwbGljYXRpb24gZ3JvdXBzIGJlbG9uZ2luZyB0byBhIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QXBwbGljYXRpb25Hcm91cHMocmVsb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5nZXQocmVsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya0RldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXBzID0gJGZpbHRlcignb3JkZXJCeScpKF8uZmlsdGVyKHJlc3VsdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25ldHdvcmtOYW1lJzogbmV0d29ya0RldGFpbHNDdHJsLm5ldHdvcmsubmV0d29ya05hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksICdncm91cE5hbWUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5ldHdvcmtEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IobmV0d29ya0RldGFpbHNDdHJsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBOZXR3b3Jrc01vZGVsLmdldE1vZGVsQnlLZXkoJHN0YXRlUGFyYW1zLmtleSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobmV0d29yaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrRGV0YWlsc0N0cmwubmV0d29yayA9IG5ldHdvcms7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEFwcGxpY2F0aW9uR3JvdXBzKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBuZXR3b3JrRGV0YWlsc0N0cmwuZGVsZXRlTmV0d29yayA9IGRlbGV0ZU5ldHdvcms7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2U7XHJcbiAgICAgICAgICAgICAgICAvL0Rvbid0IGRvIGF1dG9yZWZyZXNoIGlmIG9uZSBpcyBhbHJlYWR5IGluIHByb2dyZXNzXHJcbiAgICAgICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKHByb21pc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEFwcGxpY2F0aW9uR3JvdXBzKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIENvbnRpdkdsb2JhbHMuUkVGUkVTSF9JTlRFUlZBTCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9zdG9wIHBvbGxpbmcgd2hlbiB1c2VyIG1vdmVzIGF3YXkgZnJvbSB0aGUgcGFnZVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChwcm9taXNlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdjb250aXYubmV0d29ya3MnKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3Jrcy5saXN0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2xpc3QnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05ldHdvcmtzTGlzdEN0cmwgYXMgbmV0d29ya3NMaXN0Q3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25ldHdvcmtzL25ldHdvcmtsaXN0Lmh0bWwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignTmV0d29ya3NMaXN0Q3RybCcsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ05ldHdvcmtzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRpbnRlcnZhbCwgJGZpbHRlciwgTmV0d29ya3NNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdmFyIG5ldHdvcmtzTGlzdEN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TmV0d29ya3MocmVsb2FkKSB7XHJcbiAgICAgICAgICAgICAgICBOZXR3b3Jrc01vZGVsLmdldChyZWxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihuZXR3b3Jrc0xpc3RDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtzTGlzdEN0cmwubmV0d29ya3MgPSAkZmlsdGVyKCdvcmRlckJ5JykocmVzdWx0LCAnbmV0d29ya05hbWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya3NMaXN0Q3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL0xvYWQgZnJvbSBjYWNoZSBmb3IgcXVpY2sgZGlzcGxheSBpbml0aWFsbHlcclxuICAgICAgICAgICAgZ2V0TmV0d29ya3MoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb21pc2U7XHJcbiAgICAgICAgICAgIC8vRG9uJ3QgZG8gYXV0b3JlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcclxuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0TmV0d29ya3ModHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChwcm9taXNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfV0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy8xMC8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubmV0d29ya3BvbGljaWVzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5jcmVhdGUnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY3JlYXRlJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdJc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsIGFzIGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICduZXR3b3JrX3BvbGljaWVzL2lzb2xhdGlvbnBvbGljeWNyZWF0ZS5odG1sJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH1dKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0lzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwnLCBbJyRzdGF0ZScsICdQb2xpY2llc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCBQb2xpY2llc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xyXG4gICAgICAgIHZhciBpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9Qb2xpY2llcygpIHtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMuaXNvbGF0aW9uLmxpc3QnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNhbmNlbENyZWF0aW5nKCkge1xyXG4gICAgICAgICAgICByZXR1cm5Ub1BvbGljaWVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVQb2xpY3koKSB7XHJcbiAgICAgICAgICAgIGlmIChpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsLmZvcm0uJHZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwubmV3UG9saWN5LmtleSA9XHJcbiAgICAgICAgICAgICAgICAgICAgUG9saWNpZXNNb2RlbC5nZW5lcmF0ZUtleShpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsLm5ld1BvbGljeSk7XHJcbiAgICAgICAgICAgICAgICBQb2xpY2llc01vZGVsLmNyZWF0ZShpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsLm5ld1BvbGljeSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub1BvbGljaWVzKCk7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xyXG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybCk7XHJcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwubmV3UG9saWN5ID0ge1xyXG4gICAgICAgICAgICAgICAgcG9saWN5TmFtZTogJycsXHJcbiAgICAgICAgICAgICAgICB0ZW5hbnROYW1lOiAnZGVmYXVsdCcvL1RPRE86IFJlbW92ZSBoYXJkY29kZWQgdGVuYW50LlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybC5jcmVhdGVQb2xpY3kgPSBjcmVhdGVQb2xpY3k7XHJcbiAgICAgICAgaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybC5jYW5jZWxDcmVhdGluZyA9IGNhbmNlbENyZWF0aW5nO1xyXG5cclxuICAgICAgICByZXNldEZvcm0oKTtcclxuICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvOC8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubmV0d29ya3BvbGljaWVzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5kZXRhaWxzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMvOmtleScsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnSXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwgYXMgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICduZXR3b3JrX3BvbGljaWVzL2lzb2xhdGlvbnBvbGljeWRldGFpbHMuaHRtbCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XSlcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5lZGl0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2VkaXQvOmtleScsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnSXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwgYXMgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICduZXR3b3JrX3BvbGljaWVzL2lzb2xhdGlvbnBvbGljeWRldGFpbHMuaHRtbCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XSlcclxuICAgIC5jb250cm9sbGVyKCdJc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCcsIFtcclxuICAgICAgICAnJHN0YXRlJyxcclxuICAgICAgICAnJHN0YXRlUGFyYW1zJyxcclxuICAgICAgICAnUG9saWNpZXNNb2RlbCcsXHJcbiAgICAgICAgJ1J1bGVzTW9kZWwnLFxyXG4gICAgICAgICdOZXR3b3Jrc01vZGVsJyxcclxuICAgICAgICAnQXBwbGljYXRpb25Hcm91cHNNb2RlbCcsXHJcbiAgICAgICAgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFBvbGljaWVzTW9kZWwsIFJ1bGVzTW9kZWwsIE5ldHdvcmtzTW9kZWwsIEFwcGxpY2F0aW9uR3JvdXBzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ldHdvcmtzID0gW107XHJcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXBzID0gW107XHJcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVPdXRnb2luZ05ldHdvcmtTZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZUluY29taW5nTmV0d29ya1NlbGVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kaXNhYmxlT3V0Z29pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVJbmNvbWluZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3SW5jb21pbmdTZWxlY3RlZEFwcGxpY2F0aW9uR3JvdXAgPSAnJztcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdTZWxlY3RlZEFwcGxpY2F0aW9uR3JvdXAgPSAnJztcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvUG9saWNpZXMoKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51Lm5ldHdvcmtwb2xpY2llcy5pc29sYXRpb24ubGlzdCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub1BvbGljeURldGFpbHMoKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51Lm5ldHdvcmtwb2xpY2llcy5pc29sYXRpb24uZGV0YWlscycsIHtrZXk6IGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLnBvbGljeS5rZXl9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsRWRpdGluZygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblRvUG9saWN5RGV0YWlscygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogR28gYmFjayB0byBwb2xpY3kgZGV0YWlscyBhZnRlciBkb25lIGVkaXRpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvbmVFZGl0aW5nKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVG9Qb2xpY3lEZXRhaWxzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVBvbGljeSgpIHtcclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBQb2xpY2llc01vZGVsLmRlbGV0ZShpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblRvUG9saWNpZXMoKTtcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBUbyBzaG93IGVkaXQgb3IgZGV0YWlscyBzY3JlZW4gYmFzZWQgb24gdGhlIHJvdXRlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRNb2RlKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzdGF0ZS5pcygnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5lZGl0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5tb2RlID0gJ2VkaXQnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5tb2RlID0gJ2RldGFpbHMnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNldE5ld0luY29taW5nUnVsZSgpIHtcclxuICAgICAgICAgICAgICAgIC8vUnVsZSBvYmplY3QgdG8gYmUgY3JlYXRlZCBvbiBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBydWxlSWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2FsbG93JywvL3RvIG1ha2UgaXQgZGVmYXVsdCBzZWxlY3RlZCBvcHRpb24gaW4gVUlcclxuICAgICAgICAgICAgICAgICAgICBmcm9tRW5kcG9pbnRHcm91cDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbU5ldHdvcms6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb21JUEFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sOiAndGNwJywvL3RvIG1ha2UgaXQgZGVmYXVsdCBzZWxlY3RlZCBvcHRpb24gaW4gVUlcclxuICAgICAgICAgICAgICAgICAgICBwb3J0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50TmFtZTogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvbGljeU5hbWU6IGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLnBvbGljeS5wb2xpY3lOYW1lXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3SW5jb21pbmdTZWxlY3RlZEFwcGxpY2F0aW9uR3JvdXAgPSAnJztcclxuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVJbmNvbWluZ05ldHdvcmtTZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVJbmNvbWluZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXROZXdPdXRnb2luZ1J1bGUoKSB7XHJcbiAgICAgICAgICAgICAgICAvL1J1bGUgb2JqZWN0IHRvIGJlIGNyZWF0ZWQgb24gc2VydmVyXHJcbiAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdPdXRnb2luZ1J1bGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcnVsZUlkOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTogMSxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdhbGxvdycsLy90byBtYWtlIGl0IGRlZmF1bHQgc2VsZWN0ZWQgb3B0aW9uIGluIFVJXHJcbiAgICAgICAgICAgICAgICAgICAgdG9FbmRwb2ludEdyb3VwOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0b05ldHdvcms6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvSVBBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBwcm90b2NvbDogJ3RjcCcsLy90byBtYWtlIGl0IGRlZmF1bHQgc2VsZWN0ZWQgb3B0aW9uIGluIFVJXHJcbiAgICAgICAgICAgICAgICAgICAgcG9ydDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiAnb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW5hbnROYW1lOiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9saWN5TmFtZTogaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwucG9saWN5LnBvbGljeU5hbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdPdXRnb2luZ1NlbGVjdGVkQXBwbGljYXRpb25Hcm91cCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZU91dGdvaW5nTmV0d29ya1NlbGVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZU91dGdvaW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogR2V0IG5ldHdvcmsgbmFtZXMgZm9yIHRoZSBnaXZlbiB0ZW5hbnQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXROZXR3b3JrcygpIHtcclxuICAgICAgICAgICAgICAgIE5ldHdvcmtzTW9kZWwuZ2V0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9fLmZpbHRlcigpIHJldHVybnMgYSBuZXcgYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXR3b3JrcyA9IF8uZmlsdGVyKHJlc3VsdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndGVuYW50TmFtZSc6ICdkZWZhdWx0Jy8vVE9ETzogUmVtb3ZlIGhhcmRjb2RlZCB0ZW5hbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEdldCBhcHBsaWNhdGlvbiBncm91cCBuYW1lcyBmb3IgdGhlIGdpdmVuIHRlbmFudC5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEFwcGxpY2F0aW9uR3JvdXBzKCkge1xyXG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5nZXQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9fLmZpbHRlcigpIHJldHVybnMgYSBuZXcgYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuYXBwbGljYXRpb25Hcm91cHMgPSBfLmZpbHRlcihyZXN1bHQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0ZW5hbnROYW1lJzogJ2RlZmF1bHQnLy9UT0RPOiBSZW1vdmUgaGFyZGNvZGVkIHRlbmFudC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyIHRvIGRpc2FibGUgbmV0d29yayBzZWxlY3Rpb24gYm94IG9uY2UgYXBwbGljYXRpb24gZ3JvdXAgaXMgc2VsZWN0ZWQgd2hpbGUgY3JlYXRpbmcgYSBuZXdcclxuICAgICAgICAgICAgICogcnVsZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uQ2hhbmdlT3V0Z29pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld091dGdvaW5nU2VsZWN0ZWRBcHBsaWNhdGlvbkdyb3VwICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0lmIGFwcGxpY2F0aW9uIGdyb3VwIGhhcyBiZWVuIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdSdWxlLnRvRW5kcG9pbnRHcm91cCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld091dGdvaW5nU2VsZWN0ZWRBcHBsaWNhdGlvbkdyb3VwLmdyb3VwTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdPdXRnb2luZ1J1bGUudG9OZXR3b3JrID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZU91dGdvaW5nTmV0d29ya1NlbGVjdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vV2hlbiAnbm9uZScgaXMgc2VsZWN0ZWRcclxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdPdXRnb2luZ1J1bGUudG9FbmRwb2ludEdyb3VwID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZU91dGdvaW5nTmV0d29ya1NlbGVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlciB0byBkaXNhYmxlIG5ldHdvcmsgc2VsZWN0aW9uIGJveCBvbmNlIGFwcGxpY2F0aW9uIGdyb3VwIGlzIHNlbGVjdGVkIHdoaWxlIGNyZWF0aW5nIGEgbmV3XHJcbiAgICAgICAgICAgICAqIHJ1bGUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkNoYW5nZUluY29taW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdJbmNvbWluZ1NlbGVjdGVkQXBwbGljYXRpb25Hcm91cCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9JZiBhcHBsaWNhdGlvbiBncm91cCBoYXMgYmVlbiBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZS5mcm9tRW5kcG9pbnRHcm91cCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nU2VsZWN0ZWRBcHBsaWNhdGlvbkdyb3VwLmdyb3VwTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdJbmNvbWluZ1J1bGUuZnJvbU5ldHdvcmsgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kaXNhYmxlSW5jb21pbmdOZXR3b3JrU2VsZWN0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9XaGVuICdub25lJyBpcyBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZS5mcm9tRW5kcG9pbnRHcm91cCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVJbmNvbWluZ05ldHdvcmtTZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyIHRvIGRpc2FibGUgYXBwbGljYXRpb24gZ3JvdXAgc2VsZWN0aW9uIGJveCBvbmNlIG5ldHdvcmsgaXMgc2VsZWN0ZWQgd2hpbGUgY3JlYXRpbmcgYSBuZXdcclxuICAgICAgICAgICAgICogcnVsZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uQ2hhbmdlT3V0Z29pbmdOZXR3b3JrU2VsZWN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld091dGdvaW5nUnVsZS50b05ldHdvcmsgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vSWYgbmV0d29yayBoYXMgYmVlbiBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld091dGdvaW5nUnVsZS5Ub0VuZHBvaW50R3JvdXAgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kaXNhYmxlT3V0Z29pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZU91dGdvaW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlciB0byBkaXNhYmxlIGFwcGxpY2F0aW9uIGdyb3VwIHNlbGVjdGlvbiBib3ggb25jZSBuZXR3b3JrIGlzIHNlbGVjdGVkIHdoaWxlIGNyZWF0aW5nIGEgbmV3XHJcbiAgICAgICAgICAgICAqIHJ1bGUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkNoYW5nZUluY29taW5nTmV0d29ya1NlbGVjdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdJbmNvbWluZ1J1bGUuZnJvbU5ldHdvcmsgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vSWYgbmV0d29yayBoYXMgYmVlbiBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZS5mcm9tRW5kcG9pbnRHcm91cCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVJbmNvbWluZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kaXNhYmxlSW5jb21pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEdlbmVyYXRlcyBydWxlIGlkXHJcbiAgICAgICAgICAgICAqIFRPRE8gTWFrZSBpdCBjcnlwdG9ncmFwaGljYWxseSBzdHJvbmdlciBvbmNlIHdlIGhhdmUgbXVsdGlwbGUgdXNlcnMgdXBkYXRpbmcgc2FtZSBwb2xpY3lcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlUnVsZUlkKHJ1bGUpIHtcclxuICAgICAgICAgICAgICAgIHJ1bGUucnVsZUlkID1cclxuICAgICAgICAgICAgICAgICAgICAoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuaW5jb21pbmdSdWxlcy5sZW5ndGggKyBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5vdXRnb2luZ1J1bGVzLmxlbmd0aCArIDEpLnRvU3RyaW5nKCkgKyAnLScgK1xyXG4gICAgICAgICAgICAgICAgICAgIERhdGUubm93KCkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFJ1bGUgaXMgc2F2ZWQgdG8gc2VydmVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRJbmNvbWluZ1J1bGUoKSB7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVSdWxlSWQoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3SW5jb21pbmdSdWxlKTtcclxuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZS5rZXkgPSBSdWxlc01vZGVsLmdlbmVyYXRlS2V5KGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZSk7XHJcbiAgICAgICAgICAgICAgICBSdWxlc01vZGVsLmNyZWF0ZShpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdJbmNvbWluZ1J1bGUpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmluY29taW5nUnVsZXMucHVzaChyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0TmV3SW5jb21pbmdSdWxlKCk7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogUnVsZSBpcyBzYXZlZCB0byBzZXJ2ZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZE91dGdvaW5nUnVsZSgpIHtcclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZVJ1bGVJZChpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdPdXRnb2luZ1J1bGUpO1xyXG4gICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdSdWxlLmtleSA9IFJ1bGVzTW9kZWwuZ2VuZXJhdGVLZXkoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdSdWxlKTtcclxuICAgICAgICAgICAgICAgIFJ1bGVzTW9kZWwuY3JlYXRlKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld091dGdvaW5nUnVsZSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwub3V0Z29pbmdSdWxlcy5wdXNoKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXROZXdPdXRnb2luZ1J1bGUoKTtcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZWxldGUgaW5jb21pbmcgcnVsZSBmcm9tIHNlcnZlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gZGVsZXRlSW5jb21pbmdSdWxlKGtleSkge1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgIFJ1bGVzTW9kZWwuZGVsZXRlVXNpbmdLZXkoa2V5KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnJlbW92ZShpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5pbmNvbWluZ1J1bGVzLCBmdW5jdGlvbiAobikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5rZXkgPT0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3IoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlbGV0ZSBvdXRnb2luZyBydWxlIGZyb20gc2VydmVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVPdXRnb2luZ1J1bGUoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgUnVsZXNNb2RlbC5kZWxldGVVc2luZ0tleShrZXkpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8ucmVtb3ZlKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm91dGdvaW5nUnVsZXMsIGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmtleSA9PSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcclxuXHJcbiAgICAgICAgICAgIFBvbGljaWVzTW9kZWwuZ2V0TW9kZWxCeUtleSgkc3RhdGVQYXJhbXMua2V5KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBvbGljeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLnBvbGljeSA9IHBvbGljeTtcclxuICAgICAgICAgICAgICAgICAgICBSdWxlc01vZGVsLmdldEluY29taW5nUnVsZXMocG9saWN5LnBvbGljeU5hbWUsICdkZWZhdWx0JykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmluY29taW5nUnVsZXMgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0TmV3SW5jb21pbmdSdWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUnVsZXNNb2RlbC5nZXRPdXRnb2luZ1J1bGVzKHBvbGljeS5wb2xpY3lOYW1lLCAnZGVmYXVsdCcpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5vdXRnb2luZ1J1bGVzID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldE5ld091dGdvaW5nUnVsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBnZXROZXR3b3JrcygpO1xyXG4gICAgICAgICAgICBnZXRBcHBsaWNhdGlvbkdyb3VwcygpO1xyXG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kZWxldGVQb2xpY3kgPSBkZWxldGVQb2xpY3k7XHJcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRlbGV0ZUluY29taW5nUnVsZSA9IGRlbGV0ZUluY29taW5nUnVsZTtcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGVsZXRlT3V0Z29pbmdSdWxlID0gZGVsZXRlT3V0Z29pbmdSdWxlO1xyXG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5hZGRJbmNvbWluZ1J1bGUgPSBhZGRJbmNvbWluZ1J1bGU7XHJcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmFkZE91dGdvaW5nUnVsZSA9IGFkZE91dGdvaW5nUnVsZTtcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZG9uZUVkaXRpbmcgPSBkb25lRWRpdGluZztcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuY2FuY2VsRWRpdGluZyA9IGNhbmNlbEVkaXRpbmc7XHJcbiAgICAgICAgICAgIC8vRXZlbnQgSGFuZGxlcnNcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwub25DaGFuZ2VPdXRnb2luZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24gPSBvbkNoYW5nZU91dGdvaW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbjtcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwub25DaGFuZ2VJbmNvbWluZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24gPSBvbkNoYW5nZUluY29taW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbjtcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwub25DaGFuZ2VPdXRnb2luZ05ldHdvcmtTZWxlY3Rpb24gPSBvbkNoYW5nZU91dGdvaW5nTmV0d29ya1NlbGVjdGlvbjtcclxuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwub25DaGFuZ2VJbmNvbWluZ05ldHdvcmtTZWxlY3Rpb24gPSBvbkNoYW5nZUluY29taW5nTmV0d29ya1NlbGVjdGlvbjtcclxuXHJcbiAgICAgICAgICAgIHNldE1vZGUoKTtcclxuXHJcbiAgICAgICAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKCdjb250aXYubmV0d29ya3BvbGljaWVzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5saXN0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2xpc3QnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0lzb2xhdGlvblBvbGljeUxpc3RDdHJsIGFzIGlzb2xhdGlvblBvbGljeUxpc3RDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbmV0d29ya19wb2xpY2llcy9pc29sYXRpb25wb2xpY3lsaXN0Lmh0bWwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignSXNvbGF0aW9uUG9saWN5TGlzdEN0cmwnLCBbJyRzY29wZScsICckaW50ZXJ2YWwnLCAnJGZpbHRlcicsICdQb2xpY2llc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaW50ZXJ2YWwsICRmaWx0ZXIsIFBvbGljaWVzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2xpY2llc0xpc3RDdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFBvbGljaWVzKHJlbG9hZCkge1xyXG4gICAgICAgICAgICAgICAgUG9saWNpZXNNb2RlbC5nZXQocmVsb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihwb2xpY2llc0xpc3RDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWNpZXNMaXN0Q3RybC5wb2xpY2llcyA9ICRmaWx0ZXIoJ29yZGVyQnknKShyZXN1bHQsICdwb2xpY3lOYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihwb2xpY2llc0xpc3RDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9Mb2FkIGZyb20gY2FjaGUgZm9yIHF1aWNrIGRpc3BsYXkgaW5pdGlhbGx5XHJcbiAgICAgICAgICAgIGdldFBvbGljaWVzKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlO1xyXG4gICAgICAgICAgICAvL0Rvbid0IHN0YXJ0IGF1dG8tcmVmcmVzaCBpZiBvbmUgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xyXG4gICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKHByb21pc2UpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXRQb2xpY2llcyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0sIENvbnRpdkdsb2JhbHMuUkVGUkVTSF9JTlRFUlZBTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9zdG9wIHBvbGxpbmcgd2hlbiB1c2VyIG1vdmVzIGF3YXkgZnJvbSB0aGUgcGFnZVxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvOS8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubmV0d29ya3BvbGljaWVzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL25ldHdvcmtwb2xpY2llcycsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTmV0d29ya1BvbGljaWVzVGFic0N0cmwgYXMgbmV0d29ya1BvbGljaWVzVGFic0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICduZXR3b3JrX3BvbGljaWVzL25ldHdvcmtwb2xpY2llc3RhYnMuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMuaXNvbGF0aW9uJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2lzb2xhdGlvbicsXHJcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPHVpLXZpZXcvPidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMucHJpb3JpdGl6YXRpb24nLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcHJpb3JpdGl6YXRpb24nLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05ldHdvcmtQb2xpY2llc1RhYnNDdHJsIGFzIG5ldHdvcmtQb2xpY2llc1RhYnNDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbmV0d29ya19wb2xpY2llcy9wcmlvcml0aXphdGlvbnBvbGljeWxpc3QuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMuYmFuZHdpZHRoJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2JhbmR3aWR0aCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTmV0d29ya1BvbGljaWVzVGFic0N0cmwgYXMgbmV0d29ya1BvbGljaWVzVGFic0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICduZXR3b3JrX3BvbGljaWVzL2JhbmR3aWR0aHBvbGljeWxpc3QuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMucmVkaXJlY3Rpb24nLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcmVkaXJlY3Rpb24nLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05ldHdvcmtQb2xpY2llc1RhYnNDdHJsIGFzIG5ldHdvcmtQb2xpY2llc1RhYnNDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbmV0d29ya19wb2xpY2llcy9yZWRpcmVjdGlvbnBvbGljeWxpc3QuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9XSlcclxuICAgIC5jb250cm9sbGVyKCdOZXR3b3JrUG9saWNpZXNUYWJzQ3RybCcsIFsnJHN0YXRlJywgZnVuY3Rpb24gKCRzdGF0ZSkge1xyXG4gICAgfV0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy8yNS8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubm9kZXMnKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5ub2Rlcy5jb21taXNzaW9uJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvbW1pc3Npb24vOmtleScsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTm9kZUNvbW1pc3Npb25DdHJsIGFzIG5vZGVDb21taXNzaW9uQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25vZGVzL25vZGVjb21taXNzaW9uLmh0bWwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubm9kZXMuZGlzY292ZXInLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvZGlzY292ZXInLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05vZGVDb21taXNzaW9uQ3RybCBhcyBub2RlQ29tbWlzc2lvbkN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdub2Rlcy9ub2RlY29tbWlzc2lvbi5odG1sJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH1dKVxyXG4gICAgLmNvbnRyb2xsZXIoJ05vZGVDb21taXNzaW9uQ3RybCcsIFtcclxuICAgICAgICAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdOb2Rlc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIE5vZGVzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlQ29tbWlzc2lvbkN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRvIHNob3cgY29tbWlzc2lvbiBvciBkaXNjb3ZlciBzY3JlZW4gYmFzZWQgb24gdGhlIHJvdXRlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRNb2RlKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzdGF0ZS5pcygnY29udGl2Lm1lbnUubm9kZXMuY29tbWlzc2lvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLm1vZGUgPSAnY29tbWlzc2lvbic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVDb21taXNzaW9uQ3RybC5tb2RlID0gJ2Rpc2NvdmVyJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9Ob2RlRGV0YWlscygpIHtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUubm9kZXMuZGV0YWlscy5pbmZvJywgeydrZXknOiAkc3RhdGVQYXJhbXMua2V5fSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvTm9kZXMoKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51Lm5vZGVzLmxpc3QnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsQ29tbWlzc2lvbmluZ05vZGUoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5Ub05vZGVEZXRhaWxzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbERpc2NvdmVyaW5nTm9kZSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblRvTm9kZXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlRXh0cmFWYXJzKCkge1xyXG4gICAgICAgICAgICAgICAgLy9BZGQgYW5zaWJsZSB2YXJpYWJsZXMgdG8gZXh0cmFfdmFyc1xyXG4gICAgICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLmFuc2libGVWYXJpYWJsZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVDb21taXNzaW9uQ3RybC5leHRyYV92YXJzW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vQWRkIGVudmlyb25tZW50IHZhcmlhYmxlcyB0byBleHRyYV92YXJzXHJcbiAgICAgICAgICAgICAgICB2YXIgZW52VmFycyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLmVudlZhcmlhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW52VmFyc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLmV4dHJhX3ZhcnNbJ2VudiddID0gZW52VmFycztcclxuICAgICAgICAgICAgICAgIG5vZGVDb21taXNzaW9uQ3RybC5ub2RlT3BzT2JqLmV4dHJhX3ZhcnMgPSBKU09OLnN0cmluZ2lmeShub2RlQ29tbWlzc2lvbkN0cmwuZXh0cmFfdmFycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbW1pc3Npb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZUNvbW1pc3Npb25DdHJsLmZvcm0uJHZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG5vZGVDb21taXNzaW9uQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIobm9kZUNvbW1pc3Npb25DdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICBub2RlQ29tbWlzc2lvbkN0cmwubm9kZU9wc09iai5ub2RlcyA9IFskc3RhdGVQYXJhbXMua2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwRXh0cmFWYXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRXh0cmFWYXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTm9kZXNNb2RlbC5jb21taXNzaW9uKG5vZGVDb21taXNzaW9uQ3RybC5ub2RlT3BzT2JqKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihub2RlQ29tbWlzc2lvbkN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub05vZGVEZXRhaWxzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihub2RlQ29tbWlzc2lvbkN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Iobm9kZUNvbW1pc3Npb25DdHJsLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkaXNjb3ZlcigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlQ29tbWlzc2lvbkN0cmwuZm9ybS4kdmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3Iobm9kZUNvbW1pc3Npb25DdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihub2RlQ29tbWlzc2lvbkN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUlQQWRkckFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRXh0cmFWYXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTm9kZXNNb2RlbC5kaXNjb3Zlcihub2RlQ29tbWlzc2lvbkN0cmwubm9kZU9wc09iaikudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobm9kZUNvbW1pc3Npb25DdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9Ob2RlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobm9kZUNvbW1pc3Npb25DdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKG5vZGVDb21taXNzaW9uQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENsZWFudXAgYW5zaWJsZSB2YXJpYWJsZXMgZm9yIG5ldHdvcmsgbW9kZSBhbmQgc2NoZWR1bGVyLiBuZy1pZiByZW1vdmVzIGl0IGZyb20gdGhlIHZpZXcgKERPTSkgYnV0IG5vdCBmcm9tXHJcbiAgICAgICAgICAgICAqIHRoZSBtb2RlbC5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFudXBFeHRyYVZhcnMoKSB7XHJcbiAgICAgICAgICAgICAgICAvL0NsZWFudXAgZm9yIG5ldHdvcmsgbW9kZVxyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVDb21taXNzaW9uQ3RybC5leHRyYV92YXJzWydjb250aXZfbmV0d29ya19tb2RlJ10gPT0gJ2FjaScpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbm9kZUNvbW1pc3Npb25DdHJsLmV4dHJhX3ZhcnNbJ2Z3ZF9tb2RlJ107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBub2RlQ29tbWlzc2lvbkN0cmwuZXh0cmFfdmFyc1snYXBpY191cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbm9kZUNvbW1pc3Npb25DdHJsLmV4dHJhX3ZhcnNbJ2FwaWNfdXNlcm5hbWUnXTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbm9kZUNvbW1pc3Npb25DdHJsLmV4dHJhX3ZhcnNbJ2FwaWNfcGFzc3dvcmQnXTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbm9kZUNvbW1pc3Npb25DdHJsLmV4dHJhX3ZhcnNbJ2FwaWNfbGVhZl9ub2RlcyddO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBub2RlQ29tbWlzc2lvbkN0cmwuZXh0cmFfdmFyc1snYXBpY19waHlzX2RvbWFpbiddO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBub2RlQ29tbWlzc2lvbkN0cmwuZXh0cmFfdmFyc1snYXBpY19lcGdfYnJpZGdlX2RvbWFpbiddO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBub2RlQ29tbWlzc2lvbkN0cmwuZXh0cmFfdmFyc1snYXBpY19jb250cmFjdHNfdW5yZXN0cmljdGVkX21vZGUnXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vQ2xlYW51cCBmb3Igc2NoZWR1bGVyXHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZUNvbW1pc3Npb25DdHJsLmV4dHJhX3ZhcnNbJ3NjaGVkdWxlcl9wcm92aWRlciddID09ICduYXRpdmUtc3dhcm0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5vZGVDb21taXNzaW9uQ3RybC5leHRyYV92YXJzWyd1Y3BfYm9vdHN0cmFwX25vZGVfbmFtZSddO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVJUEFkZHJBcnJheSgpIHtcclxuICAgICAgICAgICAgICAgIG5vZGVDb21taXNzaW9uQ3RybC5ub2RlT3BzT2JqLmFkZHJzID0gXy53b3Jkcyhub2RlQ29tbWlzc2lvbkN0cmwubm9kZUlQQWRkciwgL1teLCBdKy9nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLm5vZGVPcHNPYmogPSB7fTtcclxuICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLmV4dHJhX3ZhcnMgPSB7fTsgLy9UT0RPIEludGlhbGl6ZSBmcm9tIGdsb2JhbCBzZXR0aW5nc1xyXG4gICAgICAgICAgICBub2RlQ29tbWlzc2lvbkN0cmwuYW5zaWJsZVZhcmlhYmxlcyA9IFtdO1xyXG4gICAgICAgICAgICBub2RlQ29tbWlzc2lvbkN0cmwuZW52VmFyaWFibGVzID0gW107XHJcbiAgICAgICAgICAgIG5vZGVDb21taXNzaW9uQ3RybC5ub2RlSVBBZGRyID0gJyc7IC8vSVAgYWRkcmVzcyBvZiBub2RlcyB0byBkaXNjb3ZlclxyXG5cclxuICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLmNhbmNlbENvbW1pc3Npb25pbmdOb2RlID0gY2FuY2VsQ29tbWlzc2lvbmluZ05vZGU7XHJcbiAgICAgICAgICAgIG5vZGVDb21taXNzaW9uQ3RybC5jb21taXNzaW9uID0gY29tbWlzc2lvbjtcclxuICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLmRpc2NvdmVyID0gZGlzY292ZXI7XHJcbiAgICAgICAgICAgIG5vZGVDb21taXNzaW9uQ3RybC5jYW5jZWxEaXNjb3ZlcmluZ05vZGUgPSBjYW5jZWxEaXNjb3ZlcmluZ05vZGU7XHJcblxyXG4gICAgICAgICAgICBzZXRNb2RlKCk7XHJcbiAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobm9kZUNvbW1pc3Npb25DdHJsKTtcclxuICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG5vZGVDb21taXNzaW9uQ3RybCk7XHJcblxyXG4gICAgICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMjUvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm5vZGVzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubm9kZXMuZGV0YWlscycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kZXRhaWxzLzprZXknLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05vZGVEZXRhaWxzQ3RybCBhcyBub2RlRGV0YWlsc0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdub2Rlcy9ub2RlZGV0YWlscy5odG1sJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5vZGVzLmRldGFpbHMuaW5mbycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9pbmZvJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOb2RlRGV0YWlsc0N0cmwgYXMgbm9kZURldGFpbHNDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbm9kZXMvbm9kZWluZm8uaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5ub2Rlcy5kZXRhaWxzLnN0YXRzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N0YXRzJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOb2RlRGV0YWlsc0N0cmwgYXMgbm9kZURldGFpbHNDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbm9kZXMvbm9kZXN0YXRzLmh0bWwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubm9kZXMuZGV0YWlscy5sb2dzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2xvZ3MnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05vZGVEZXRhaWxzQ3RybCBhcyBub2RlRGV0YWlsc0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdub2Rlcy9ub2RlbG9ncy5odG1sJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH1dKVxyXG4gICAgLmNvbnRyb2xsZXIoJ05vZGVEZXRhaWxzQ3RybCcsIFsnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICckc2NvcGUnLCAnJGludGVydmFsJywgJ05vZGVzTW9kZWwnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHNjb3BlLCAkaW50ZXJ2YWwsIE5vZGVzTW9kZWwpIHtcclxuICAgICAgICAgICAgdmFyIG5vZGVEZXRhaWxzQ3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWNvbW1pc3Npb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZU9wc09iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgbm9kZXM6IFskc3RhdGVQYXJhbXMua2V5XVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIE5vZGVzTW9kZWwuZGVjb21taXNzaW9uKG5vZGVPcHNPYmopLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vRGlzYWJsZSBhbGwgYnV0dG9ucyBpbml0aWFsbHkuIFBvbGwgd2lsbCBhc3NpZ24gdmFsdWVzIGFwcHJvcHJpYXRlbHkuXHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnNob3dDb21taXNzaW9uQnV0dG9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLmNvbW1pc3Npb25CdXR0b25FbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnVwZ3JhZGVCdXR0b25FbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBncmFkZSgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBub2RlT3BzT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVzOiBbJHN0YXRlUGFyYW1zLmtleV1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBOb2Rlc01vZGVsLnVwZ3JhZGUobm9kZU9wc09iaikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9EaXNhYmxlIGFsbCBidXR0b25zIGluaXRpYWxseS4gUG9sbCB3aWxsIGFzc2lnbiB2YWx1ZXMgYXBwcm9wcmlhdGVseS5cclxuICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuc2hvd0NvbW1pc3Npb25CdXR0b24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwudXBncmFkZUJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGlzcGxheSBidXR0b25zIGJhc2VkIG9uIHN0YXR1cyBvZiBub2RlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRCdXR0b25EaXNwbGF5KCkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChub2RlRGV0YWlsc0N0cmwubm9kZVsnaW52ZW50b3J5X3N0YXRlJ10uc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnVW5hbGxvY2F0ZWQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuc2hvd0NvbW1pc3Npb25CdXR0b24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwudXBncmFkZUJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRGVjb21taXNzaW9uZWQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuc2hvd0NvbW1pc3Npb25CdXR0b24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwudXBncmFkZUJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUHJvdmlzaW9uaW5nJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnNob3dDb21taXNzaW9uQnV0dG9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLmNvbW1pc3Npb25CdXR0b25FbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC51cGdyYWRlQnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdBbGxvY2F0ZWQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuc2hvd0NvbW1pc3Npb25CdXR0b24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLmNvbW1pc3Npb25CdXR0b25FbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnVwZ3JhZGVCdXR0b25FbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ2FuY2VsbGVkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnNob3dDb21taXNzaW9uQnV0dG9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC5jb21taXNzaW9uQnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwudXBncmFkZUJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTWFpbnRlbmFuY2UnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuc2hvd0NvbW1pc3Npb25CdXR0b24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnVwZ3JhZGVCdXR0b25FbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6Ly9DbHVzdGVyIHNob3VsZCBub3QgYmUgaW4gdGhpcyBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuc2hvd0NvbW1pc3Npb25CdXR0b24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnVwZ3JhZGVCdXR0b25FbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXROb2RlSW5mbyhyZWxvYWQpIHtcclxuICAgICAgICAgICAgICAgIE5vZGVzTW9kZWwuZ2V0TW9kZWxCeUtleSgkc3RhdGVQYXJhbXMua2V5LCByZWxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLm5vZGUgPSBub2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRCdXR0b25EaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC5kZWNvbW1pc3Npb24gPSBkZWNvbW1pc3Npb247XHJcbiAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC51cGdyYWRlID0gdXBncmFkZTtcclxuXHJcbiAgICAgICAgICAgIC8vTG9hZCBmcm9tIGNhY2hlIGZvciBxdWljayBkaXNwbGF5IGluaXRpYWxseVxyXG4gICAgICAgICAgICBnZXROb2RlSW5mbyhmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZTtcclxuICAgICAgICAgICAgLy9Eb24ndCBkbyBhdXRvLXJlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcclxuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0Tm9kZUluZm8odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChwcm9taXNlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy8yMi8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubm9kZXMnKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5ub2Rlcy5saXN0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2xpc3QnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05vZGVMaXN0Q3RybCBhcyBub2RlTGlzdEN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdub2Rlcy9ub2RlbGlzdC5odG1sJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH1dKVxyXG4gICAgLmNvbnRyb2xsZXIoJ05vZGVMaXN0Q3RybCcsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ05vZGVzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLCAnTm9kZVNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRpbnRlcnZhbCwgJGZpbHRlciwgTm9kZXNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UsIE5vZGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyIG5vZGVMaXN0Q3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldE5vZGVzKHJlbG9hZCkge1xyXG4gICAgICAgICAgICBOb2Rlc01vZGVsLmdldChyZWxvYWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihub2RlTGlzdEN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVMaXN0Q3RybC5ub2RlcyA9ICRmaWx0ZXIoJ29yZGVyQnknKShyZXN1bHQsICdrZXknKTtcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihub2RlTGlzdEN0cmwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRMb2dJbmZvKHJlbG9hZCkge1xyXG4gICAgICAgICAgICBOb2Rlc01vZGVsLmdldChyZWxvYWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0QWN0aXZlTG9ncygpO1xyXG4gICAgICAgICAgICAgICAgZ2V0TGFzdExvZ3MoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRBY3RpdmVMb2dzKCkge1xyXG4gICAgICAgICAgICBOb2RlU2VydmljZS5nZXRBY3RpdmVMb2dzKG5vZGVMaXN0Q3RybC5ub2RlcykudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBub2RlTGlzdEN0cmwuYWN0aXZlTG9ncyA9IHJlc3VsdDtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRMYXN0TG9ncygpIHtcclxuICAgICAgICAgICAgTm9kZVNlcnZpY2UuZ2V0TGFzdExvZ3Mobm9kZUxpc3RDdHJsLm5vZGVzKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIG5vZGVMaXN0Q3RybC5sYXN0TG9ncyA9IHJlc3VsdDtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBub2RlTGlzdEN0cmwuZ2V0QWN0aXZlTG9ncyA9IGdldEFjdGl2ZUxvZ3M7XHJcbiAgICAgICAgbm9kZUxpc3RDdHJsLmdldExhc3RMb2dzID0gZ2V0TGFzdExvZ3M7XHJcblxyXG4gICAgICAgIC8vTG9hZCBmcm9tIGNhY2hlIGZvciBxdWljayBkaXNwbGF5IGluaXRpYWxseVxyXG4gICAgICAgIGdldE5vZGVzKGZhbHNlKTtcclxuICAgICAgICBnZXRMb2dJbmZvKGZhbHNlKTtcclxuXHJcbiAgICAgICAgdmFyIHByb21pc2U7XHJcbiAgICAgICAgLy9Eb24ndCBkbyBhdXRvLXJlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcclxuICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKHByb21pc2UpKSB7XHJcbiAgICAgICAgICAgIHByb21pc2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0Tm9kZXModHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBnZXRMb2dJbmZvKHRydWUpO1xyXG4gICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXHJcbiAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5ub2RlcycpXHJcbiAgICAuZmFjdG9yeSgnTm9kZVNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUxvZ3Mobm9kZSkge1xyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5BQ1RJVkVfSk9CX0VORFBPSU5UO1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0LmRhdGEpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3VsdC5kYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0TGFzdExvZ3Mobm9kZSkge1xyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5MQVNUX0pPQl9FTkRQT0lOVDtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC5kYXRhKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdldEFjdGl2ZUxvZ3M6IGdldEFjdGl2ZUxvZ3MsXHJcbiAgICAgICAgICAgIGdldExhc3RMb2dzOiBnZXRMYXN0TG9nc1xyXG4gICAgICAgIH1cclxuICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2Lm9yZ2FuaXphdGlvbnMnKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5vcmdhbml6YXRpb25zLmNyZWF0ZScsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jcmVhdGUnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdvcmdhbml6YXRpb25zL29yZ2FuaXphdGlvbmNyZWF0ZS5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdPcmdhbml6YXRpb25DcmVhdGVDdHJsIGFzIG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignT3JnYW5pemF0aW9uQ3JlYXRlQ3RybCcsIFsnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdPcmdhbml6YXRpb25zTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgT3JnYW5pemF0aW9uc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xyXG4gICAgICAgICAgICB2YXIgb3JnYW5pemF0aW9uQ3JlYXRlQ3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub09yZ2FuaXphdGlvbnMoKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51Lm9yZ2FuaXphdGlvbnMubGlzdCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjYW5jZWxDcmVhdGluZygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblRvT3JnYW5pemF0aW9ucygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVPcmdhbml6YXRpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAvL2Zvcm0gY29udHJvbGxlciBpcyBpbmplY3RlZCBieSB0aGUgaHRtbCB0ZW1wbGF0ZVxyXG4gICAgICAgICAgICAgICAgLy9jaGVja2luZyBpZiBhbGwgdmFsaWRhdGlvbnMgaGF2ZSBwYXNzZWRcclxuICAgICAgICAgICAgICAgIGlmIChvcmdhbml6YXRpb25DcmVhdGVDdHJsLmZvcm0uJHZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwubmV3T3JnYW5pemF0aW9uLmtleSA9IG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwubmV3T3JnYW5pemF0aW9uLnRlbmFudE5hbWU7IFxyXG4gICAgICAgICAgICAgICAgICAgIE9yZ2FuaXphdGlvbnNNb2RlbC5jcmVhdGUob3JnYW5pemF0aW9uQ3JlYXRlQ3RybC5uZXdPcmdhbml6YXRpb24pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub09yZ2FuaXphdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Iob3JnYW5pemF0aW9uQ3JlYXRlQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihvcmdhbml6YXRpb25DcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihvcmdhbml6YXRpb25DcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwubmV3T3JnYW5pemF0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudE5hbWU6ICcnXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvcmdhbml6YXRpb25DcmVhdGVDdHJsLmNyZWF0ZU9yZ2FuaXphdGlvbiA9IGNyZWF0ZU9yZ2FuaXphdGlvbjtcclxuICAgICAgICAgICAgb3JnYW5pemF0aW9uQ3JlYXRlQ3RybC5jYW5jZWxDcmVhdGluZyA9IGNhbmNlbENyZWF0aW5nO1xyXG5cclxuICAgICAgICAgICAgcmVzZXRGb3JtKCk7XHJcbiAgICAgICAgfV0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2Lm9yZ2FuaXphdGlvbnMnKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5vcmdhbml6YXRpb25zLmRldGFpbHMnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvZGV0YWlscy86a2V5JyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdPcmdhbml6YXRpb25EZXRhaWxzQ3RybCBhcyBvcmdhbml6YXRpb25EZXRhaWxzQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ29yZ2FuaXphdGlvbnMvb3JnYW5pemF0aW9uZGV0YWlscy5odG1sJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1dKVxyXG4gICAgLmNvbnRyb2xsZXIoJ09yZ2FuaXphdGlvbkRldGFpbHNDdHJsJyxcclxuICAgICAgICBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ09yZ2FuaXphdGlvbnNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHNjb3BlLCAkaW50ZXJ2YWwsICRmaWx0ZXIsIE9yZ2FuaXphdGlvbnNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmdhbml6YXRpb25EZXRhaWxzQ3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9Pcmdhbml6YXRpb25zKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUub3JnYW5pemF0aW9ucy5saXN0Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGVsZXRlT3JnYW5pemF0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihvcmdhbml6YXRpb25EZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIob3JnYW5pemF0aW9uRGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIE9yZ2FuaXphdGlvbnNNb2RlbC5kZWxldGUob3JnYW5pemF0aW9uRGV0YWlsc0N0cmwub3JnYW5pemF0aW9uKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihvcmdhbml6YXRpb25EZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvT3JnYW5pemF0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIob3JnYW5pemF0aW9uRGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Iob3JnYW5pemF0aW9uRGV0YWlsc0N0cmwsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihvcmdhbml6YXRpb25EZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3Iob3JnYW5pemF0aW9uRGV0YWlsc0N0cmwpO1xyXG5cclxuICAgICAgICAgICAgICAgIE9yZ2FuaXphdGlvbnNNb2RlbC5nZXRNb2RlbEJ5S2V5KCRzdGF0ZVBhcmFtcy5rZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG9yZ2FuaXphdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25EZXRhaWxzQ3RybC5vcmdhbml6YXRpb24gPSBvcmdhbml6YXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uRGV0YWlsc0N0cmwuZGVsZXRlT3JnYW5pemF0aW9uID0gZGVsZXRlT3JnYW5pemF0aW9uO1xyXG4gICAgICAgICAgICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5vcmdhbml6YXRpb25zJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUub3JnYW5pemF0aW9ucy5saXN0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2xpc3QnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ09yZ2FuaXphdGlvbnNMaXN0Q3RybCBhcyBvcmdhbml6YXRpb25zTGlzdEN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdvcmdhbml6YXRpb25zL29yZ2FuaXphdGlvbmxpc3QuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9XSlcclxuICAgIC5jb250cm9sbGVyKCdPcmdhbml6YXRpb25zTGlzdEN0cmwnLCBbJyRzY29wZScsICckaW50ZXJ2YWwnLCAnJGZpbHRlcicsICdPcmdhbml6YXRpb25zTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRpbnRlcnZhbCwgJGZpbHRlciwgT3JnYW5pemF0aW9uc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xyXG4gICAgICAgICAgICB2YXIgb3JnYW5pemF0aW9uc0xpc3RDdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE9yZ2FuaXphdGlvbnMocmVsb2FkKSB7XHJcbiAgICAgICAgICAgICAgICBPcmdhbml6YXRpb25zTW9kZWwuZ2V0KHJlbG9hZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG9yZ2FuaXphdGlvbnNMaXN0Q3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25zTGlzdEN0cmwub3JnYW5pemF0aW9ucyA9ICRmaWx0ZXIoJ29yZGVyQnknKShyZXN1bHQsICd0ZW5hbnROYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG9yZ2FuaXphdGlvbnNMaXN0Q3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL0xvYWQgZnJvbSBjYWNoZSBmb3IgcXVpY2sgZGlzcGxheSBpbml0aWFsbHlcclxuICAgICAgICAgICAgZ2V0T3JnYW5pemF0aW9ucyhmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZTtcclxuICAgICAgICAgICAgLy9Eb24ndCBkbyBhdXRvcmVmcmVzaCBpZiBvbmUgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xyXG4gICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKHByb21pc2UpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXRPcmdhbml6YXRpb25zKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSwgQ29udGl2R2xvYmFscy5SRUZSRVNIX0lOVEVSVkFMKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9zdG9wIHBvbGxpbmcgd2hlbiB1c2VyIG1vdmVzIGF3YXkgZnJvbSB0aGUgcGFnZVxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xMi8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuc2VydmljZWxicycpXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMuY3JlYXRlJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NyZWF0ZScsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NlcnZpY2VfbGJzL3NlcnZpY2VsYmNyZWF0ZS5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZXJ2aWNlbGJDcmVhdGVDdHJsIGFzIHNlcnZpY2VsYkNyZWF0ZUN0cmwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignU2VydmljZWxiQ3JlYXRlQ3RybCcsIFtcclxuICAgICAgICAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdTZXJ2aWNlbGJzTW9kZWwnLCAnTmV0d29ya3NNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBTZXJ2aWNlbGJzTW9kZWwsIE5ldHdvcmtzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlbGJDcmVhdGVDdHJsID0gdGhpcztcclxuICAgICAgICAgICAgc2VydmljZWxiQ3JlYXRlQ3RybC5sYWJlbFNlbGVjdG9ycyA9IFtdO1xyXG4gICAgICAgICAgICBzZXJ2aWNlbGJDcmVhdGVDdHJsLm5ldHdvcmtzID0gW107XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub1NlcnZpY2VsYnMoKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMubGlzdCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjYW5jZWxDcmVhdGluZygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblRvU2VydmljZWxicygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogR2V0IG5ldHdvcmtzIGZvciB0aGUgZ2l2ZW4gdGVuYW50LlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TmV0d29ya3MoKSB7XHJcbiAgICAgICAgICAgICAgICBOZXR3b3Jrc01vZGVsLmdldCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwubmV0d29ya3MgPSBfLmZpbHRlcihyZXN1bHQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RlbmFudE5hbWUnOiAnZGVmYXVsdCcvL1RPRE86IFJlbW92ZSBoYXJkY29kZWQgdGVuYW50LlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUxhYmVsU2VsZWN0b3JTdHJpbmdzKCkge1xyXG4gICAgICAgICAgICAgICAgLy9FbXB0eSBvdXQgdGhlIHNlbGVjdG9ycy4gSW4gY2FzZSBvZiBzZXJ2ZXIgZXJyb3JzIHRoaXMgbmVlZHMgdG8gYmUgcmVzZXQuXHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlbGJDcmVhdGVDdHJsLnNlcnZpY2VsYi5zZWxlY3RvcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZXJ2aWNlbGJDcmVhdGVDdHJsLmxhYmVsU2VsZWN0b3JzLCBmdW5jdGlvbihsYWJlbFNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yU3RyaW5nID0gbGFiZWxTZWxlY3Rvci5uYW1lICsgJz0nICsgbGFiZWxTZWxlY3Rvci52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlbGJDcmVhdGVDdHJsLnNlcnZpY2VsYi5zZWxlY3RvcnMucHVzaChzZWxlY3RvclN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVNlcnZpY2VsYigpIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUxhYmVsU2VsZWN0b3JTdHJpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAvL2Zvcm0gY29udHJvbGxlciBpcyBpbmplY3RlZCBieSB0aGUgaHRtbCB0ZW1wbGF0ZVxyXG4gICAgICAgICAgICAgICAgLy9jaGVja2luZyBpZiBhbGwgdmFsaWRhdGlvbnMgaGF2ZSBwYXNzZWRcclxuICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNlbGJDcmVhdGVDdHJsLmZvcm0uJHZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHNlcnZpY2VsYkNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKHNlcnZpY2VsYkNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwuc2VydmljZWxiLmtleSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwuc2VydmljZWxiLnRlbmFudE5hbWUgKyAnOicgKyBzZXJ2aWNlbGJDcmVhdGVDdHJsLnNlcnZpY2VsYi5zZXJ2aWNlTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlbGJzTW9kZWwuY3JlYXRlKHNlcnZpY2VsYkNyZWF0ZUN0cmwuc2VydmljZWxiKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzZXJ2aWNlbGJDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9TZXJ2aWNlbGJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzZXJ2aWNlbGJDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKHNlcnZpY2VsYkNyZWF0ZUN0cmwsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNldEZvcm0oKSB7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHNlcnZpY2VsYkNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHNlcnZpY2VsYkNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgc2VydmljZWxiQ3JlYXRlQ3RybC5zZXJ2aWNlbGIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZU5hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcmtOYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBpcEFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgcG9ydHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudE5hbWU6ICdkZWZhdWx0Jy8vVE9ETzogUmVtb3ZlIGhhcmRjb2RlZCB0ZW5hbnQuXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwuY3JlYXRlU2VydmljZWxiID0gY3JlYXRlU2VydmljZWxiO1xyXG4gICAgICAgICAgICBzZXJ2aWNlbGJDcmVhdGVDdHJsLmNhbmNlbENyZWF0aW5nID0gY2FuY2VsQ3JlYXRpbmc7XHJcblxyXG4gICAgICAgICAgICBnZXROZXR3b3JrcygpO1xyXG4gICAgICAgICAgICByZXNldEZvcm0oKTtcclxuICAgICAgICB9XSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzExLzE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5zZXJ2aWNlbGJzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc2VydmljZWxicy5kZXRhaWxzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMvOmtleScsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnU2VydmljZWxiRGV0YWlsc0N0cmwgYXMgc2VydmljZWxiRGV0YWlsc0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzZXJ2aWNlX2xicy9zZXJ2aWNlbGJkZXRhaWxzLmh0bWwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc2VydmljZWxicy5lZGl0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2VkaXQvOmtleScsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnU2VydmljZWxiRGV0YWlsc0N0cmwgYXMgc2VydmljZWxiRGV0YWlsc0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzZXJ2aWNlX2xicy9zZXJ2aWNlbGJkZXRhaWxzLmh0bWwnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignU2VydmljZWxiRGV0YWlsc0N0cmwnLFxyXG4gICAgICAgIFsnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdTZXJ2aWNlbGJzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFNlcnZpY2VsYnNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlbGJEZXRhaWxzQ3RybCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlbGJEZXRhaWxzQ3RybC5sYWJlbFNlbGVjdG9ycyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogVG8gc2hvdyBlZGl0IG9yIGRldGFpbHMgc2NyZWVuIGJhc2VkIG9uIHRoZSByb3V0ZVxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRNb2RlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc3RhdGUuaXMoJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMuZWRpdCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkRldGFpbHNDdHJsLm1vZGUgPSAnZWRpdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZWxiRGV0YWlsc0N0cmwubW9kZSA9ICdkZXRhaWxzJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9TZXJ2aWNlbGJzKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUuc2VydmljZWxicy5saXN0Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9TZXJ2aWNlbGJEZXRhaWxzKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUuc2VydmljZWxicy5kZXRhaWxzJywgeydrZXknOiBzZXJ2aWNlbGJEZXRhaWxzQ3RybC5zZXJ2aWNlbGIua2V5fSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsRWRpdGluZygpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub1NlcnZpY2VsYkRldGFpbHMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVTZXJ2aWNlbGIoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHNlcnZpY2VsYkRldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihzZXJ2aWNlbGJEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgU2VydmljZWxic01vZGVsLmRlbGV0ZShzZXJ2aWNlbGJEZXRhaWxzQ3RybC5zZXJ2aWNlbGIpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHNlcnZpY2VsYkRldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9TZXJ2aWNlbGJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzZXJ2aWNlbGJEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihzZXJ2aWNlbGJEZXRhaWxzQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzYXZlU2VydmljZWxiKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihzZXJ2aWNlbGJEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoc2VydmljZWxiRGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUxhYmVsU2VsZWN0b3JTdHJpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgU2VydmljZWxic01vZGVsLnNhdmUoc2VydmljZWxiRGV0YWlsc0N0cmwuc2VydmljZWxiKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzZXJ2aWNlbGJEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvU2VydmljZWxiRGV0YWlscygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc2VydmljZWxiRGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Ioc2VydmljZWxiRGV0YWlsc0N0cmwsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlTGFiZWxTZWxlY3RvcnMoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNlcnZpY2VsYkRldGFpbHNDdHJsLnNlcnZpY2VsYi5zZWxlY3RvcnMsIGZ1bmN0aW9uKHNlbGVjdG9yU3RyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNlbGVjdG9yU3RyLnNwbGl0KCc9JylbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZWN0b3JTdHIuc3BsaXQoJz0nKVsxXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlbGJEZXRhaWxzQ3RybC5sYWJlbFNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVMYWJlbFNlbGVjdG9yU3RyaW5ncygpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlbGJEZXRhaWxzQ3RybC5zZXJ2aWNlbGIuc2VsZWN0b3JzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNlcnZpY2VsYkRldGFpbHNDdHJsLmxhYmVsU2VsZWN0b3JzLCBmdW5jdGlvbihsYWJlbFNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvclN0cmluZyA9IGxhYmVsU2VsZWN0b3IubmFtZSArICc9JyArIGxhYmVsU2VsZWN0b3IudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkRldGFpbHNDdHJsLnNlcnZpY2VsYi5zZWxlY3RvcnMucHVzaChzZWxlY3RvclN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHNlcnZpY2VsYkRldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihzZXJ2aWNlbGJEZXRhaWxzQ3RybCk7XHJcblxyXG4gICAgICAgICAgICAgICAgU2VydmljZWxic01vZGVsLmdldE1vZGVsQnlLZXkoJHN0YXRlUGFyYW1zLmtleSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2soc2VydmljZWxiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkRldGFpbHNDdHJsLnNlcnZpY2VsYiA9IHNlcnZpY2VsYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTGFiZWxTZWxlY3RvcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlbGJEZXRhaWxzQ3RybC5zYXZlU2VydmljZWxiID0gc2F2ZVNlcnZpY2VsYjtcclxuICAgICAgICAgICAgICAgIHNlcnZpY2VsYkRldGFpbHNDdHJsLmNhbmNlbEVkaXRpbmcgPSBjYW5jZWxFZGl0aW5nO1xyXG4gICAgICAgICAgICAgICAgc2VydmljZWxiRGV0YWlsc0N0cmwuZGVsZXRlU2VydmljZWxiID0gZGVsZXRlU2VydmljZWxiO1xyXG4gICAgICAgICAgICAgICAgc2V0TW9kZSgpO1xyXG5cclxuICAgICAgICAgICAgfV0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xMS8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuc2VydmljZWxicycpXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMubGlzdCcsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9saXN0JyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZXJ2aWNlbGJMaXN0Q3RybCBhcyBzZXJ2aWNlbGJMaXN0Q3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NlcnZpY2VfbGJzL3NlcnZpY2VsYmxpc3QuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9XSlcclxuICAgIC5jb250cm9sbGVyKCdTZXJ2aWNlbGJMaXN0Q3RybCcsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ1NlcnZpY2VsYnNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGludGVydmFsLCAkZmlsdGVyLCBTZXJ2aWNlbGJzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlbGJMaXN0Q3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTZXJ2aWNlbGJzKHJlbG9hZCkge1xyXG4gICAgICAgICAgICAgICAgU2VydmljZWxic01vZGVsLmdldChyZWxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzZXJ2aWNlbGJMaXN0Q3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlbGJMaXN0Q3RybC5zZXJ2aWNlbGJzID0gJGZpbHRlcignb3JkZXJCeScpKHJlc3VsdCwgJ3NlcnZpY2VOYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHNlcnZpY2VsYkxpc3RDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vTG9hZCBmcm9tIGNhY2hlIGZvciBxdWljayBkaXNwbGF5IGluaXRpYWxseVxyXG4gICAgICAgICAgICBnZXRTZXJ2aWNlbGJzKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlO1xyXG4gICAgICAgICAgICAvL0Rvbid0IGRvIGF1dG9yZWZyZXNoIGlmIG9uZSBpcyBhbHJlYWR5IGluIHByb2dyZXNzXHJcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQocHJvbWlzZSkpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldFNlcnZpY2VsYnModHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChwcm9taXNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfV0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xMy8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKFwiY29udGl2LnNlcnZpY2VsYnNcIilcclxuICAgIC5kaXJlY3RpdmUoXCJjdHZTZXJ2aWNlbGJwb3J0c1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgaXRlbXM6ICc9J1xyXG4gICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAqIENvbXBhcmUgaWYgdHdvIGl0ZW1zIGhhdmUgc2FtZSBwb3J0cyBhbmQgcHJvdG9jb2xzXHJcbiAgICAgICAgICAgICAgICAqIEBwYXJhbSB2YWwxXHJcbiAgICAgICAgICAgICAgICAqIEBwYXJhbSB2YWwyXHJcbiAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgZnVuY3Rpb24gY29tcGFyZSh2YWwxLCB2YWwyKSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gKHZhbDEgPT09IHZhbDIpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICBmdW5jdGlvbiByZXNldE5ld0l0ZW0oKSB7XHJcbiAgICAgICAgICAgICAgICAgICBzY29wZS5uZXdJdGVtID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VQb3J0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlclBvcnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHByb3RvY29sOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgZnVuY3Rpb24gaXNFbXB0eUl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIChpdGVtLnNlcnZpY2VQb3J0ID09PSAnJyAmJiBpdGVtLnByb3ZpZGVyUG9ydCA9PT0gJycgJiYgaXRlbS5wcm90b2NvbCA9PT0gJycpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICBzY29wZS5hZGQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgIGlmIChpc0VtcHR5SXRlbShzY29wZS5uZXdJdGVtKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKHNjb3BlLml0ZW1zID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5pdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgdmFyIG5ld0l0ZW1TdHIgPSBzY29wZS5uZXdJdGVtLnNlcnZpY2VQb3J0ICsgJzonXHJcbiAgICAgICAgICAgICAgICAgICAgICAgKyBzY29wZS5uZXdJdGVtLnByb3ZpZGVyUG9ydCArICc6J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICsgc2NvcGUubmV3SXRlbS5wcm90b2NvbDtcclxuICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlcyBleGlzdGluZyBpdGVtIHdpdGggdGhlIHNhbWUgdmFsdWUgZmlyc3QgaWYgaXQgZXhpc3RzLlxyXG4gICAgICAgICAgICAgICAgICAgXy5wdWxsQWxsV2l0aChzY29wZS5pdGVtcywgW25ld0l0ZW1TdHJdLCBjb21wYXJlKTtcclxuICAgICAgICAgICAgICAgICAgIHNjb3BlLml0ZW1zLnB1c2gobmV3SXRlbVN0cik7XHJcbiAgICAgICAgICAgICAgICAgICByZXNldE5ld0l0ZW0oKTtcclxuICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgIHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKHBhc3NlZEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgIF8ucmVtb3ZlKHNjb3BlLml0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlKGl0ZW0sIHBhc3NlZEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgIHJlc2V0TmV3SXRlbSgpO1xyXG4gICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzZXJ2aWNlX2xicy9zZXJ2aWNlbGJwb3J0cy5odG1sJ1xyXG4gICAgICAgfVxyXG4gICAgfSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA2LzEvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnN0b3JhZ2Vwb2xpY2llcycpXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnN0b3JhZ2Vwb2xpY2llcy5jcmVhdGUnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY3JlYXRlJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RvcmFnZV9wb2xpY2llcy9zdG9yYWdlcG9saWN5Y3JlYXRlLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1N0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsIGFzIHN0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH1dKVxyXG4gICAgLmNvbnRyb2xsZXIoJ1N0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsJywgWyckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJ1N0b3JhZ2VQb2xpY2llc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFN0b3JhZ2VQb2xpY2llc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xyXG4gICAgICAgICAgICB2YXIgc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9TdG9yYWdlUG9saWNpZXMoKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LnN0b3JhZ2Vwb2xpY2llcy5saXN0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbENyZWF0aW5nKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVG9TdG9yYWdlUG9saWNpZXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlRmlsZXN5c3RlbUNtZHMoKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybC5maWxlc3lzdGVtY21kcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwubmV3U3RvcmFnZVBvbGljeS5maWxlc3lzdGVtc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVQb2xpY3koKSB7XHJcbiAgICAgICAgICAgICAgICAvL2Zvcm0gY29udHJvbGxlciBpcyBpbmplY3RlZCBieSB0aGUgaHRtbCB0ZW1wbGF0ZVxyXG4gICAgICAgICAgICAgICAgLy9jaGVja2luZyBpZiBhbGwgdmFsaWRhdGlvbnMgaGF2ZSBwYXNzZWRcclxuICAgICAgICAgICAgICAgIGlmIChzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybC5mb3JtLiR2YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZpbGVzeXN0ZW1DbWRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgU3RvcmFnZVBvbGljaWVzTW9kZWwuY3JlYXRlKHN0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsLm5ld1N0b3JhZ2VQb2xpY3kpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9TdG9yYWdlUG9saWNpZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKHN0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHN0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsLm5ld1N0b3JhZ2VQb2xpY3kgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJiYWNrZW5kc1wiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY3J1ZFwiOiBcImNlcGhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtb3VudFwiOiBcImNlcGhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzbmFwc2hvdFwiOiBcImNlcGhcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ1bmxvY2tlZFwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBcImRyaXZlclwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicG9vbFwiOiBcInJiZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcImNyZWF0ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2l6ZVwiOiBcIjEwTUJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmaWxlc3lzdGVtXCI6IFwiZXh0NFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcInJ1bnRpbWVcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNuYXBzaG90c1wiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNuYXBzaG90XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZnJlcXVlbmN5XCI6IFwiMzBtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImtlZXBcIjogMjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJyYXRlLWxpbWl0XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid3JpdGUtaW9wc1wiOiAxMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZWFkLWlvcHNcIjogMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid3JpdGUtYnBzXCI6IDEwMDAwMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmVhZC1icHNcIjogMTAwMDAwMDAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZmlsZXN5c3RlbXNcIjoge31cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsLmNyZWF0ZVBvbGljeSA9IGNyZWF0ZVBvbGljeTtcclxuICAgICAgICAgICAgc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwuY2FuY2VsQ3JlYXRpbmcgPSBjYW5jZWxDcmVhdGluZztcclxuICAgICAgICAgICAgc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwuZmlsZXN5c3RlbWNtZHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHJlc2V0Rm9ybSgpO1xyXG4gICAgICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMjcvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnN0b3JhZ2Vwb2xpY2llcycpXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnN0b3JhZ2Vwb2xpY2llcy5kZXRhaWxzJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMvOmtleScsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnU3RvcmFnZVBvbGljeURldGFpbHNDdHJsIGFzIHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0b3JhZ2VfcG9saWNpZXMvc3RvcmFnZXBvbGljeWRldGFpbHMuaHRtbCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5zdG9yYWdlcG9saWNpZXMuZWRpdCcsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kZXRhaWxzLzprZXknLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1N0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCBhcyBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdG9yYWdlX3BvbGljaWVzL3N0b3JhZ2Vwb2xpY3lkZXRhaWxzLmh0bWwnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignU3RvcmFnZVBvbGljeURldGFpbHNDdHJsJyxcclxuICAgICAgICBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ1N0b3JhZ2VQb2xpY2llc01vZGVsJywgJ1ZvbHVtZXNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHNjb3BlLCAkaW50ZXJ2YWwsICRmaWx0ZXIsIFN0b3JhZ2VQb2xpY2llc01vZGVsLCBWb2x1bWVzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RvcmFnZVBvbGljeURldGFpbHNDdHJsID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5maWxlc3lzdGVtY21kcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogVG8gc2hvdyBlZGl0IG9yIGRldGFpbHMgc2NyZWVuIGJhc2VkIG9uIHRoZSByb3V0ZVxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRNb2RlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc3RhdGUuaXMoJ2NvbnRpdi5tZW51LnN0b3JhZ2Vwb2xpY2llcy5lZGl0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLm1vZGUgPSAnZWRpdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLm1vZGUgPSAnZGV0YWlscyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvUG9saWNpZXMoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5zdG9yYWdlcG9saWNpZXMubGlzdCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvUG9saWN5RGV0YWlscygpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LnN0b3JhZ2Vwb2xpY2llcy5kZXRhaWxzJywgeydrZXknOiBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwucG9saWN5Lm5hbWV9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjYW5jZWxFZGl0aW5nKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblRvUG9saWN5RGV0YWlscygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVBvbGljeSgpIHtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3Ioc3RvcmFnZVBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIFN0b3JhZ2VQb2xpY2llc01vZGVsLmRlbGV0ZVVzaW5nS2V5KHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kubmFtZSwgJ25hbWUnKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub1BvbGljaWVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Ioc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIEdldCB2b2x1bWVzIGJlbG9uZ2luZyB0byBhIHBvbGljeVxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRWb2x1bWVzKHJlbG9hZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFZvbHVtZXNNb2RlbC5nZXQocmVsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLnZvbHVtZXMgPSAkZmlsdGVyKCdvcmRlckJ5JykoXy5maWx0ZXIocmVzdWx0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncG9saWN5Jzogc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLnBvbGljeS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAnbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVGaWxlc3lzdGVtQ21kc0FycmF5KCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwucG9saWN5LmZpbGVzeXN0ZW1zLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVzaCh7bmFtZToga2V5LCB2YWx1ZTogdmFsdWV9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwuZmlsZXN5c3RlbWNtZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbGVzeXN0ZW1DbWRzKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5maWxlc3lzdGVtY21kcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kuZmlsZXN5c3RlbXNbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2F2ZVBvbGljeSgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2Zvcm0gY29udHJvbGxlciBpcyBpbmplY3RlZCBieSB0aGUgaHRtbCB0ZW1wbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vY2hlY2tpbmcgaWYgYWxsIHZhbGlkYXRpb25zIGhhdmUgcGFzc2VkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5mb3JtLiR2YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3Ioc3RvcmFnZVBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoc3RvcmFnZVBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmlsZXN5c3RlbUNtZHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3RvcmFnZVBvbGljaWVzTW9kZWwuc2F2ZShzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwucG9saWN5KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvUG9saWN5RGV0YWlscygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeURldGFpbHNDdHJsKTtcclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwpO1xyXG5cclxuICAgICAgICAgICAgICAgIFN0b3JhZ2VQb2xpY2llc01vZGVsLmdldE1vZGVsQnlLZXkoJHN0YXRlUGFyYW1zLmtleSwgZmFsc2UsICduYW1lJylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocG9saWN5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kgPSBwb2xpY3k7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVGaWxlc3lzdGVtQ21kc0FycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0Vm9sdW1lcyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5kZWxldGVQb2xpY3kgPSBkZWxldGVQb2xpY3k7XHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwuc2F2ZVBvbGljeSA9IHNhdmVQb2xpY3k7XHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwuY2FuY2VsRWRpdGluZyA9IGNhbmNlbEVkaXRpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0TW9kZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgLy9Eb24ndCBkbyBhdXRvcmVmcmVzaCBpZiBvbmUgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2dldFZvbHVtZXModHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgQ29udGl2R2xvYmFscy5SRUZSRVNIX0lOVEVSVkFMKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDYvMi8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKFwiY29udGl2LnN0b3JhZ2Vwb2xpY2llc1wiKVxyXG4gICAgLmRpcmVjdGl2ZShcImN0dlN0b3JhZ2Vwb2xpY3liYXNpY3NldHRpbmdzXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuZGlyZWN0aXZlKFwiY3R2U3RvcmFnZXBvbGljeWZpbGVzeXN0ZW1zZXR0aW5nc1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgcG9saWN5OiAnPScsXHJcbiAgICAgICAgICAgICAgICBmaWxlc3lzdGVtY21kczogJz0nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZS5maWxlc3lzdGVtcyA9IFsnZXh0NCcsICdidHJmcyddO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0b3JhZ2VfcG9saWNpZXMvZmlsZXN5c3RlbXNldHRpbmdzLmh0bWwnXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIC5kaXJlY3RpdmUoXCJjdHZTdG9yYWdlcG9saWN5c25hcHNob3RzZXR0aW5nc1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgcG9saWN5OiAnPSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdG9yYWdlX3BvbGljaWVzL3NuYXBzaG90c2V0dGluZ3MuaHRtbCdcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgLmRpcmVjdGl2ZShcImN0dlN0b3JhZ2Vwb2xpY3lyd29wc3NldHRpbmdzXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBwb2xpY3k6ICc9J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0b3JhZ2VfcG9saWNpZXMvcndvcHNzZXR0aW5ncy5odG1sJ1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuZGlyZWN0aXZlKFwiY3R2U3RvcmFnZXBvbGljeWJhY2tlbmRkcml2ZXJzXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBwb2xpY3k6ICc9J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0b3JhZ2VfcG9saWNpZXMvYmFja2VuZGRyaXZlcnMuaHRtbCdcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDQvMTgvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnN0b3JhZ2Vwb2xpY2llcycpXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnN0b3JhZ2Vwb2xpY2llcy5saXN0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2xpc3QnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1N0b3JhZ2VQb2xpY3lMaXN0Q3RybCBhcyBzdG9yYWdlUG9saWN5TGlzdEN0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdG9yYWdlX3BvbGljaWVzL3N0b3JhZ2Vwb2xpY3lsaXN0Lmh0bWwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignU3RvcmFnZVBvbGljeUxpc3RDdHJsJywgWyckc2NvcGUnLCAnJGludGVydmFsJywgJyRmaWx0ZXInLCAnU3RvcmFnZVBvbGljaWVzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRpbnRlcnZhbCwgJGZpbHRlciwgU3RvcmFnZVBvbGljaWVzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdG9yYWdlUG9saWN5TGlzdEN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UG9saWNpZXMocmVsb2FkKSB7XHJcbiAgICAgICAgICAgICAgICBTdG9yYWdlUG9saWNpZXNNb2RlbC5nZXQocmVsb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzdG9yYWdlUG9saWN5TGlzdEN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5TGlzdEN0cmwucG9saWNpZXMgPSAkZmlsdGVyKCdvcmRlckJ5JykocmVzdWx0LCAnbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeUxpc3RDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9Mb2FkIGZyb20gY2FjaGUgZm9yIHF1aWNrIGRpc3BsYXkgaW5pdGlhbGx5XHJcbiAgICAgICAgICAgIGdldFBvbGljaWVzKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlO1xyXG4gICAgICAgICAgICAvL0Rvbid0IGRvIGF1dG8tcmVmcmVzaCBpZiBvbmUgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xyXG4gICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKHByb21pc2UpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXRQb2xpY2llcyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0sIENvbnRpdkdsb2JhbHMuUkVGUkVTSF9JTlRFUlZBTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9zdG9wIHBvbGxpbmcgd2hlbiB1c2VyIG1vdmVzIGF3YXkgZnJvbSB0aGUgcGFnZVxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNi8zLzE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi52b2x1bWVzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUudm9sdW1lcy5jcmVhdGUnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY3JlYXRlJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndm9sdW1lcy92b2x1bWVjcmVhdGUuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVm9sdW1lQ3JlYXRlQ3RybCBhcyB2b2x1bWVDcmVhdGVDdHJsJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH1dKVxyXG4gICAgLmNvbnRyb2xsZXIoJ1ZvbHVtZUNyZWF0ZUN0cmwnLCBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnVm9sdW1lc01vZGVsJywgJ1N0b3JhZ2VQb2xpY2llc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFZvbHVtZXNNb2RlbCwgU3RvcmFnZVBvbGljaWVzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciB2b2x1bWVDcmVhdGVDdHJsID0gdGhpcztcclxuICAgICAgICAgICAgdm9sdW1lQ3JlYXRlQ3RybC5maWxlc3lzdGVtcyA9IFsnZXh0NCcsICdidHJmcyddO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9Wb2x1bWVzTW9kZWwoKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LnZvbHVtZXMubGlzdCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjYW5jZWxDcmVhdGluZygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblRvVm9sdW1lc01vZGVsKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBHZXQgc3RvcmFnZSBwb2xpY2llcy5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFN0b3JhZ2VQb2xpY2llcygpIHtcclxuICAgICAgICAgICAgICAgIFN0b3JhZ2VQb2xpY2llc01vZGVsLmdldCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZvbHVtZUNyZWF0ZUN0cmwucG9saWNpZXMgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYXBwbHlQb2xpY3lTZXR0aW5ncygpIHtcclxuICAgICAgICAgICAgICAgIHZvbHVtZUNyZWF0ZUN0cmwubmV3Vm9sdW1lLnBvbGljeSA9IHZvbHVtZUNyZWF0ZUN0cmwuc2VsZWN0ZWRQb2xpY3kubmFtZTtcclxuICAgICAgICAgICAgICAgIHZvbHVtZUNyZWF0ZUN0cmwubmV3Vm9sdW1lLmJhY2tlbmRzID0gdm9sdW1lQ3JlYXRlQ3RybC5zZWxlY3RlZFBvbGljeS5iYWNrZW5kcztcclxuICAgICAgICAgICAgICAgIHZvbHVtZUNyZWF0ZUN0cmwubmV3Vm9sdW1lLmRyaXZlciA9IHZvbHVtZUNyZWF0ZUN0cmwuc2VsZWN0ZWRQb2xpY3kuZHJpdmVyO1xyXG4gICAgICAgICAgICAgICAgdm9sdW1lQ3JlYXRlQ3RybC5uZXdWb2x1bWUuY3JlYXRlID0gdm9sdW1lQ3JlYXRlQ3RybC5zZWxlY3RlZFBvbGljeS5jcmVhdGU7XHJcbiAgICAgICAgICAgICAgICB2b2x1bWVDcmVhdGVDdHJsLm5ld1ZvbHVtZS5ydW50aW1lID0gdm9sdW1lQ3JlYXRlQ3RybC5zZWxlY3RlZFBvbGljeS5ydW50aW1lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVWb2x1bWUoKSB7XHJcbiAgICAgICAgICAgICAgICAvL2Zvcm0gY29udHJvbGxlciBpcyBpbmplY3RlZCBieSB0aGUgaHRtbCB0ZW1wbGF0ZVxyXG4gICAgICAgICAgICAgICAgLy9jaGVja2luZyBpZiBhbGwgdmFsaWRhdGlvbnMgaGF2ZSBwYXNzZWRcclxuICAgICAgICAgICAgICAgIGlmICh2b2x1bWVDcmVhdGVDdHJsLmZvcm0uJHZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHZvbHVtZUNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKHZvbHVtZUNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5UG9saWN5U2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBWb2x1bWVzTW9kZWwuY3JlYXRlKHZvbHVtZUNyZWF0ZUN0cmwubmV3Vm9sdW1lKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcih2b2x1bWVDcmVhdGVDdHJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9Wb2x1bWVzTW9kZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHZvbHVtZUNyZWF0ZUN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Iodm9sdW1lQ3JlYXRlQ3RybCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIodm9sdW1lQ3JlYXRlQ3RybCk7XHJcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3Iodm9sdW1lQ3JlYXRlQ3RybCk7XHJcbiAgICAgICAgICAgICAgICB2b2x1bWVDcmVhdGVDdHJsLm5ld1ZvbHVtZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBcImJhY2tlbmRzXCI6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZHJpdmVyXCI6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlXCI6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwicnVudGltZVwiOiB7fVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdm9sdW1lQ3JlYXRlQ3RybC5jcmVhdGVWb2x1bWUgPSBjcmVhdGVWb2x1bWU7XHJcbiAgICAgICAgICAgIHZvbHVtZUNyZWF0ZUN0cmwuY2FuY2VsQ3JlYXRpbmcgPSBjYW5jZWxDcmVhdGluZztcclxuXHJcbiAgICAgICAgICAgIGdldFN0b3JhZ2VQb2xpY2llcygpO1xyXG5cclxuICAgICAgICAgICAgcmVzZXRGb3JtKCk7XHJcbiAgICAgICAgfV0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNC8xNS8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYudm9sdW1lcycpXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnZvbHVtZXMuZGV0YWlscycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kZXRhaWxzLzprZXknLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZvbHVtZURldGFpbHNDdHJsIGFzIHZvbHVtZURldGFpbHNDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndm9sdW1lcy92b2x1bWVkZXRhaWxzLmh0bWwnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignVm9sdW1lRGV0YWlsc0N0cmwnLFxyXG4gICAgICAgIFsnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICckc2NvcGUnLCAnJGludGVydmFsJywgJyRodHRwJywgJ1ZvbHVtZXNNb2RlbCcsICdWb2x1bWVTZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRzY29wZSwgJGludGVydmFsLCAkaHR0cCwgVm9sdW1lc01vZGVsLCBWb2x1bWVTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHZhciB2b2x1bWVEZXRhaWxzQ3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub1ZvbHVtZXMoKSB7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LnZvbHVtZXMubGlzdCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVZvbHVtZSgpIHtcclxuICAgICAgICAgICAgICAgIFZvbHVtZXNNb2RlbC5kZWxldGUodm9sdW1lRGV0YWlsc0N0cmwudm9sdW1lKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub1ZvbHVtZXMoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRWb2x1bWVJbmZvKHJlbG9hZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRva2VucyA9ICRzdGF0ZVBhcmFtcy5rZXkuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9e307XHJcbiAgICAgICAgICAgICAgICBtb2RlbC5wb2xpY3kgPSB0b2tlbnNbMF07XHJcbiAgICAgICAgICAgICAgICBtb2RlbC5uYW1lID0gdG9rZW5zWzFdO1xyXG4gICAgICAgICAgICAgICAgVm9sdW1lc01vZGVsLmdldE1vZGVsKG1vZGVsLCByZWxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZvbHVtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b2x1bWVEZXRhaWxzQ3RybC52b2x1bWUgPSB2b2x1bWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZvbHVtZVVzZUluZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Vm9sdW1lU25hcHNob3RzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFZvbHVtZVVzZUluZm8oKSB7XHJcbiAgICAgICAgICAgICAgICBWb2x1bWVTZXJ2aWNlLmdldFZvbHVtZVVzZUluZm8odm9sdW1lRGV0YWlsc0N0cmwudm9sdW1lKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2b2x1bWVEZXRhaWxzQ3RybC52b2x1bWVVc2UgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vUmV0dXJucyBlcnJvciBpZiB2b2x1bWUgaXMgbm90IG1vdW50ZWQgYnkgYW55IGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFZvbHVtZVNuYXBzaG90cygpIHtcclxuICAgICAgICAgICAgICAgIFZvbHVtZVNlcnZpY2UuZ2V0Vm9sdW1lU25hcHNob3RzKHZvbHVtZURldGFpbHNDdHJsLnZvbHVtZSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm9sdW1lRGV0YWlsc0N0cmwuc25hcHNob3RzID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvcHlTbmFwc2hvdChzbmFwc2hvdCwgbmV3Vm9sdW1lKSB7XHJcbiAgICAgICAgICAgICAgICBWb2x1bWVzTW9kZWwuY29weShtb2RlbCwgc25hcHNob3QsIG5ld1ZvbHVtZSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZvbHVtZURldGFpbHNDdHJsLmRlbGV0ZVZvbHVtZSA9IGRlbGV0ZVZvbHVtZTtcclxuICAgICAgICAgICAgdm9sdW1lRGV0YWlsc0N0cmwuY29weVNuYXBzaG90ID0gY29weVNuYXBzaG90O1xyXG5cclxuICAgICAgICAgICAgLy9Mb2FkIGZyb20gY2FjaGUgZm9yIHF1aWNrIGRpc3BsYXkgaW5pdGlhbGx5XHJcbiAgICAgICAgICAgIGdldFZvbHVtZUluZm8oZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb21pc2U7XHJcbiAgICAgICAgICAgIC8vRG9uJ3QgZG8gYXV0by1yZWZyZXNoIGlmIG9uZSBpcyBhbHJlYWR5IGluIHByb2dyZXNzXHJcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQocHJvbWlzZSkpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldFZvbHVtZUluZm8odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vc3RvcCBwb2xsaW5nIHdoZW4gdXNlciBtb3ZlcyBhd2F5IGZyb20gdGhlIHBhZ2VcclxuICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfV0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiAzLzIyLzE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi52b2x1bWVzJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUudm9sdW1lcy5saXN0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2xpc3QnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZvbHVtZUxpc3RDdHJsIGFzIHZvbHVtZUxpc3RDdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndm9sdW1lcy92b2x1bWVsaXN0Lmh0bWwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfV0pXHJcbiAgICAuY29udHJvbGxlcignVm9sdW1lTGlzdEN0cmwnLCBbJyRzY29wZScsICckaW50ZXJ2YWwnLCAnJGZpbHRlcicsICdWb2x1bWVzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRpbnRlcnZhbCwgJGZpbHRlciwgVm9sdW1lc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xyXG4gICAgICAgICAgICB2YXIgdm9sdW1lTGlzdEN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Vm9sdW1lcyhyZWxvYWQpIHtcclxuICAgICAgICAgICAgICAgIFZvbHVtZXNNb2RlbC5nZXQocmVsb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcih2b2x1bWVMaXN0Q3RybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvbHVtZUxpc3RDdHJsLnZvbHVtZXMgPSAkZmlsdGVyKCdvcmRlckJ5JykocmVzdWx0LCAnbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIodm9sdW1lTGlzdEN0cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL0xvYWQgZnJvbSBjYWNoZSBmb3IgcXVpY2sgZGlzcGxheSBpbml0aWFsbHlcclxuICAgICAgICAgICAgZ2V0Vm9sdW1lcyhmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZTtcclxuICAgICAgICAgICAgLy9Eb24ndCBkbyBhdXRvLXJlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcclxuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0Vm9sdW1lcyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0sIENvbnRpdkdsb2JhbHMuUkVGUkVTSF9JTlRFUlZBTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9zdG9wIHBvbGxpbmcgd2hlbiB1c2VyIG1vdmVzIGF3YXkgZnJvbSB0aGUgcGFnZVxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDYvNS8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYudm9sdW1lcycpXHJcbiAgICAuZmFjdG9yeSgnVm9sdW1lU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Vm9sdW1lVXNlSW5mbyh2b2x1bWUpIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgdmFyIHVybCA9IENvbnRpdkdsb2JhbHMuVk9MVU1FU19VU0VTX0VORFBPSU5UXHJcbiAgICAgICAgICAgICAgICArIHZvbHVtZS5wb2xpY3lcclxuICAgICAgICAgICAgICAgICsgJy8nICsgdm9sdW1lLm5hbWU7XHJcbiAgICAgICAgICAgICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAvL1JldHVybnMgZXJyb3IgaWYgdm9sdW1lIGlzIG5vdCBtb3VudGVkIGJ5IGFueSBjb250YWluZXJcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFZvbHVtZVNuYXBzaG90cyh2b2x1bWUpIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgdmFyIHVybCA9IENvbnRpdkdsb2JhbHMuVk9MVU1FU19TTkFQU0hPVFNfRU5EUE9JTlRcclxuICAgICAgICAgICAgICAgICsgdm9sdW1lLnBvbGljeVxyXG4gICAgICAgICAgICAgICAgKyAnLycgKyB2b2x1bWUubmFtZTtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC5kYXRhKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdldFZvbHVtZVVzZUluZm86IGdldFZvbHVtZVVzZUluZm8sXHJcbiAgICAgICAgICAgIGdldFZvbHVtZVNuYXBzaG90czogZ2V0Vm9sdW1lU25hcHNob3RzXHJcbiAgICAgICAgfVxyXG4gICAgfV0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA2LzIvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZShcImNvbnRpdi5kaXJlY3RpdmVzXCIpXHJcbiAgICAuZGlyZWN0aXZlKFwiY3R2Q29sbGFwc2libGVcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0AnLFxyXG4gICAgICAgICAgICAgICAgY29sbGFwc2VkOiAnQCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2NvcGUuY29sbGFwc2VkID09PSB1bmRlZmluZWQpIHNjb3BlLmNvbGxhcHNlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9kaXJlY3RpdmVzL2NvbGxhcHNpYmxlLmh0bWwnXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA0LzI4LzE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoXCJjb250aXYuZGlyZWN0aXZlc1wiKVxyXG4gICAgLmRpcmVjdGl2ZShcImN0dkVycm9yXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyOiAnQCcsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJz0nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5maW5kKCdpJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnbmctaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2RpcmVjdGl2ZXMvZXJyb3JtZXNzYWdlLmh0bWwnXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzExLzE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoXCJjb250aXYuZGlyZWN0aXZlc1wiKVxyXG4gICAgLmRpcmVjdGl2ZShcImN0dk5hbWV2YWx1ZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICBpdGVtczogJz0nLFxyXG4gICAgICAgICAgICAgICBuYW1laGVhZGVyOiAnQCcsLy9GaWVsZCBuYW1lIHRvIGRpc3BsYXkgZm9yIGtleVxyXG4gICAgICAgICAgICAgICB2YWx1ZWhlYWRlcjogJ0AnLC8vRmllbGQgbmFtZSB0byBkaXNwbGF5IGZvciB2YWx1ZVxyXG4gICAgICAgICAgICAgICB0eXBlOiAnQCcsLy8ndGV4dCcgb3IgJ3NlbGVjdCcgdG8gY2hvb3NlIGlucHV0IG9yIHNlbGVjdCBodG1sIHRhZyBmb3Iga2V5XHJcbiAgICAgICAgICAgICAgIG9wdGlvbnM6ICc9Jy8vVG8gYmUgdXNlZCB3aGVuIHR5cGUgaXMgJ3NlbGVjdCdcclxuICAgICAgICAgICB9LFxyXG4gICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgKiBDb21wYXJlIGlmIHR3byBpdGVtcyBoYXZlIHNhbWUgbmFtZVxyXG4gICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsMVxyXG4gICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsMlxyXG4gICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXBhcmUodmFsMSwgdmFsMikge1xyXG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbDEubmFtZSA9PSB2YWwyLm5hbWU7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0TmV3SXRlbSgpIHtcclxuICAgICAgICAgICAgICAgICAgIHNjb3BlLm5ld0l0ZW0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcnXHJcbiAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICBmdW5jdGlvbiBpc0VtcHR5SXRlbShpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gKGl0ZW0ubmFtZSA9PT0gJycgJiYgaXRlbS52YWx1ZSA9PT0gJycpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICBzY29wZS5hZGQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgIGlmIChpc0VtcHR5SXRlbShzY29wZS5uZXdJdGVtKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKHNjb3BlLml0ZW0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLml0ZW0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlcyBleGlzdGluZyBpdGVtIHdpdGggdGhlIHNhbWUgbmFtZSBmaXJzdCBpZiBpdCBleGlzdHMuXHJcbiAgICAgICAgICAgICAgICAgICBfLnB1bGxBbGxXaXRoKHNjb3BlLml0ZW1zLCBbc2NvcGUubmV3SXRlbV0sIGNvbXBhcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgc2NvcGUuaXRlbXMucHVzaChzY29wZS5uZXdJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgIHJlc2V0TmV3SXRlbSgpO1xyXG4gICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgc2NvcGUucmVtb3ZlID0gZnVuY3Rpb24ocGFzc2VkSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgXy5yZW1vdmUoc2NvcGUuaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PSBwYXNzZWRJdGVtLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgcmVzZXROZXdJdGVtKCk7XHJcblxyXG4gICAgICAgICAgICAgICBpZiAoc2NvcGUubmFtZWhlYWRlciA9PT0gdW5kZWZpbmVkKSBzY29wZS5uYW1laGVhZGVyID0gJ05hbWUnO1xyXG4gICAgICAgICAgICAgICBpZiAoc2NvcGUudmFsdWVoZWFkZXIgPT09IHVuZGVmaW5lZCkgc2NvcGUudmFsdWVoZWFkZXIgPSAnVmFsdWUnO1xyXG4gICAgICAgICAgICAgICBpZiAoc2NvcGUudHlwZSA9PT0gdW5kZWZpbmVkKSBzY29wZS50eXBlID0gJ3RleHQnO1xyXG4gICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2RpcmVjdGl2ZXMvbmFtZXZhbHVlLmh0bWwnXHJcbiAgICAgICB9XHJcbiAgICB9KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvNC8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKFwiY29udGl2LmRpcmVjdGl2ZXNcIilcclxuICAgIC5kaXJlY3RpdmUoXCJjdHZUYWJsZVwiLCBbJ2ZpbHRlckZpbHRlcicsICdsaW1pdFRvRmlsdGVyJywgZnVuY3Rpb24gKGZpbHRlckZpbHRlciwgbGltaXRUb0ZpbHRlcikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtczogJz0nLFxyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRpdGVtczogJz0nLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ0AnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsIGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YWJsZUN0cmwgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdGFibGVDdHJsLmNodW5rcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGFibGVDdHJsLnBhZ2VObyA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgdGFibGVDdHJsLnNpemUgPSBwYXJzZUludCgkc2NvcGUuc2l6ZSwgMTApO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHRhYmxlQ3RybC5zaXplKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5zaXplID0gMTI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiBBbHdheXMgY2FsbCBzaG93Q2h1bmsgd2l0aCBib3RoIHBhcmFtZXRlcnMuXHJcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcGFnZU5vXHJcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gc2VhcmNoVGV4dFxyXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dDaHVuayhwYWdlTm8sIHNlYXJjaFRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwuc2VhcmNoVGV4dCA9IHNlYXJjaFRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlTm8gPT09IHVuZGVmaW5lZCB8fCBwYWdlTm8gPCAwKSBwYWdlTm8gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5wYWdlTm8gPSBwYWdlTm87XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuaXRlbXMgIT09IHVuZGVmaW5lZCkgey8vVE9ETzogQ2hlY2sgd2h5IGl0ZW1zIGFyZSB1bmRlZmluZWQgZHVyaW5nIGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2hUZXh0RmlsdGVyZWRJdGVtcyA9IGZpbHRlckZpbHRlcigkc2NvcGUuaXRlbXMsIHRhYmxlQ3RybC5zZWFyY2hUZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub09mQ2h1bmtzID0gTWF0aC5jZWlsKHNlYXJjaFRleHRGaWx0ZXJlZEl0ZW1zLmxlbmd0aCAvIHRhYmxlQ3RybC5zaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vT2ZDaHVua3MgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9PZkNodW5rcyA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLmNodW5rcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vT2ZDaHVua3M7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLmNodW5rcy5wdXNoKHtzZWxlY3RlZDogZmFsc2UsIHBhZ2VObzogaX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0FmdGVyIGZpbHRlcmluZyBudW1iZXIgb2YgY2h1bmtzIGNvdWxkIGNoYW5nZSBzbyByZXNldCBwYWdlIG5vIGlmIGl0IGlzIGdyZWF0ZXIgdGhhbiBubyBvZiBjaHVua3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VObyA+PSB0YWJsZUN0cmwuY2h1bmtzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLnBhZ2VObyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5jaHVua3NbdGFibGVDdHJsLnBhZ2VOb10uc2VsZWN0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9VcGRhdGUgbnVtYmVyIG9mIGNodW5rcyBmb3IgcGFnaW5hdGlvbiBtZW51XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZUN0cmwuY2h1bmtzLmxlbmd0aCA+IDUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzbGljZVN0YXJ0LCBzbGljZUVuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlU3RhcnQgPSB0YWJsZUN0cmwucGFnZU5vIC0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlRW5kID0gdGFibGVDdHJsLnBhZ2VObyArIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2xpY2VTdGFydCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGljZUVuZCA9IHNsaWNlRW5kIC0gc2xpY2VTdGFydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGljZVN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGljZUVuZCA+IHRhYmxlQ3RybC5jaHVua3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpY2VTdGFydCA9IHNsaWNlU3RhcnQgLSAoc2xpY2VFbmQgLSB0YWJsZUN0cmwuY2h1bmtzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpY2VFbmQgPSB0YWJsZUN0cmwuY2h1bmtzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uTWVudS5jaHVua3MgPSB0YWJsZUN0cmwuY2h1bmtzLnNsaWNlKHNsaWNlU3RhcnQsIHNsaWNlRW5kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uTWVudS5jaHVua3MgPSB0YWJsZUN0cmwuY2h1bmtzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwuZmlsdGVyZWRJdGVtcyA9IGxpbWl0VG9GaWx0ZXIoc2VhcmNoVGV4dEZpbHRlcmVkSXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5wYWdlTm8gKiB0YWJsZUN0cmwuc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJlZGl0ZW1zID0gdGFibGVDdHJsLmZpbHRlcmVkSXRlbXM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2hvd1ByZXZDaHVuaygpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldkNodW5rO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZUN0cmwucGFnZU5vIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkNodW5rID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2Q2h1bmsgPSB0YWJsZUN0cmwucGFnZU5vIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dDaHVuayhwcmV2Q2h1bmspO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dOZXh0Q2h1bmsoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRDaHVuaztcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Q2h1bmsgPSB0YWJsZUN0cmwucGFnZU5vICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dENodW5rID4gdGFibGVDdHJsLmNodW5rcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRDaHVuayA9IHRhYmxlQ3RybC5jaHVua3MubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dDaHVuayhuZXh0Q2h1bmspO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogU2F2ZSBwYWdpbmF0aW9uIHNjb3BlIHRvIHByb3ZpZGUgY2h1bmsgaW5mb3JtYXRpb24gdG8gcGFnaW5hdGlvbiBtZW51LlxyXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIG1lbnVcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkUGFnaW5hdGlvbk1lbnUobWVudSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uTWVudSA9IG1lbnU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGFibGVDdHJsLnNob3dDaHVuayA9IHNob3dDaHVuaztcclxuICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5zaG93TmV4dENodW5rID0gc2hvd05leHRDaHVuaztcclxuICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5zaG93UHJldkNodW5rID0gc2hvd1ByZXZDaHVuaztcclxuICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5hZGRQYWdpbmF0aW9uTWVudSA9IGFkZFBhZ2luYXRpb25NZW51O1xyXG4gICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgdGFibGVDdHJsKSB7XHJcbiAgICAgICAgICAgICAgICAvL1dhdGNoIGZvciBpdGVtcyBhcyB0aGV5IHdpbGwgYmUgYXV0byByZWZyZXNoZWRcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRwYXJlbnQuJHdhdGNoKGF0dHJzLml0ZW1zLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLnNob3dDaHVuayh0YWJsZUN0cmwucGFnZU5vLCB0YWJsZUN0cmwuc2VhcmNoVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9kaXJlY3RpdmVzL3RhYmxlLmh0bWwnXHJcbiAgICAgICAgfVxyXG4gICAgfV0pXHJcbiAgICAuZGlyZWN0aXZlKFwiY3R2VGhlYWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPHRoZWFkIG5nLXRyYW5zY2x1ZGU+PC90aGVhZD4nXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIC5kaXJlY3RpdmUoXCJjdHZUaFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGNsYXNzOiAnQCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8dGggbmctY2xhc3M9XCJjbGFzc1wiIG5nLXRyYW5zY2x1ZGU+PC90aD4nXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIC5kaXJlY3RpdmUoXCJjdHZUYm9keVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgc2NvcGU6IHt9LFxyXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzx0Ym9keSBuZy10cmFuc2NsdWRlPjwvdGJvZHk+J1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuZGlyZWN0aXZlKFwiY3R2VGZvb3RcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcclxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8dGZvb3QgbmctdHJhbnNjbHVkZT48L3Rmb290PidcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgLmRpcmVjdGl2ZShcImN0dlRzZWFyY2hcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICdeXmN0dlRhYmxlJyxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnQCcsXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnQCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyLCB0YWJsZUN0cmwpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLnNob3dDaHVuayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwuc2hvd0NodW5rKHRhYmxlQ3RybC5wYWdlTm8sIHNjb3BlLnNlYXJjaFRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvZGlyZWN0aXZlcy9zZWFyY2hpbnB1dC5odG1sJ1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuZGlyZWN0aXZlKFwiY3R2VHJcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6ICd0cnVlJyxcclxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2NvcGU6IHt9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzx0ciBuZy10cmFuc2NsdWRlPjwvdHI+J1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuZGlyZWN0aXZlKFwiY3R2VGRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzx0ZCBuZy10cmFuc2NsdWRlPjwvdGQ+J1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuZGlyZWN0aXZlKFwiY3R2VHBhZ2luYXRpb25cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICdeXmN0dlRhYmxlJyxcclxuICAgICAgICAgICAgc2NvcGU6IHt9LFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIHRhYmxlQ3RybCkge1xyXG4gICAgICAgICAgICAgICAgdGFibGVDdHJsLmFkZFBhZ2luYXRpb25NZW51KHNjb3BlKTtcclxuICAgICAgICAgICAgICAgIC8vc2hvd0NodW5rKCkgd2lsbCBjYWxjdWxhdGUgYW5kIHNldCBjaHVua3MgaW4gc2NvcGVcclxuICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5zaG93Q2h1bmsodGFibGVDdHJsLnBhZ2VObywgdGFibGVDdHJsLnNlYXJjaFRleHQpO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuc2hvd0NodW5rID0gZnVuY3Rpb24gKHBhZ2VObykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5zaG93Q2h1bmsocGFnZU5vLCB0YWJsZUN0cmwuc2VhcmNoVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuc2hvd1ByZXZDaHVuayA9IHRhYmxlQ3RybC5zaG93UHJldkNodW5rO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuc2hvd05leHRDaHVuayA9IHRhYmxlQ3RybC5zaG93TmV4dENodW5rO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvZGlyZWN0aXZlcy9wYWdpbmF0aW9ubWVudS5odG1sJ1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy8xMS8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubW9kZWxzJylcclxuICAgIC5mYWN0b3J5KCdBcHBsaWNhdGlvbkdyb3Vwc01vZGVsJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcclxuICAgICAgICB2YXIgZ3JvdXBzbW9kZWwgPSBuZXcgQ29sbGVjdGlvbigkaHR0cCwgJHEsIENvbnRpdkdsb2JhbHMuQVBQTElDQVRJT05HUk9VUFNfRU5EUE9JTlQpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZW5lcmF0ZSBrZXkgZm9yIGFwcGxpY2F0aW9uIGdyb3VwXHJcbiAgICAgICAgICogQHBhcmFtIGdyb3VwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ3JvdXBzbW9kZWwuZ2VuZXJhdGVLZXkgPSBmdW5jdGlvbiAoZ3JvdXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwLnRlbmFudE5hbWUgKyAnOicgKyBncm91cC5ncm91cE5hbWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGdyb3Vwc21vZGVsO1xyXG4gICAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKCdjb250aXYubW9kZWxzJylcclxuICAgIC5mYWN0b3J5KCdOZXR3b3Jrc01vZGVsJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24oJGh0dHAsICRxLCBDb250aXZHbG9iYWxzLk5FVFdPUktTX0VORFBPSU5UKTtcclxuICAgIH1dKTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5tb2RlbHMnKVxyXG4gICAgLmZhY3RvcnkoJ09yZ2FuaXphdGlvbnNNb2RlbCcsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKCRodHRwLCAkcSwgQ29udGl2R2xvYmFscy5PUkdBTklaQVRJT05TX0VORFBPSU5UKTtcclxuICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2Lm1vZGVscycpXHJcbiAgICAuZmFjdG9yeSgnUG9saWNpZXNNb2RlbCcsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XHJcbiAgICAgICAgdmFyIHBvbGljaWVzbW9kZWwgPSBuZXcgQ29sbGVjdGlvbigkaHR0cCwgJHEsIENvbnRpdkdsb2JhbHMuUE9MSUNJRVNfRU5EUE9JTlQpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZW5lcmF0ZSBwb2xpY3kga2V5IHRvIHNhdmUgcG9saWN5IG9uIHNlcnZlclxyXG4gICAgICAgICAqIEBwYXJhbSBwb2xpY3lcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHBvbGljaWVzbW9kZWwuZ2VuZXJhdGVLZXkgPSBmdW5jdGlvbiAocG9saWN5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwb2xpY3kudGVuYW50TmFtZSArICc6JyArIHBvbGljeS5wb2xpY3lOYW1lO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBwb2xpY2llc21vZGVsO1xyXG4gICAgfV0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy84LzE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5tb2RlbHMnKVxyXG4gICAgLmZhY3RvcnkoJ1J1bGVzTW9kZWwnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xyXG4gICAgICAgIHZhciBydWxlc21vZGVsID0gbmV3IENvbGxlY3Rpb24oJGh0dHAsICRxLCBDb250aXZHbG9iYWxzLlJVTEVTX0VORFBPSU5UKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGluY29taW5nIHJ1bGVzIGZvciBhIGdpdmVuIHBvbGljeSBhbmQgYSB0ZW5hbnRcclxuICAgICAgICAgKiBAcGFyYW0gcG9saWN5TmFtZVxyXG4gICAgICAgICAqIEBwYXJhbSB0ZW5hbnROYW1lXHJcbiAgICAgICAgICogQHJldHVybnMgeyp8d2ViZHJpdmVyLnByb21pc2UuUHJvbWlzZX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBydWxlc21vZGVsLmdldEluY29taW5nUnVsZXMgPSBmdW5jdGlvbiAocG9saWN5TmFtZSwgdGVuYW50TmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcnVsZXNtb2RlbC5nZXQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfLmZpbHRlcihyZXN1bHQsIHtcclxuICAgICAgICAgICAgICAgICAgICAncG9saWN5TmFtZSc6IHBvbGljeU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RpcmVjdGlvbic6ICdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RlbmFudE5hbWUnOiB0ZW5hbnROYW1lXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBvdXRnb2luZyBydWxlcyBmb3IgYSBnaXZlbiBwb2xpY3kgYW5kIGEgdGVuYW50XHJcbiAgICAgICAgICogQHBhcmFtIHBvbGljeU5hbWVcclxuICAgICAgICAgKiBAcGFyYW0gdGVuYW50TmFtZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfHdlYmRyaXZlci5wcm9taXNlLlByb21pc2V9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcnVsZXNtb2RlbC5nZXRPdXRnb2luZ1J1bGVzID0gZnVuY3Rpb24gKHBvbGljeU5hbWUsIHRlbmFudE5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJ1bGVzbW9kZWwuZ2V0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5maWx0ZXIocmVzdWx0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3BvbGljeU5hbWUnOiBwb2xpY3lOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICdkaXJlY3Rpb24nOiAnb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAndGVuYW50TmFtZSc6IHRlbmFudE5hbWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2VuZXJhdGUgcnVsZSBrZXkgdG8gc2F2ZSBydWxlIG9uIHNlcnZlclxyXG4gICAgICAgICAqIEBwYXJhbSBydWxlXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBydWxlc21vZGVsLmdlbmVyYXRlS2V5ID0gZnVuY3Rpb24gKHJ1bGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJ1bGUudGVuYW50TmFtZSArICc6JyArIHJ1bGUucG9saWN5TmFtZSArICc6JyArIHJ1bGUucnVsZUlkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBydWxlc21vZGVsO1xyXG4gICAgfV0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzExLzE2LlxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5tb2RlbHMnKVxyXG4gICAgLmZhY3RvcnkoJ1NlcnZpY2VsYnNNb2RlbCcsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKCRodHRwLCAkcSwgQ29udGl2R2xvYmFscy5TRVJWSUNFTEJTX0VORFBPSU5UKTtcclxuICAgIH1dKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDQvMTgvMTYuXHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm1vZGVscycpXHJcbiAgICAuZmFjdG9yeSgnU3RvcmFnZVBvbGljaWVzTW9kZWwnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0b3JhZ2VQb2xpY2llc0NvbGxlY3Rpb24gZXh0ZW5kcyBmcm9tIEJhc2VDb2xsZWN0aW9uXHJcbiAgICAgICAgICogQHBhcmFtICRodHRwXHJcbiAgICAgICAgICogQHBhcmFtICRxXHJcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gU3RvcmFnZVBvbGljaWVzQ29sbGVjdGlvbigkaHR0cCwgJHEpIHtcclxuICAgICAgICAgICAgQ29sbGVjdGlvbi5jYWxsKHRoaXMsICRodHRwLCAkcSwgQ29udGl2R2xvYmFscy5TVE9SQUdFUE9MSUNJRVNfRU5EUE9JTlQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU3RvcmFnZVBvbGljaWVzQ29sbGVjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENvbGxlY3Rpb24ucHJvdG90eXBlKTtcclxuXHJcbiAgICAgICAgU3RvcmFnZVBvbGljaWVzQ29sbGVjdGlvbi5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKG1vZGVsKSB7XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHVybCA9IGNvbGxlY3Rpb24udXJsICsgbW9kZWwubmFtZTtcclxuICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb24ucHJvdG90eXBlLmNyZWF0ZS5jYWxsKGNvbGxlY3Rpb24sIG1vZGVsLCB1cmwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFN0b3JhZ2VQb2xpY2llc0NvbGxlY3Rpb24ucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAobW9kZWwpIHtcclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBjb2xsZWN0aW9uLnVybCArIG1vZGVsLm5hbWU7XHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uJGh0dHAucG9zdCh1cmwsIG1vZGVsKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5yZW1vdmUoY29sbGVjdGlvbi5tb2RlbHMsIGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm5hbWUgPT0gbW9kZWwubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLm1vZGVscy5wdXNoKG1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBwb2xpY2llc21vZGVsID0gbmV3IFN0b3JhZ2VQb2xpY2llc0NvbGxlY3Rpb24oJGh0dHAsICRxKTtcclxuICAgICAgICByZXR1cm4gcG9saWNpZXNtb2RlbDtcclxuICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy8yMi8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubW9kZWxzJylcclxuICAgIC5mYWN0b3J5KCdWb2x1bWVzTW9kZWwnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFZvbHVtZXNDb2xsZWN0aW9uIGV4dGVuZHMgZnJvbSBCYXNlQ29sbGVjdGlvblxyXG4gICAgICAgICAqIEBwYXJhbSAkaHR0cFxyXG4gICAgICAgICAqIEBwYXJhbSAkcVxyXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFZvbHVtZXNDb2xsZWN0aW9uKCRodHRwLCAkcSkge1xyXG4gICAgICAgICAgICBDb2xsZWN0aW9uLmNhbGwodGhpcywgJGh0dHAsICRxLCBDb250aXZHbG9iYWxzLlZPTFVNRVNfRU5EUE9JTlQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVm9sdW1lc0NvbGxlY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDb2xsZWN0aW9uLnByb3RvdHlwZSk7XHJcblxyXG4gICAgICAgIFZvbHVtZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAobW9kZWwpIHtcclxuICAgICAgICAgICAgdmFyIHZvbHVtZXNjb2xsZWN0aW9uID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gdm9sdW1lc2NvbGxlY3Rpb24uJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgdmFyIHVybCA9IENvbnRpdkdsb2JhbHMuVk9MVU1FU19ERUxFVEVfRU5EUE9JTlQ7XHJcbiAgICAgICAgICAgIC8vZGVsZXRlIGVuZHBvaW50IGV4cGVjdHMgdm9sdW1lIHByb3BlcnR5IGluIGFkZGl0aW9uIHRvIHBvbGljeS4gVE9ETyBhc2sgdG8gYmUgZml4ZWRcclxuICAgICAgICAgICAgbW9kZWwudm9sdW1lID0gbW9kZWwubmFtZTtcclxuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IG1vZGVsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZvbHVtZXNjb2xsZWN0aW9uLiRodHRwLmRlbGV0ZSh1cmwsIGNvbmZpZylcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8ucmVtb3ZlKHZvbHVtZXNjb2xsZWN0aW9uLm1vZGVscywgZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChuLm5hbWUgPT0gbW9kZWwubmFtZSAmJiBuLnBvbGljeSA9PSBtb2RlbC5wb2xpY3kpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodm9sdW1lc2NvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCh2b2x1bWVzY29sbGVjdGlvbi5leHRyYWN0KHJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgVm9sdW1lc0NvbGxlY3Rpb24ucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChtb2RlbCkge1xyXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBDb250aXZHbG9iYWxzLlZPTFVNRVNfQ1JFQVRFX0VORFBPSU5UO1xyXG4gICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbi5wcm90b3R5cGUuY3JlYXRlLmNhbGwoY29sbGVjdGlvbiwgbW9kZWwsIHVybCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgVm9sdW1lc0NvbGxlY3Rpb24ucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAobW9kZWwsIHNuYXBzaG90LCBuZXdWb2x1bWUpIHtcclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBDb250aXZHbG9iYWxzLlZPTFVNRVNfQ09QWVNOQVBTSE9UU19FTkRQT0lOVDtcclxuICAgICAgICAgICAgdmFyIHZvbGNvcHltb2RlbCA9IHtcclxuICAgICAgICAgICAgICAgIHZvbHVtZTogbW9kZWwubmFtZSxcclxuICAgICAgICAgICAgICAgIHBvbGljeTogbW9kZWwucG9saWN5LFxyXG4gICAgICAgICAgICAgICAgT3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogbmV3Vm9sdW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHNuYXBzaG90OiBzbmFwc2hvdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb2xsZWN0aW9uLiRodHRwLnBvc3QodXJsLCB2b2xjb3B5bW9kZWwpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1RPRE86IEFkZCB0aGUgbmV3IHZvbHVtZSB0byB0aGUgY29sbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIC8vY29sbGVjdGlvbi5tb2RlbHMucHVzaChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgdm9sdW1lc21vZGVsID0gbmV3IFZvbHVtZXNDb2xsZWN0aW9uKCRodHRwLCAkcSk7XHJcbiAgICAgICAgcmV0dXJuIHZvbHVtZXNtb2RlbDtcclxuICAgIH1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNC8yOS8xNi5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdjb250aXYudXRpbHMnKVxyXG4gICAgLmZhY3RvcnkoJ0NSVURIZWxwZXJTZXJ2aWNlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBzdGFydExvYWRlcihjb250cm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnNob3dMb2FkZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzdG9wTG9hZGVyKGNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2hvd0xvYWRlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzaG93U2VydmVyRXJyb3IoY29udHJvbGxlciwgbWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5zaG93U2VydmVyRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5zZXJ2ZXJFcnJvck1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBoaWRlU2VydmVyRXJyb3IoY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5zaG93U2VydmVyRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0TG9hZGVyOiBzdGFydExvYWRlcixcclxuICAgICAgICAgICAgICAgIHN0b3BMb2FkZXI6IHN0b3BMb2FkZXIsXHJcbiAgICAgICAgICAgICAgICBzaG93U2VydmVyRXJyb3I6IHNob3dTZXJ2ZXJFcnJvcixcclxuICAgICAgICAgICAgICAgIGhpZGVTZXJ2ZXJFcnJvcjogaGlkZVNlcnZlckVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICApO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
