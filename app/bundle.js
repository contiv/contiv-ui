function BaseCollection(e,t,o){this.models=[],this.$http=e,this.$q=t,this.url=o}function Collection(e,t,o){BaseCollection.call(this,e,t,o)}angular.module("contiv.directives",[]),angular.module("contiv.models",[]);var ContivGlobals=function(){return{NETWORKS_ENDPOINT:"/netmaster/api/v1/networks/",POLICIES_ENDPOINT:"/netmaster/api/v1/policys/",RULES_ENDPOINT:"/netmaster/api/v1/rules/",APPLICATIONGROUPS_ENDPOINT:"/netmaster/api/v1/endpointGroups/",SERVICELBS_ENDPOINT:"/netmaster/api/v1/serviceLBs/",ORGANIZATIONS_ENDPOINT:"/netmaster/api/v1/tenants/",NETWORK_SETTINGS_ENDPOINT:"/netmaster/api/v1/globals/",BANDWIDTH_ENDPOINT:"/netmaster/api/v1/netprofiles/",VOLUMES_ENDPOINT:"/volmaster/volumes/",VOLUMES_CREATE_ENDPOINT:"/volmaster/volumes/create/",VOLUMES_DELETE_ENDPOINT:"/volmaster/volumes/remove/",VOLUMES_COPYSNAPSHOTS_ENDPOINT:"/volmaster/volumes/copy/",VOLUMES_USES_ENDPOINT:"/volmaster/uses/mounts/",VOLUMES_SNAPSHOTS_ENDPOINT:"/volmaster/snapshots/",STORAGEPOLICIES_ENDPOINT:"/volmaster/policies/",NODES_LIST_ENDPOINT:"/info/nodes",NODES_DISCOVER_ENDPOINT:"/discover/nodes",NODES_COMMISSION_ENDPOINT:"/commission/nodes",NODES_DECOMMISSION_ENDPOINT:"/decommission/nodes",NODES_MAINTENANCE_ENDPOINT:"/maintenance/nodes",NODES_LAST_JOB_ENDPOINT:"/info/job/last",NODES_ACTIVE_JOB_ENDPOINT:"/info/job/active",NODES_SETTINGS_SET_ENDPOINT:"/globals",NODES_SETTINGS_GET_ENDPOINT:"/info/globals",REFRESH_INTERVAL:5e3,CIDR_REGEX:"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(/([0-9]|[1-2][0-9]|3[0-2]))$",VLAN_REGEX:"^([0-9]{1,4}?-[0-9]{1,4}?)$",VXLAN_REGEX:"^([0-9]{1,8}?-[0-9]{1,8}?)$"}}();angular.module("contiv.utils",[]),angular.module("contiv.applicationgroups",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.applicationgroups",{url:"/applicationgroups","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.dashboard",["contiv.models"]),angular.module("contiv.login",["contiv.utils"]),angular.module("contiv.menu",[]),angular.module("contiv.networkpolicies",["contiv.models","contiv.directives","contiv.utils"]),angular.module("contiv.networks",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.networks",{url:"/networks","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.nodes",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.nodes",{url:"/nodes","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.organizations",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.organizations",{url:"/organizations","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.servicelbs",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.servicelbs",{url:"/servicelbs","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.settings",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.settings",{url:"/global","abstract":!0,template:'<div ui-view class="ui container"/>'}).state("contiv.menu.settings.details",{url:"/settings",templateUrl:"settings/settingsmenu.html"}).state("contiv.menu.settings.details.logs",{url:"/logs",controller:"",templateUrl:""}).state("contiv.menu.settings.details.auth",{url:"/auth",controller:"",templateUrl:""}).state("contiv.menu.settings.details.license",{url:"/license",controller:"",templateUrl:""}).state("contiv.menu.settings.details.policies",{url:"/policies",controller:"",templateUrl:""})}]),angular.module("contiv.storagepolicies",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.storagepolicies",{url:"/storagepolicies","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contiv.volumes",["contiv.models","contiv.directives","contiv.utils"]).config(["$stateProvider",function(e){e.state("contiv.menu.volumes",{url:"/volumes","abstract":!0,template:'<div ui-view class="ui container"/>'})}]),angular.module("contivApp",["ui.router","contiv.login","contiv.menu","contiv.dashboard","contiv.applicationgroups","contiv.networks","contiv.networkpolicies","contiv.storagepolicies","contiv.servicelbs","contiv.volumes","contiv.nodes","contiv.organizations","contiv.settings"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("contiv",{url:"","abstract":!0,template:'<div ui-view class="ui fluid container"/>'}),t.otherwise("/")}]),angular.module("contiv.applicationgroups").config(["$stateProvider",function(e){e.state("contiv.menu.applicationgroups.create",{url:"/create",controller:"ApplicationGroupCreateCtrl as applicationGroupCreateCtrl",templateUrl:"applicationgroups/applicationgroupcreate.html"})}]).controller("ApplicationGroupCreateCtrl",["$state","ApplicationGroupsModel","NetworksModel","PoliciesModel","BandwidthModel","RulesModel","ApplicationGroupService","CRUDHelperService",function(e,t,o,n,i,r,l,a){function s(){e.go("contiv.menu.applicationgroups.list")}function c(){s()}function u(){o.get().then(function(e){h.networks=_.filter(e,{tenantName:"default"})})}function d(){n.get().then(function(e){h.isolationPolicies=_.filter(e,{tenantName:"default"})})}function p(){l.addIsolationPolicy(h)}function v(e){l.removeIsolationPolicy(h,e)}function m(){h.form.$valid&&(a.hideServerError(h),a.startLoader(h),h.applicationGroup.networkName=h.selectedNetwork.networkName,h.applicationGroup.netProfile=h.selectedProfile.profileName,h.applicationGroup.key=t.generateKey(h.applicationGroup),t.create(h.applicationGroup).then(function(e){a.stopLoader(h),s()},function(e){a.stopLoader(h),a.showServerError(h,e)}))}function f(){i.get().then(function(e){h.bandwidthProfiles=_.filter(e,{tenantName:"default"})})}function g(){a.stopLoader(h),a.hideServerError(h),h.applicationGroup={groupName:"",networkName:"",policies:[],tenantName:"default"}}var h=this;h.networks=[],h.isolationPolicies=[],h.bandwidthProfiles=[],h.applicationGroup={},h.selectedNetwork={},h.selectedPolicy={},h.selectedPolicies=[],h.selectedProfile={},h.incomingRules=[],h.outgoingRules=[],h.isolationPoliciesVisible=!1,u(),d(),f(),h.createApplicationGroup=m,h.cancelCreating=c,h.addIsolationPolicy=p,h.removeIsolationPolicy=v,g()}]),angular.module("contiv.applicationgroups").config(["$stateProvider",function(e){e.state("contiv.menu.applicationgroups.details",{url:"/details/:key",controller:"ApplicationGroupDetailsCtrl as applicationGroupDetailsCtrl",templateUrl:"applicationgroups/applicationgroupdetails.html"}).state("contiv.menu.applicationgroups.edit",{url:"/edit/:key",controller:"ApplicationGroupDetailsCtrl as applicationGroupDetailsCtrl",templateUrl:"applicationgroups/applicationgroupdetails.html"})}]).controller("ApplicationGroupDetailsCtrl",["$state","$stateParams","ApplicationGroupsModel","PoliciesModel","BandwidthModel","RulesModel","ApplicationGroupService","CRUDHelperService",function(e,t,o,n,i,r,l,a){function s(){e.is("contiv.menu.applicationgroups.edit")?N.mode="edit":N.mode="details"}function c(){e.go("contiv.menu.applicationgroups.list")}function u(){e.go("contiv.menu.applicationgroups.details",{key:N.applicationGroup.key})}function d(){u()}function p(){N.applicationGroup.policies.forEach(function(e){r.getIncomingRules(e,"default").then(function(e){Array.prototype.push.apply(N.incomingRules,e)}),r.getOutgoingRules(e,"default").then(function(e){Array.prototype.push.apply(N.outgoingRules,e)})})}function v(){a.hideServerError(N),a.startLoader(N),o["delete"](N.applicationGroup).then(function(e){a.stopLoader(N),c()},function(e){a.stopLoader(N),a.showServerError(N,e)})}function m(){n.get().then(function(e){N.isolationPolicies=_.filter(e,{tenantName:"default"})})}function f(){l.addIsolationPolicy(N)}function g(e){l.removeIsolationPolicy(N,e)}function h(){a.hideServerError(N),a.startLoader(N),N.applicationGroup.netProfile=N.selectedProfile.profileName,o.save(N.applicationGroup).then(function(e){a.stopLoader(N),u()},function(e){a.stopLoader(N),a.showServerError(N,e)})}function E(){i.get().then(function(e){N.bandwidthProfiles=_.filter(e,{tenantName:"default"})})}var N=this;N.isolationPolicies=[],N.applicationGroup={},N.selectedNetwork={},N.selectedPolicy={},N.selectedPolicies=[],N.selectedProfile={},N.bandwidthProfiles=[],N.incomingRules=[],N.outgoingRules=[],N.isolationPoliciesVisible=!1,a.stopLoader(N),a.hideServerError(N),o.getModelByKey(t.key).then(function(e){N.applicationGroup=e,void 0===N.applicationGroup.policies&&(N.applicationGroup.policies=[]),p()}),E(),m(),N.saveApplicationGroup=h,N.cancelEditing=d,N.addIsolationPolicy=f,N.removeIsolationPolicy=g,N.deleteApplicationGroup=v,s()}]),angular.module("contiv.applicationgroups").config(["$stateProvider",function(e){e.state("contiv.menu.applicationgroups.list",{url:"/list",controller:"ApplicationGroupListCtrl as applicationGroupListCtrl",templateUrl:"applicationgroups/applicationgrouplist.html"})}]).controller("ApplicationGroupListCtrl",["$scope","$interval","$filter","ApplicationGroupsModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.groups=o("orderBy")(e,"groupName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},5e3)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.applicationgroups").factory("ApplicationGroupService",["RulesModel",function(e){function t(t){void 0===_.find(t.selectedPolicies,t.selectedPolicy)&&(t.selectedPolicies.push(t.selectedPolicy),e.getIncomingRules(t.selectedPolicy.policyName,"default").then(function(e){Array.prototype.push.apply(t.incomingRules,e)}),e.getOutgoingRules(t.selectedPolicy.policyName,"default").then(function(e){Array.prototype.push.apply(t.outgoingRules,e)}),t.applicationGroup.policies.push(t.selectedPolicy.policyName))}function o(e,t){_.remove(e.applicationGroup.policies,function(e){return e==t}),_.remove(e.incomingRules,function(e){return e.policyName==t}),_.remove(e.outgoingRules,function(e){return e.policyName==t})}return{addIsolationPolicy:t,removeIsolationPolicy:o}}]),angular.module("contiv.dashboard").config(["$stateProvider",function(e){e.state("contiv.menu.dashboard",{url:"/dashboard",controller:"DashboardCtrl as dashboardCtrl",templateUrl:"dashboard/dashboard.html"})}]).controller("DashboardCtrl",["$scope","$interval","NodesModel","NetworksModel","VolumesModel","ApplicationGroupsModel","PoliciesModel","StoragePoliciesModel",function(e,t,o,n,i,r,l,a){function s(e){o.get(e).then(function(e){c.nodes=e.length}),n.get(e).then(function(e){c.networks=e.length}),i.get(e).then(function(e){c.volumes=e.length}),r.get(e).then(function(e){c.groups=e.length}),l.get(e).then(function(e){c.networkpolicies=e.length}),a.get(e).then(function(e){c.storagepolicies=e.length})}var c=this;c.nodes=0,c.networks=0,c.volumes=0,c.groups=0,c.networkpolicies=0,c.storagepolicies=0,s(!1);var u=t(function(){s(!0)},5e3);e.$on("$destroy",function(){t.cancel(u)})}]),angular.module("contiv.login").config(["$stateProvider",function(e){e.state("contiv.login",{url:"/",templateUrl:"login/login.html",controller:"LoginCtrl as loginCtrl"})}]).controller("LoginCtrl",["$state","CRUDHelperService",function(e,t){function o(){e.go("contiv.menu.dashboard",{username:i.username})}function n(){o()}var i=this;t.stopLoader(i),t.hideServerError(i),i.login=n}]),angular.module("contiv.menu").config(["$stateProvider",function(e){e.state("contiv.menu",{url:"/m",templateUrl:"menu/menu.html",controller:"MenuCtrl as menuCtrl",params:{username:null}})}]).controller("MenuCtrl",["$state","$stateParams",function(e,t){function o(){e.go("contiv.login")}var n=this;n.username=t.username,n.logout=o}]),angular.module("contiv.networkpolicies").directive("ctvBandwidth",function(){return{restrict:"E",scope:{bandwidthPolicy:"=",type:"@"},link:function(e){if(""!=e.bandwidthPolicy.bandwidth){var t=e.bandwidthPolicy.bandwidth.split(" ");e.bandwidthPolicy.bandwidthNumber=t[0],e.bandwidthPolicy.bandwidthUnit=t[1]}"create"==e.type?e.bandwidthPolicy.mode="create":"edit"==e.type&&(e.bandwidthPolicy.mode="edit")},templateUrl:"network_policies/bandwidthinput.html"}}),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.bandwidth.create",{url:"/create",controller:"BandwidthPolicyCreateCtrl as bandwidthPolicyCreateCtrl",templateUrl:"network_policies/bandwidthpolicycreate.html"})}]).controller("BandwidthPolicyCreateCtrl",["$state","$stateParams","BandwidthModel","CRUDHelperService",function(e,t,o,n){function i(){e.go("contiv.menu.networkpolicies.bandwidth.list")}function r(){i()}function l(){s.form.$valid&&(n.hideServerError(s),n.startLoader(s),s.newPolicy.key=o.generateKey(s.newPolicy),s.newPolicy.bandwidth=s.newPolicy.bandwidthNumber+" "+s.newPolicy.bandwidthUnit,o.create(s.newPolicy).then(function(e){n.stopLoader(s),i()},function(e){n.stopLoader(s),n.showServerError(s,e)}))}function a(){n.stopLoader(s),n.hideServerError(s),s.newPolicy={profileName:"",tenantName:"default",bandwidth:"",DSCP:""}}var s=this;s.createPolicy=l,s.cancelCreating=r,a()}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.bandwidth.details",{url:"/details/:key",controller:"BandwidthPolicyDetailsCtrl as bandwidthPolicyDetailsCtrl",templateUrl:"network_policies/bandwidthpolicydetails.html"})}]).config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.bandwidth.edit",{url:"/edit/:key",controller:"BandwidthPolicyDetailsCtrl as bandwidthPolicyDetailsCtrl",templateUrl:"network_policies/bandwidthpolicydetails.html"})}]).controller("BandwidthPolicyDetailsCtrl",["$state","$stateParams","BandwidthModel","CRUDHelperService",function(e,t,o,n){function i(){e.is("contiv.menu.networkpolicies.bandwidth.edit")?u.mode="edit":u.mode="details"}function r(){n.hideServerError(u),n.startLoader(u),o.deleteUsingKey(u.policy.key,"name").then(function(e){n.stopLoader(u),l()},function(e){n.stopLoader(u),n.showServerError(u,e)})}function l(){e.go("contiv.menu.networkpolicies.bandwidth.list")}function a(){e.go("contiv.menu.networkpolicies.bandwidth.details",{key:u.policy.key})}function s(){a()}function c(){u.form.$valid&&(n.hideServerError(u),n.startLoader(u),u.policy.bandwidth=u.policy.bandwidthNumber+" "+u.policy.bandwidthUnit,o.save(u.policy).then(function(e){n.stopLoader(u),a()},function(e){n.stopLoader(u),n.showServerError(u,e)}))}var u=this;u.bandwidthProfiles=[],o.getModelByKey(t.key).then(function(e){u.policy=e}),n.stopLoader(u),n.hideServerError(u),i(),u.deletePolicy=r,u.savePolicy=c,u.cancelEditing=s}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.bandwidth.list",{url:"/list",controller:"BandwidthPolicyListCtrl as bandwidthPolicyListCtrl",templateUrl:"network_policies/bandwidthpolicylist.html"})}]).controller("BandwidthPolicyListCtrl",["$scope","$interval","$filter","BandwidthModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.policies=o("orderBy")(e,"profileName")},function(e){i.stopLoader(l)})}var l=this;r(!0);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.isolation.create",{url:"/create",controller:"IsolationPolicyCreateCtrl as isolationPolicyCreateCtrl",templateUrl:"network_policies/isolationpolicycreate.html"})}]).controller("IsolationPolicyCreateCtrl",["$state","PoliciesModel","CRUDHelperService",function(e,t,o){function n(){e.go("contiv.menu.networkpolicies.isolation.list")}function i(){n()}function r(){a.form.$valid&&(o.hideServerError(a),o.startLoader(a),a.newPolicy.key=t.generateKey(a.newPolicy),t.create(a.newPolicy).then(function(e){o.stopLoader(a),n()},function(e){o.stopLoader(a),o.showServerError(a,e)}))}function l(){o.stopLoader(a),o.hideServerError(a),a.newPolicy={policyName:"",tenantName:"default"}}var a=this;a.createPolicy=r,a.cancelCreating=i,l()}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.isolation.details",{url:"/details/:key",controller:"IsolationPolicyDetailsCtrl as isolationPolicyDetailsCtrl",templateUrl:"network_policies/isolationpolicydetails.html"})}]).config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.isolation.edit",{url:"/edit/:key",controller:"IsolationPolicyDetailsCtrl as isolationPolicyDetailsCtrl",templateUrl:"network_policies/isolationpolicydetails.html"})}]).controller("IsolationPolicyDetailsCtrl",["$state","$stateParams","PoliciesModel","RulesModel","NetworksModel","ApplicationGroupsModel","CRUDHelperService",function(e,t,o,n,i,r,l){function a(){e.go("contiv.menu.networkpolicies.isolation.list")}function s(){e.go("contiv.menu.networkpolicies.isolation.details",{key:O.policy.key})}function c(){s()}function u(){s()}function d(){l.hideServerError(O),l.startLoader(O),o["delete"](O.policy).then(function(e){l.stopLoader(O),a()},function(e){l.stopLoader(O),l.showServerError(O,e)})}function p(){e.is("contiv.menu.networkpolicies.isolation.edit")?O.mode="edit":O.mode="details"}function v(){O.newIncomingRule={ruleId:"",priority:1,action:"allow",fromEndpointGroup:"",fromNetwork:"",fromIPAddress:"",protocol:"tcp",port:"",direction:"in",tenantName:"default",policyName:O.policy.policyName},O.newIncomingSelectedApplicationGroup="",O.disableIncomingNetworkSelection=!1,O.disableIncomingApplicationGroupSelection=!1}function m(){O.newOutgoingRule={ruleId:"",priority:1,action:"allow",toEndpointGroup:"",toNetwork:"",toIPAddress:"",protocol:"tcp",port:"",direction:"out",tenantName:"default",policyName:O.policy.policyName},O.newOutgoingSelectedApplicationGroup="",O.disableOutgoingNetworkSelection=!1,O.disableOutgoingApplicationGroupSelection=!1}function f(){i.get().then(function(e){O.networks=_.filter(e,{tenantName:"default"})})}function g(){r.get().then(function(e){O.applicationGroups=_.filter(e,{tenantName:"default"})})}function h(){null!=O.newOutgoingSelectedApplicationGroup?(O.newOutgoingRule.toEndpointGroup=O.newOutgoingSelectedApplicationGroup.groupName,O.newOutgoingRule.toNetwork="",O.disableOutgoingNetworkSelection=!0):(O.newOutgoingRule.toEndpointGroup="",O.disableOutgoingNetworkSelection=!1)}function E(){null!=O.newIncomingSelectedApplicationGroup?(O.newIncomingRule.fromEndpointGroup=O.newIncomingSelectedApplicationGroup.groupName,O.newIncomingRule.fromNetwork="",O.disableIncomingNetworkSelection=!0):(O.newIncomingRule.fromEndpointGroup="",O.disableIncomingNetworkSelection=!1)}function N(){null!=O.newOutgoingRule.toNetwork?(O.newOutgoingRule.ToEndpointGroup="",O.disableOutgoingApplicationGroupSelection=!0):O.disableOutgoingApplicationGroupSelection=!1}function C(){null!=O.newIncomingRule.fromNetwork?(O.newIncomingRule.fromEndpointGroup="",O.disableIncomingApplicationGroupSelection=!0):O.disableIncomingApplicationGroupSelection=!1}function y(e){e.ruleId=(O.incomingRules.length+O.outgoingRules.length+1).toString()+"-"+Date.now().toString()}function S(){l.hideServerError(O),l.startLoader(O),y(O.newIncomingRule),O.newIncomingRule.key=n.generateKey(O.newIncomingRule),n.create(O.newIncomingRule).then(function(e){l.stopLoader(O),O.incomingRules.push(e),v()},function(e){l.stopLoader(O),l.showServerError(O,e)})}function w(){l.hideServerError(O),l.startLoader(O),y(O.newOutgoingRule),O.newOutgoingRule.key=n.generateKey(O.newOutgoingRule),n.create(O.newOutgoingRule).then(function(e){l.stopLoader(O),O.outgoingRules.push(e),m()},function(e){l.stopLoader(O),l.showServerError(O,e)})}function P(e){l.hideServerError(O),l.startLoader(O),n.deleteUsingKey(e).then(function(t){l.stopLoader(O),_.remove(O.incomingRules,function(t){return t.key==e})},function(e){l.stopLoader(O),l.showServerError(O,e)})}function b(e){l.hideServerError(O),l.startLoader(O),n.deleteUsingKey(e).then(function(t){l.stopLoader(O),_.remove(O.outgoingRules,function(t){return t.key==e})},function(e){l.stopLoader(O),l.showServerError(O,e)})}var O=this;O.networks=[],O.applicationGroups=[],O.disableOutgoingNetworkSelection=!1,O.disableIncomingNetworkSelection=!1,O.disableOutgoingApplicationGroupSelection=!1,O.disableIncomingApplicationGroupSelection=!1,O.newIncomingSelectedApplicationGroup="",O.newOutgoingSelectedApplicationGroup="",l.stopLoader(O),l.hideServerError(O),o.getModelByKey(t.key).then(function(e){O.policy=e,n.getIncomingRules(e.policyName,"default").then(function(e){O.incomingRules=e,v()}),n.getOutgoingRules(e.policyName,"default").then(function(e){O.outgoingRules=e,m()})}),f(),g(),O.deletePolicy=d,O.deleteIncomingRule=P,O.deleteOutgoingRule=b,O.addIncomingRule=S,O.addOutgoingRule=w,O.doneEditing=u,O.cancelEditing=c,O.onChangeOutgoingApplicationGroupSelection=h,O.onChangeIncomingApplicationGroupSelection=E,O.onChangeOutgoingNetworkSelection=N,O.onChangeIncomingNetworkSelection=C,p()}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies.isolation.list",{url:"/list",controller:"IsolationPolicyListCtrl as isolationPolicyListCtrl",templateUrl:"network_policies/isolationpolicylist.html"})}]).controller("IsolationPolicyListCtrl",["$scope","$interval","$filter","PoliciesModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.policies=o("orderBy")(e,"policyName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.networkpolicies").config(["$stateProvider",function(e){e.state("contiv.menu.networkpolicies",{url:"/networkpolicies",controller:"NetworkPoliciesTabsCtrl as networkPoliciesTabsCtrl",templateUrl:"network_policies/networkpoliciestabs.html"}).state("contiv.menu.networkpolicies.isolation",{url:"/isolation","abstract":!0,template:"<ui-view/>"}).state("contiv.menu.networkpolicies.prioritization",{url:"/prioritization",controller:"NetworkPoliciesTabsCtrl as networkPoliciesTabsCtrl",templateUrl:"network_policies/prioritizationpolicylist.html"}).state("contiv.menu.networkpolicies.bandwidth",{url:"/bandwidth","abstract":!0,template:"<ui-view/>"}).state("contiv.menu.networkpolicies.redirection",{url:"/redirection",controller:"NetworkPoliciesTabsCtrl as networkPoliciesTabsCtrl",templateUrl:"network_policies/redirectionpolicylist.html"})}]).controller("NetworkPoliciesTabsCtrl",["$state",function(e){}]),angular.module("contiv.networks").config(["$stateProvider",function(e){e.state("contiv.menu.networks.create",{url:"/create",templateUrl:"networks/networkcreate.html",controller:"NetworkCreateCtrl as networkCreateCtrl"})}]).controller("NetworkCreateCtrl",["$state","$stateParams","NetworksModel","CRUDHelperService",function(e,t,o,n){function i(){e.go("contiv.menu.networks.list")}function r(){i()}function l(){s.form.$valid&&(n.hideServerError(s),n.startLoader(s),s.newNetwork.key=s.newNetwork.tenantName+":"+s.newNetwork.networkName,o.create(s.newNetwork).then(function(e){n.stopLoader(s),i()},function(e){n.stopLoader(s),n.showServerError(s,e)}))}function a(){n.stopLoader(s),n.hideServerError(s),s.newNetwork={networkName:"",encap:"vxlan",subnet:"",gateway:"",tenantName:"default"}}var s=this;s.cidrPattern=ContivGlobals.CIDR_REGEX,s.createNetwork=l,s.cancelCreating=r,a()}]),angular.module("contiv.networks").config(["$stateProvider",function(e){e.state("contiv.menu.networks.details",{url:"/details/:key",controller:"NetworkDetailsCtrl as networkDetailsCtrl",templateUrl:"networks/networkdetails.html"})}]).controller("NetworkDetailsCtrl",["$state","$stateParams","$scope","$interval","$filter","NetworksModel","ApplicationGroupsModel","CRUDHelperService",function(e,t,o,n,i,r,l,a){function s(){e.go("contiv.menu.networks.list")}function c(){a.hideServerError(d),a.startLoader(d),r["delete"](d.network).then(function(e){a.stopLoader(d),s()},function(e){a.stopLoader(d),a.showServerError(d,e)})}function u(e){l.get(e).then(function(e){d.applicationGroups=i("orderBy")(_.filter(e,{networkName:d.network.networkName}),"groupName")})}var d=this;a.stopLoader(d),a.hideServerError(d),r.getModelByKey(t.key).then(function(e){d.network=e,u(!1)}),d.deleteNetwork=c;var p;angular.isDefined(p)||(p=n(function(){u(!0)},ContivGlobals.REFRESH_INTERVAL)),o.$on("$destroy",function(){n.cancel(p)})}]),angular.module("contiv.networks").config(["$stateProvider",function(e){e.state("contiv.menu.networks.list",{url:"/list",controller:"NetworksListCtrl as networksListCtrl",templateUrl:"networks/networklist.html"})}]).controller("NetworksListCtrl",["$scope","$interval","$filter","NetworksModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.networks=o("orderBy")(e,"networkName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.nodes").factory("LogService",["$http","$q",function(e,t){function o(){var o=t.defer(),n=ContivGlobals.NODES_ACTIVE_JOB_ENDPOINT;return e.get(n).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise}function n(){var o=t.defer(),n=ContivGlobals.NODES_LAST_JOB_ENDPOINT;return e.get(n).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise}return{getActiveLogs:o,getLastLogs:n}}]),angular.module("contiv.nodes").config(["$stateProvider",function(e){e.state("contiv.menu.nodes.commission",{url:"/commission/:key",controller:"NodeCommissionCtrl as nodeCommissionCtrl",templateUrl:"nodes/nodecommission.html"})}]).controller("NodeCommissionCtrl",["$state","$stateParams","NodesModel","CRUDHelperService","NodesService",function(e,t,o,n,i){function r(){e.go("contiv.menu.nodes.details.info",{key:t.key})}function l(){r()}function a(){s.form.$valid&&(n.hideServerError(s),n.startLoader(s),s.nodeOpsObj.nodes=[t.key],i.cleanupExtraVars(s),i.createExtraVars(s),o.commission(s.nodeOpsObj).then(function(e){n.stopLoader(s),r()},function(e){n.stopLoader(s),n.showServerError(s,e)}))}var s=this;s.nodeOpsObj={},s.extra_vars={},s.ansibleVariables=[],s.envVariables=[],i.getSettings(s),s.cancelCommissioningNode=l,s.commission=a,n.stopLoader(s),n.hideServerError(s)}]),angular.module("contiv.nodes").config(["$stateProvider",function(e){e.state("contiv.menu.nodes.details",{url:"/details/:key",controller:"NodeDetailsCtrl as nodeDetailsCtrl",templateUrl:"nodes/nodedetails.html"}).state("contiv.menu.nodes.details.info",{url:"/info",controller:"NodeDetailsCtrl as nodeDetailsCtrl",templateUrl:"nodes/nodeinfo.html"}).state("contiv.menu.nodes.details.stats",{url:"/stats",controller:"NodeDetailsCtrl as nodeDetailsCtrl",templateUrl:"nodes/nodestats.html"}).state("contiv.menu.nodes.details.logs",{url:"/logs",controller:"NodeDetailsCtrl as nodeDetailsCtrl",templateUrl:"nodes/nodelogs.html"})}]).controller("NodeDetailsCtrl",["$state","$stateParams","$scope","$interval","NodesModel",function(e,t,o,n,i){function r(){var e={nodes:[t.key]};i.decommission(e).then(function(e){c.showCommissionButton=!1,c.commissionButtonEnabled=!1,c.upgradeButtonEnabled=!1})}function l(){var e={nodes:[t.key]};i.upgrade(e).then(function(e){c.showCommissionButton=!1,c.commissionButtonEnabled=!1,c.upgradeButtonEnabled=!1})}function a(){switch(c.node.inventory_state.status){case"Unallocated":c.showCommissionButton=!0,c.commissionButtonEnabled=!0,c.upgradeButtonEnabled=!1;break;case"Decommissioned":c.showCommissionButton=!0,c.commissionButtonEnabled=!0,c.upgradeButtonEnabled=!1;break;case"Provisioning":c.showCommissionButton=!0,c.commissionButtonEnabled=!1,c.upgradeButtonEnabled=!1;break;case"Allocated":c.showCommissionButton=!1,c.commissionButtonEnabled=!0,c.upgradeButtonEnabled=!0;break;case"Cancelled":c.showCommissionButton=!1,c.commissionButtonEnabled=!1,c.upgradeButtonEnabled=!1;break;case"Maintenance":c.showCommissionButton=!0,c.commissionButtonEnabled=!1,c.upgradeButtonEnabled=!1;break;default:c.showCommissionButton=!0,c.commissionButtonEnabled=!1,c.upgradeButtonEnabled=!1}}function s(e){i.getModelByKey(t.key,e).then(function(e){c.node=e,a()})}var c=this;c.decommission=r,c.upgrade=l,s(!1);var u;angular.isDefined(u)||(u=n(function(){s(!0)},5e3)),o.$on("$destroy",function(){n.cancel(u)})}]),angular.module("contiv.nodes").directive("ctvNodestatus",function(){return{restrict:"E",scope:{node:"="},templateUrl:"nodes/nodestatus.html"}}).directive("ctvNodestate",function(){return{restrict:"E",scope:{node:"="},templateUrl:"nodes/nodestate.html"}}),angular.module("contiv.nodes").config(["$stateProvider",function(e){e.state("contiv.menu.nodes.discover",{url:"/discover",controller:"NodeDiscoverCtrl as nodeDiscoverCtrl",templateUrl:"nodes/nodediscover.html"})}]).controller("NodeDiscoverCtrl",["$state","$stateParams","NodesModel","CRUDHelperService","NodesService",function(e,t,o,n,i){function r(){e.go("contiv.menu.nodes.list")}function l(){r()}function a(){c.form.$valid&&(n.hideServerError(c),n.startLoader(c),s(),i.createExtraVars(c),o.discover(c.nodeOpsObj).then(function(e){n.stopLoader(c),r()},function(e){n.stopLoader(c),n.showServerError(c,e)}))}function s(){c.nodeOpsObj.addrs=_.words(c.nodeIPAddr,/[^, ]+/g)}var c=this;c.nodeOpsObj={},c.extra_vars={},c.ansibleVariables=[],c.envVariables=[],c.nodeIPAddr="",i.getSettings(c),c.discover=a,c.cancelDiscoveringNode=l,n.stopLoader(c),n.hideServerError(c)}]),angular.module("contiv.nodes").config(["$stateProvider",function(e){e.state("contiv.menu.nodes.list",{url:"/list",controller:"NodeListCtrl as nodeListCtrl",templateUrl:"nodes/nodelist.html"})}]).controller("NodeListCtrl",["$scope","$interval","$filter","NodesModel","CRUDHelperService","LogService",function(e,t,o,n,i,r){function l(e){n.get(e).then(function(e){i.stopLoader(c),c.nodes=o("orderBy")(e,"key")},function(e){i.stopLoader(c)}),a(),s()}function a(){r.getActiveLogs().then(function(e){c.activeLogs=e},function(e){c.activeLogs={desc:"There is currently no active job. Check Last Job for a job that recently finished."}})}function s(){r.getLastLogs().then(function(e){c.lastLogs=e},function(e){})}var c=this;c.getActiveLogs=a,c.getLastLogs=s,l(!1);var u;angular.isDefined(u)||(u=t(function(){l(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(u)})}]),angular.module("contiv.organizations").config(["$stateProvider",function(e){e.state("contiv.menu.organizations.create",{url:"/create",templateUrl:"organizations/organizationcreate.html",controller:"OrganizationCreateCtrl as organizationCreateCtrl"})}]).controller("OrganizationCreateCtrl",["$state","$stateParams","OrganizationsModel","CRUDHelperService",function(e,t,o,n){function i(){e.go("contiv.menu.organizations.list")}function r(){i()}function l(){s.form.$valid&&(n.hideServerError(s),n.startLoader(s),s.newOrganization.key=s.newOrganization.tenantName,o.create(s.newOrganization).then(function(e){n.stopLoader(s),i()},function(e){n.stopLoader(s),n.showServerError(s,e)}))}function a(){n.stopLoader(s),n.hideServerError(s),s.newOrganization={tenantName:""}}var s=this;s.createOrganization=l,s.cancelCreating=r,a()}]),angular.module("contiv.organizations").config(["$stateProvider",function(e){e.state("contiv.menu.organizations.details",{url:"/details/:key",controller:"OrganizationDetailsCtrl as organizationDetailsCtrl",templateUrl:"organizations/organizationdetails.html"})}]).controller("OrganizationDetailsCtrl",["$state","$stateParams","$scope","$interval","$filter","OrganizationsModel","CRUDHelperService",function(e,t,o,n,i,r,l){
function a(){e.go("contiv.menu.organizations.list")}function s(){l.hideServerError(c),l.startLoader(c),r["delete"](c.organization).then(function(e){l.stopLoader(c),a()},function(e){l.stopLoader(c),l.showServerError(c,e)})}var c=this;l.stopLoader(c),l.hideServerError(c),r.getModelByKey(t.key).then(function(e){c.organization=e}),c.deleteOrganization=s}]),angular.module("contiv.organizations").config(["$stateProvider",function(e){e.state("contiv.menu.organizations.list",{url:"/list",controller:"OrganizationsListCtrl as organizationsListCtrl",templateUrl:"organizations/organizationlist.html"})}]).controller("OrganizationsListCtrl",["$scope","$interval","$filter","OrganizationsModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.organizations=o("orderBy")(e,"tenantName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.servicelbs").config(["$stateProvider",function(e){e.state("contiv.menu.servicelbs.create",{url:"/create",templateUrl:"service_lbs/servicelbcreate.html",controller:"ServicelbCreateCtrl as servicelbCreateCtrl"})}]).controller("ServicelbCreateCtrl",["$state","$stateParams","ServicelbsModel","NetworksModel","CRUDHelperService",function(e,t,o,n,i){function r(){e.go("contiv.menu.servicelbs.list")}function l(){r()}function a(){n.get().then(function(e){d.networks=_.filter(e,{tenantName:"default"})})}function s(){d.servicelb.selectors=[],angular.forEach(d.labelSelectors,function(e){var t=e.name+"="+e.value;d.servicelb.selectors.push(t)})}function c(){s(),d.form.$valid&&(i.hideServerError(d),i.startLoader(d),d.servicelb.key=d.servicelb.tenantName+":"+d.servicelb.serviceName,o.create(d.servicelb).then(function(e){i.stopLoader(d),r()},function(e){i.stopLoader(d),i.showServerError(d,e)}))}function u(){i.stopLoader(d),i.hideServerError(d),d.servicelb={serviceName:"",networkName:"",ipAddress:"",selectors:[],ports:[],tenantName:"default"}}var d=this;d.labelSelectors=[],d.networks=[],d.createServicelb=c,d.cancelCreating=l,a(),u()}]),angular.module("contiv.servicelbs").config(["$stateProvider",function(e){e.state("contiv.menu.servicelbs.details",{url:"/details/:key",controller:"ServicelbDetailsCtrl as servicelbDetailsCtrl",templateUrl:"service_lbs/servicelbdetails.html"}).state("contiv.menu.servicelbs.edit",{url:"/edit/:key",controller:"ServicelbDetailsCtrl as servicelbDetailsCtrl",templateUrl:"service_lbs/servicelbdetails.html"})}]).controller("ServicelbDetailsCtrl",["$state","$stateParams","ServicelbsModel","CRUDHelperService",function(e,t,o,n){function i(){e.is("contiv.menu.servicelbs.edit")?p.mode="edit":p.mode="details"}function r(){e.go("contiv.menu.servicelbs.list")}function l(){e.go("contiv.menu.servicelbs.details",{key:p.servicelb.key})}function a(){l()}function s(){n.hideServerError(p),n.startLoader(p),o["delete"](p.servicelb).then(function(e){n.stopLoader(p),r()},function(e){n.stopLoader(p),n.showServerError(p,e)})}function c(){n.hideServerError(p),n.startLoader(p),d(),o.save(p.servicelb).then(function(e){n.stopLoader(p),l()},function(e){n.stopLoader(p),n.showServerError(p,e)})}function u(){angular.forEach(p.servicelb.selectors,function(e){var t={name:e.split("=")[0],value:e.split("=")[1]};p.labelSelectors.push(t)})}function d(){p.servicelb.selectors=[],angular.forEach(p.labelSelectors,function(e){var t=e.name+"="+e.value;p.servicelb.selectors.push(t)})}var p=this;p.labelSelectors=[],n.stopLoader(p),n.hideServerError(p),o.getModelByKey(t.key).then(function(e){p.servicelb=e,u()}),p.saveServicelb=c,p.cancelEditing=a,p.deleteServicelb=s,i()}]),angular.module("contiv.servicelbs").config(["$stateProvider",function(e){e.state("contiv.menu.servicelbs.list",{url:"/list",controller:"ServicelbListCtrl as servicelbListCtrl",templateUrl:"service_lbs/servicelblist.html"})}]).controller("ServicelbListCtrl",["$scope","$interval","$filter","ServicelbsModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.servicelbs=o("orderBy")(e,"serviceName")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.servicelbs").directive("ctvServicelbports",function(){return{restrict:"E",scope:{items:"="},link:function(e){function t(e,t){return e===t}function o(){e.newItem={servicePort:"",providerPort:"",protocol:""}}function n(e){return""===e.servicePort&&""===e.providerPort&&""===e.protocol}e.add=function(){if(!n(e.newItem)){void 0===e.items&&(e.items=[]);var i=e.newItem.servicePort+":"+e.newItem.providerPort+":"+e.newItem.protocol;_.pullAllWith(e.items,[i],t),e.items.push(i),o()}},e.remove=function(o){_.remove(e.items,function(e){return t(e,o)})},o()},templateUrl:"service_lbs/servicelbports.html"}}),angular.module("contiv.settings").config(["$stateProvider",function(e){e.state("contiv.menu.settings.details.cluster",{url:"/cluster",controller:"ClusterSettingCtrl as clusterSettingCtrl",templateUrl:"settings/clustersettings.html"})}]).controller("ClusterSettingCtrl",["$stateParams","CRUDHelperService","NodesService",function(e,t,o){function n(){i.form.$valid&&(t.hideServerError(i),t.startLoader(i),i.nodeOpsObj.nodes=[e.key],o.cleanupExtraVars(i),o.createExtraVars(i),o.updateSettings(i.nodeOpsObj).then(function(e){t.stopLoader(i)},function(e){t.stopLoader(i),t.showServerError(i,e)}))}var i=this;i.nodeOpsObj={},i.extra_vars={},i.ansibleVariables=[],i.envVariables=[],o.getSettings(i),i.updateClusterSettings=n,t.stopLoader(i),t.hideServerError(i)}]),angular.module("contiv.settings").config(["$stateProvider",function(e){e.state("contiv.menu.settings.details.networks",{url:"/networks",controller:"NetworkSettingCtrl as networkSettingCtrl",templateUrl:"settings/networksettings.html"})}]).controller("NetworkSettingCtrl",["CRUDHelperService","NetworkService",function(e,t){function o(){i.form.$valid&&(e.hideServerError(i),e.startLoader(i),t.updateSettings(i.setting).then(function(t){e.stopLoader(i)},function(t){e.stopLoader(i),e.showServerError(i,t)}))}function n(){t.getSettings().then(function(e){i.setting=e},function(e){})}var i=this;i.vlanPattern=ContivGlobals.VLAN_REGEX,i.vxlanPattern=ContivGlobals.VXLAN_REGEX,n(),i.updateNetworkSettings=o,e.stopLoader(i),e.hideServerError(i)}]),angular.module("contiv.storagepolicies").config(["$stateProvider",function(e){e.state("contiv.menu.storagepolicies.create",{url:"/create",templateUrl:"storage_policies/storagepolicycreate.html",controller:"StoragePolicyCreateCtrl as storagePolicyCreateCtrl"})}]).controller("StoragePolicyCreateCtrl",["$state","$stateParams","StoragePoliciesModel","CRUDHelperService",function(e,t,o,n){function i(){e.go("contiv.menu.storagepolicies.list")}function r(){i()}function l(){c.filesystemcmds.forEach(function(e){c.newStoragePolicy.filesystems[e.name]=e.value})}function a(){c.form.$valid&&(n.hideServerError(c),n.startLoader(c),l(),o.create(c.newStoragePolicy).then(function(e){n.stopLoader(c),i()},function(e){n.stopLoader(c),n.showServerError(c,e)}))}function s(){n.stopLoader(c),n.hideServerError(c),c.newStoragePolicy={name:"",backends:{crud:"ceph",mount:"ceph",snapshot:"ceph"},unlocked:!1,driver:{pool:"rbd"},create:{size:"0",filesystem:""},runtime:{snapshots:!0,snapshot:{frequency:"30m",keep:20},"rate-limit":{"write-iops":0,"read-iops":0,"write-bps":0,"read-bps":0}},filesystems:{}}}var c=this;c.createPolicy=a,c.cancelCreating=r,c.filesystemcmds=[],s()}]),angular.module("contiv.storagepolicies").config(["$stateProvider",function(e){e.state("contiv.menu.storagepolicies.details",{url:"/details/:key",controller:"StoragePolicyDetailsCtrl as storagePolicyDetailsCtrl",templateUrl:"storage_policies/storagepolicydetails.html"}).state("contiv.menu.storagepolicies.edit",{url:"/details/:key",controller:"StoragePolicyDetailsCtrl as storagePolicyDetailsCtrl",templateUrl:"storage_policies/storagepolicydetails.html"})}]).controller("StoragePolicyDetailsCtrl",["$state","$stateParams","$scope","$interval","$filter","StoragePoliciesModel","VolumesModel","CRUDHelperService",function(e,t,o,n,i,r,l,a){function s(){e.is("contiv.menu.storagepolicies.edit")?g.mode="edit":g.mode="details"}function c(){e.go("contiv.menu.storagepolicies.list")}function u(){e.go("contiv.menu.storagepolicies.details",{key:g.policy.name})}function d(){u()}function p(){a.hideServerError(g),a.startLoader(g),r.deleteUsingKey(g.policy.name,"name").then(function(e){a.stopLoader(g),c()},function(e){a.stopLoader(g),a.showServerError(g,e)})}function v(){angular.forEach(g.policy.filesystems,function(e,t){this.push({name:t,value:e})},g.filesystemcmds)}function m(){g.filesystemcmds.forEach(function(e){g.policy.filesystems[e.name]=e.value})}function f(){g.form.$valid&&(a.hideServerError(g),a.startLoader(g),m(),r.save(g.policy).then(function(e){a.stopLoader(g),u()},function(e){a.stopLoader(g),a.showServerError(g,e)}))}var g=this;g.filesystemcmds=[],a.stopLoader(g),a.hideServerError(g),r.getModelByKey(t.key,!1,"name").then(function(e){g.policy=e,v()}),g.deletePolicy=p,g.savePolicy=f,g.cancelEditing=d,s();var h;angular.isDefined(h)||(h=n(function(){},ContivGlobals.REFRESH_INTERVAL)),o.$on("$destroy",function(){n.cancel(h)})}]),angular.module("contiv.storagepolicies").directive("ctvStoragepolicybasicsettings",function(){return{}}).directive("ctvStoragepolicyfilesystemsettings",function(){return{restrict:"E",scope:{policy:"=",filesystemcmds:"="},link:function(e){e.filesystems=["ext4","btrfs"]},templateUrl:"storage_policies/filesystemsettings.html"}}).directive("ctvStoragepolicysnapshotsettings",function(){return{restrict:"E",scope:{policy:"="},templateUrl:"storage_policies/snapshotsettings.html"}}).directive("ctvStoragepolicyrwopssettings",function(){return{restrict:"E",scope:{policy:"="},templateUrl:"storage_policies/rwopssettings.html"}}).directive("ctvStoragepolicybackenddrivers",function(){return{restrict:"E",scope:{policy:"="},templateUrl:"storage_policies/backenddrivers.html"}}),angular.module("contiv.storagepolicies").config(["$stateProvider",function(e){e.state("contiv.menu.storagepolicies.list",{url:"/list",controller:"StoragePolicyListCtrl as storagePolicyListCtrl",templateUrl:"storage_policies/storagepolicylist.html"})}]).controller("StoragePolicyListCtrl",["$scope","$interval","$filter","StoragePoliciesModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.policies=o("orderBy")(e,"name")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.volumes").config(["$stateProvider",function(e){e.state("contiv.menu.volumes.create",{url:"/create",templateUrl:"volumes/volumecreate.html",controller:"VolumeCreateCtrl as volumeCreateCtrl"})}]).controller("VolumeCreateCtrl",["$state","$stateParams","VolumesModel","StoragePoliciesModel","CRUDHelperService",function(e,t,o,n,i){function r(){e.go("contiv.menu.volumes.list")}function l(){r()}function a(){n.get().then(function(e){d.policies=e})}function s(){d.newVolume.policy=d.selectedPolicy.name,d.newVolume.backends=d.selectedPolicy.backends,d.newVolume.driver=d.selectedPolicy.driver,d.newVolume.create=d.selectedPolicy.create,d.newVolume.runtime=d.selectedPolicy.runtime}function c(){d.form.$valid&&(i.hideServerError(d),i.startLoader(d),s(),o.create(d.newVolume).then(function(e){i.stopLoader(d),r()},function(e){i.stopLoader(d),i.showServerError(d,e)}))}function u(){i.stopLoader(d),i.hideServerError(d),d.newVolume={name:"",backends:{},driver:{},create:{},runtime:{}}}var d=this;d.filesystems=["ext4","btrfs"],d.createVolume=c,d.cancelCreating=l,a(),u()}]),angular.module("contiv.volumes").config(["$stateProvider",function(e){e.state("contiv.menu.volumes.details",{url:"/details/:key",controller:"VolumeDetailsCtrl as volumeDetailsCtrl",templateUrl:"volumes/volumedetails.html"})}]).controller("VolumeDetailsCtrl",["$state","$stateParams","$scope","$interval","$http","VolumesModel","VolumeService",function(e,t,o,n,i,r,l){function a(){e.go("contiv.menu.volumes.list")}function s(){r["delete"](v.volume).then(function(e){a()})}function c(e){var o=t.key.split("/"),n={};n.policy=o[0],n.name=o[1],r.getModel(n,e).then(function(e){v.volume=e,u(),d()})}function u(){l.getVolumeUseInfo(v.volume).then(function(e){v.volumeUse=e},function(e){})}function d(){l.getVolumeSnapshots(v.volume).then(function(e){v.snapshots=e},function(e){})}function p(e,t){r.copy(model,e,t).then(function(e){},function(e){})}var v=this;v.deleteVolume=s,v.copySnapshot=p,c(!1);var m;angular.isDefined(m)||(m=n(function(){c(!0)},ContivGlobals.REFRESH_INTERVAL)),o.$on("$destroy",function(){n.cancel(m)})}]),angular.module("contiv.volumes").config(["$stateProvider",function(e){e.state("contiv.menu.volumes.list",{url:"/list",controller:"VolumeListCtrl as volumeListCtrl",templateUrl:"volumes/volumelist.html"})}]).controller("VolumeListCtrl",["$scope","$interval","$filter","VolumesModel","CRUDHelperService",function(e,t,o,n,i){function r(e){n.get(e).then(function(e){i.stopLoader(l),l.volumes=o("orderBy")(e,"name")},function(e){i.stopLoader(l)})}var l=this;r(!1);var a;angular.isDefined(a)||(a=t(function(){r(!0)},ContivGlobals.REFRESH_INTERVAL)),e.$on("$destroy",function(){t.cancel(a)})}]),angular.module("contiv.volumes").factory("VolumeService",["$http","$q",function(e,t){function o(o){var n=t.defer(),i=ContivGlobals.VOLUMES_USES_ENDPOINT+o.policy+"/"+o.name;return e.get(i).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise}function n(o){var n=t.defer(),i=ContivGlobals.VOLUMES_SNAPSHOTS_ENDPOINT+o.policy+"/"+o.name;return e.get(i).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise}return{getVolumeUseInfo:o,getVolumeSnapshots:n}}]),angular.module("contiv.directives").directive("ctvCollapsible",function(){return{restrict:"E",scope:{title:"@",collapsed:"@"},transclude:!0,link:function(e){void 0===e.collapsed&&(e.collapsed=!0)},templateUrl:"components/directives/collapsible.html"}}),angular.module("contiv.directives").directive("ctvError",function(){return{restrict:"E",scope:{header:"@",error:"="},link:function(e,t,o){t.find("i").on("click",function(){t.addClass("ng-hide")})},templateUrl:"components/directives/errormessage.html"}}),angular.module("contiv.directives").directive("ctvNamevalue",function(){return{restrict:"E",scope:{items:"=",nameheader:"@",valueheader:"@",type:"@",options:"="},link:function(e){function t(e,t){return e.name==t.name}function o(){e.newItem={name:"",value:""}}function n(e){return""===e.name&&""===e.value}e.add=function(){n(e.newItem)||(void 0===e.item&&(e.item=[]),_.pullAllWith(e.items,[e.newItem],t),e.items.push(e.newItem),o())},e.remove=function(t){_.remove(e.items,function(e){return e.name==t.name})},o(),void 0===e.nameheader&&(e.nameheader="Name"),void 0===e.valueheader&&(e.valueheader="Value"),void 0===e.type&&(e.type="text")},templateUrl:"components/directives/namevalue.html"}}),angular.module("contiv.directives").directive("ctvTable",["filterFilter","limitToFilter",function(e,t){return{restrict:"E",transclude:!0,scope:{items:"=",filtereditems:"=",size:"@"},controller:["$scope","$element","$attrs",function(o,n,i){function r(n,i){if(c.searchText=i,(void 0===n||0>n)&&(n=0),c.pageNo=n,void 0!==o.items){var r=e(o.items,c.searchText),l=Math.ceil(r.length/c.size);0==l&&(l=1),c.chunks=[];for(var a=0;l>a;a++)c.chunks.push({selected:!1,pageNo:a});if(n>=c.chunks.length&&(c.pageNo=0),c.chunks[c.pageNo].selected=!0,c.chunks.length>5){var s,u;s=c.pageNo-2,u=c.pageNo+3,0>s&&(u-=s,s=0),u>c.chunks.length&&(s-=u-c.chunks.length,u=c.chunks.length),o.paginationMenu.chunks=c.chunks.slice(s,u)}else o.paginationMenu.chunks=c.chunks;c.filteredItems=t(r,c.size,c.pageNo*c.size),o.filtereditems=c.filteredItems}return!1}function l(){var e;return e=c.pageNo<=0?0:c.pageNo-1,r(e)}function a(){var e;return e=c.pageNo+1,e>c.chunks.length-1&&(e=c.chunks.length-1),r(e)}function s(e){o.paginationMenu=e}var c=this;c.chunks=[],c.pageNo=0,c.size=parseInt(o.size,10),isNaN(c.size)&&(c.size=12),c.showChunk=r,c.showNextChunk=a,c.showPrevChunk=l,c.addPaginationMenu=s}],link:function(e,t,o,n){e.$parent.$watch(o.items,function(){n.showChunk(n.pageNo,n.searchText)})},templateUrl:"components/directives/table.html"}}]).directive("ctvThead",function(){return{restrict:"E",transclude:!0,replace:!0,template:"<thead ng-transclude></thead>"}}).directive("ctvTh",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{"class":"@"},template:'<th ng-class="class" ng-transclude></th>'}}).directive("ctvTbody",function(){return{restrict:"E",scope:{},transclude:!0,replace:!0,template:"<tbody ng-transclude></tbody>"}}).directive("ctvTfoot",function(){return{restrict:"E",scope:{},transclude:!0,replace:!0,template:"<tfoot ng-transclude></tfoot>"}}).directive("ctvTsearch",function(){return{restrict:"E",require:"^^ctvTable",scope:{placeholder:"@",size:"@"},link:function(e,t,o,n){e.showChunk=function(){n.showChunk(n.pageNo,e.searchText)}},templateUrl:"components/directives/searchinput.html"}}).directive("ctvTr",function(){return{restrict:"E",transclude:"true",replace:!0,scope:{},template:"<tr ng-transclude></tr>"}}).directive("ctvTd",function(){return{restrict:"E",transclude:!0,replace:!0,scope:!0,template:"<td ng-transclude></td>"}}).directive("ctvTpagination",function(){return{restrict:"E",require:"^^ctvTable",scope:{},link:function(e,t,o,n){n.addPaginationMenu(e),n.showChunk(n.pageNo,n.searchText),e.showChunk=function(e){n.showChunk(e,n.searchText)},e.showPrevChunk=n.showPrevChunk,e.showNextChunk=n.showNextChunk},templateUrl:"components/directives/paginationmenu.html"}}),angular.module("contiv.models").factory("ApplicationGroupsModel",["$http","$q",function(e,t){var o=new Collection(e,t,ContivGlobals.APPLICATIONGROUPS_ENDPOINT);return o.generateKey=function(e){return e.tenantName+":"+e.groupName},o}]),angular.module("contiv.models").factory("BandwidthModel",["$http","$q",function(e,t){var o=new Collection(e,t,ContivGlobals.BANDWIDTH_ENDPOINT);return o.generateKey=function(e){return e.tenantName+":"+e.profileName},o}]),BaseCollection.prototype.extract=function(e){return e.data},BaseCollection.prototype.get=function(e){var t=this;return void 0===e&&(e=!1),!e&&t.models.length>0?t.$q.when(t.models):t.$http.get(t.url).then(function(e){return t.models=t.extract(e),t.models})},BaseCollection.prototype.getModelByKey=function(e,t,o){function n(){return _.find(i.models,function(t){return t[o]==e})}var i=this;void 0===t&&(t=!1),void 0===o&&(o="key");var r=i.$q.defer();return!t&&i.models.length>0?r.resolve(n()):i.get(t).then(function(){r.resolve(n())}),r.promise},BaseCollection.prototype.getModel=function(e,t){function o(){return _.find(n.models,e)}var n=this;void 0===t&&(t=!1);var i=n.$q.defer();return!t&&n.models.length>0?i.resolve(o()):n.get(t).then(function(){i.resolve(o())}),i.promise},Collection.prototype=Object.create(BaseCollection.prototype),Collection.prototype.create=function(e,t){var o=this,n=o.$q.defer();return void 0===t&&(t=o.url+e.key+"/"),console.log("URL: "+t),console.log("Model: "+e.key),console.log("Model: "+e.policyName),o.$http.post(t,e).then(function(t){var i=o.extract(t);void 0!==i&&""!==i||(i=e),o.models.push(i),n.resolve(o.extract(t))},function(e){console.log(o.extract(e)),n.reject(o.extract(e))}),n.promise},Collection.prototype.save=function(e){var t=this,o=t.$q.defer(),n=t.url+e.key+"/";return t.$http.put(n,e).then(function(n){_.remove(t.models,function(t){return t.key==e.key}),t.models.push(t.extract(n)),o.resolve(t.extract(n))},function(e){o.reject(t.extract(e))}),o.promise},Collection.prototype["delete"]=function(e){var t=this,o=t.$q.defer(),n=t.url+e.key+"/";return t.$http["delete"](n).then(function(n){_.remove(t.models,function(t){return t.key==e.key}),o.resolve(t.extract(n))},function(e){o.reject(t.extract(e))}),o.promise},Collection.prototype.deleteUsingKey=function(e,t,o){var n=this;void 0===t&&(t="key");var i=n.$q.defer();return void 0===o&&(o=n.url+e+"/"),n.$http["delete"](o).then(function(o){_.remove(n.models,function(o){return o[t]==e}),i.resolve(n.extract(o))},function(e){i.reject(n.extract(e))}),i.promise},angular.module("contiv.models").factory("NetworksModel",["$http","$q",function(e,t){return new Collection(e,t,ContivGlobals.NETWORKS_ENDPOINT)}]),angular.module("contiv.models").factory("NodesModel",["$http","$q",function(e,t){function o(e,t){BaseCollection.call(this,e,t,ContivGlobals.NODES_LIST_ENDPOINT)}o.prototype=Object.create(BaseCollection.prototype),o.prototype.extract=function(e){return _.map(e.data,function(e,t){return e.key=t,e})},o.prototype.commission=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.NODES_COMMISSION_ENDPOINT;return t.$http.post(n,e,{headers:{"Content-Type":"application/json"}}).then(function(e){o.resolve()},function(e){o.reject(e)}),o.promise},o.prototype.decommission=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.NODES_DECOMMISSION_ENDPOINT;return t.$http.post(n,e,{headers:{"Content-Type":"application/json"}}).then(function(e){o.resolve()},function(e){o.reject(e)}),o.promise},o.prototype.upgrade=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.NODES_MAINTENANCE_ENDPOINT;return t.$http.post(n,e,{headers:{"Content-Type":"application/json"}}).then(function(e){o.resolve()},function(e){o.reject(e)}),o.promise},o.prototype.discover=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.NODES_DISCOVER_ENDPOINT;return t.$http.post(n,e,{headers:{"Content-Type":"application/json"}}).then(function(e){o.resolve()},function(e){o.reject(e)}),o.promise};var n=new o(e,t);return n}]),angular.module("contiv.models").factory("OrganizationsModel",["$http","$q",function(e,t){return new Collection(e,t,ContivGlobals.ORGANIZATIONS_ENDPOINT)}]),angular.module("contiv.models").factory("PoliciesModel",["$http","$q",function(e,t){var o=new Collection(e,t,ContivGlobals.POLICIES_ENDPOINT);return o.generateKey=function(e){return e.tenantName+":"+e.policyName},o}]),angular.module("contiv.models").factory("RulesModel",["$http","$q",function(e,t){var o=new Collection(e,t,ContivGlobals.RULES_ENDPOINT);return o.getIncomingRules=function(e,t){return o.get().then(function(o){return _.filter(o,{policyName:e,direction:"in",tenantName:t})})},o.getOutgoingRules=function(e,t){return o.get().then(function(o){return _.filter(o,{policyName:e,direction:"out",tenantName:t})})},o.generateKey=function(e){return e.tenantName+":"+e.policyName+":"+e.ruleId},o}]),angular.module("contiv.models").factory("ServicelbsModel",["$http","$q",function(e,t){return new Collection(e,t,ContivGlobals.SERVICELBS_ENDPOINT)}]),angular.module("contiv.models").factory("StoragePoliciesModel",["$http","$q",function(e,t){function o(e,t){Collection.call(this,e,t,ContivGlobals.STORAGEPOLICIES_ENDPOINT)}o.prototype=Object.create(Collection.prototype),o.prototype.create=function(e){var t=this,o=t.url+e.name;return Collection.prototype.create.call(t,e,o)},o.prototype.save=function(e){var t=this,o=t.$q.defer(),n=t.url+e.name;return t.$http.post(n,e).then(function(n){_.remove(t.models,function(t){return t.name==e.name}),t.models.push(e),o.resolve(t.extract(n))},function(e){o.reject(t.extract(e))}),o.promise};var n=new o(e,t);return n}]),angular.module("contiv.models").factory("VolumesModel",["$http","$q",function(e,t){function o(e,t){Collection.call(this,e,t,ContivGlobals.VOLUMES_ENDPOINT)}o.prototype=Object.create(Collection.prototype),o.prototype["delete"]=function(e){var t=this,o=t.$q.defer(),n=ContivGlobals.VOLUMES_DELETE_ENDPOINT;e.volume=e.name;var i={data:e};return t.$http["delete"](n,i).then(function(n){_.remove(t.models,function(t){return t.name==e.name&&t.policy==e.policy}),o.resolve(t.extract(n))},function(e){o.reject(t.extract(e))}),o.promise},o.prototype.create=function(e){var t=this,o=ContivGlobals.VOLUMES_CREATE_ENDPOINT;return Collection.prototype.create.call(t,e,o)},o.prototype.copy=function(e,t,o){var n=this,i=n.$q.defer(),r=ContivGlobals.VOLUMES_COPYSNAPSHOTS_ENDPOINT,l={volume:e.name,policy:e.policy,Options:{target:o,snapshot:t}};return n.$http.post(r,l).then(function(e){i.resolve(n.extract(e))},function(e){i.reject(n.extract(e))}),i.promise};var n=new o(e,t);return n}]),angular.module("contiv.utils").factory("CRUDHelperService",function(){function e(e){e.showLoader=!0}function t(e){e.showLoader=!1}function o(e,t){e.showServerError=!0,e.serverErrorMessage=t}function n(e){e.showServerError=!1}return{startLoader:e,stopLoader:t,showServerError:o,hideServerError:n}}),angular.module("contiv.utils").factory("NetworkService",["$http","$q",function(e,t){function o(){var o=t.defer(),n=ContivGlobals.NETWORK_SETTINGS_ENDPOINT;return e.get(n).then(function(e){o.resolve(e.data[0])},function(e){o.reject(e.data)}),o.promise}function n(t){return e.post(ContivGlobals.NETWORK_SETTINGS_ENDPOINT+"global/",t)}return{getSettings:o,updateSettings:n}}]),angular.module("contiv.utils").factory("NodesService",["$http","$q",function(e,t){function o(o){var r=t.defer(),l=ContivGlobals.NODES_SETTINGS_GET_ENDPOINT;return e.get(l).then(function(e){r.resolve(e.data),o.setting=e.data;var t=o.setting.extra_vars,l=t[s.SCHED_PROVIDER],a=t[s.CONTIV_NET_MODE];t[s.CONTROL_INTERFACE]&&(o.extra_vars[s.CONTROL_INTERFACE]=t[s.CONTROL_INTERFACE]),t[s.DATA_INTERFACE]&&(o.extra_vars[s.DATA_INTERFACE]=t[s.DATA_INTERFACE]),t[s.VIP_ADDR]&&(o.extra_vars[s.VIP_ADDR]=t[s.VIP_ADDR]),l&&(o.extra_vars[s.SCHED_PROVIDER]=l,"ucp-swarm"===l&&(o.extra_vars[s.UCP_BOOTSTRAP_NODE]=t[s.UCP_BOOTSTRAP_NODE])),a&&(o.extra_vars[s.CONTIV_NET_MODE]=a,"standalone"===a?o.extra_vars[s.FWD_MODE]=t[s.FWD_MODE]:"aci"===a&&(o.extra_vars[s.APIC_CONTR_UNRESTRICT_MODE]=t[s.APIC_CONTR_UNRESTRICT_MODE],o.extra_vars[s.APIC_EPG_BRIDGE_DOMAIN]=t[s.APIC_EPG_BRIDGE_DOMAIN],o.extra_vars[s.APIC_LEAF_NODES]=t[s.APIC_LEAF_NODES],o.extra_vars[s.APIC_PASSWORD]=t[s.APIC_PASSWORD],o.extra_vars[s.APIC_PHYS_DOMAIN]=t[s.APIC_PHYS_DOMAIN],o.extra_vars[s.APIC_URL]=t[s.APIC_URL],o.extra_vars[s.APIC_USERNAME]=t[s.APIC_USERNAME])),t[s.CLUSTER_NAME]&&(o.extra_vars[s.CLUSTER_NAME]=t[s.CLUSTER_NAME]),n(t[s.ENV],o.envVariables),i(t,o.ansibleVariables)},function(e){r.reject(e.data)}),r.promise}function n(e,t){var o;for(o in e)t.push({name:o,value:e[o]})}function i(e,t){var o,n=[s.APIC_CONTR_UNRESTRICT_MODE,s.APIC_EPG_BRIDGE_DOMAIN,s.APIC_LEAF_NODES,s.APIC_PASSWORD,s.APIC_PHYS_DOMAIN,s.APIC_URL,s.APIC_USERNAME,s.CONTIV_NET_MODE,s.CONTROL_INTERFACE,s.ENV,s.FWD_MODE,s.DATA_INTERFACE,s.SCHED_PROVIDER,s.VIP_ADDR,s.UCP_BOOTSTRAP_NODE,s.CLUSTER_NAME];for(o in e)-1===n.indexOf(o)&&t.push({name:o,value:e[o]})}function r(t){return e.post(ContivGlobals.NODES_SETTINGS_SET_ENDPOINT,t,{headers:{"Content-Type":"application/json"}})}function l(e){e.ansibleVariables.forEach(function(t){e.extra_vars[t.name]=t.value});var t={};e.envVariables.forEach(function(e){t[e.name]=e.value}),e.extra_vars[s.ENV]=t,e.nodeOpsObj.extra_vars=JSON.stringify(e.extra_vars)}function a(e){"aci"==e.extra_vars[s.CONTIV_NET_MODE]?delete e.extra_vars[s.FWD_MODE]:(delete e.extra_vars[s.APIC_URL],delete e.extra_vars[s.APIC_USERNAME],delete e.extra_vars[s.APIC_PASSWORD],delete e.extra_vars[s.APIC_LEAF_NODES],delete e.extra_vars[s.APIC_PHYS_DOMAIN],delete e.extra_vars[s.APIC_EPG_BRIDGE_DOMAIN],delete e.extra_vars[s.APIC_CONTR_UNRESTRICT_MODE]),"native-swarm"==e.extra_vars[s.SCHED_PROVIDER]&&delete e.extra_vars[s.UCP_BOOTSTRAP_NODE]}var s={APIC_CONTR_UNRESTRICT_MODE:"apic_contracts_unrestricted_mode",APIC_EPG_BRIDGE_DOMAIN:"apic_epg_bridge_domain",APIC_LEAF_NODES:"apic_leaf_nodes",APIC_PASSWORD:"apic_password",APIC_PHYS_DOMAIN:"apic_phys_domain",APIC_URL:"apic_url",APIC_USERNAME:"apic_username",CONTIV_NET_MODE:"contiv_network_mode",CONTROL_INTERFACE:"control_interface",ENV:"env",FWD_MODE:"fwd_mode",DATA_INTERFACE:"netplugin_if",SCHED_PROVIDER:"scheduler_provider",VIP_ADDR:"service_vip",UCP_BOOTSTRAP_NODE:"ucp_bootstrap_node_name",CLUSTER_NAME:"cluster_name"};return{getSettings:o,createEnvVariables:n,createAnsibleVariables:i,updateSettings:r,createExtraVars:l,cleanupExtraVars:a}}]),angular.module("contiv.directives").directive("ctvAcivalid",function(){return{restrict:"E",templateUrl:"components/directives/nodes/acivalid.html",scope:{form:"="}}}),angular.module("contiv.directives").directive("ctvControlinterface",function(){return{restrict:"E",templateUrl:"components/directives/nodes/controlinterface.html",scope:{extravars:"="}}}),angular.module("contiv.directives").directive("ctvNetworkmode",function(){return{restrict:"E",templateUrl:"components/directives/nodes/networkmode.html",scope:{extravars:"="}}}),angular.module("contiv.directives").directive("ctvScheduler",function(){return{restrict:"E",templateUrl:"components/directives/nodes/scheduler.html",scope:{extravars:"="}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbW9kZWxzL2NvbGxlY3Rpb24uanMiLCJkaXJlY3RpdmVzL21vZHVsZS5qcyIsIm1vZGVscy9tb2R1bGUuanMiLCJ1dGlscy9tb2R1bGUuanMiLCJhcHBsaWNhdGlvbmdyb3Vwcy9tb2R1bGUuanMiLCJkYXNoYm9hcmQvbW9kdWxlLmpzIiwibG9naW4vbW9kdWxlLmpzIiwibWVudS9tb2R1bGUuanMiLCJuZXR3b3JrX3BvbGljaWVzL21vZHVsZS5qcyIsIm5ldHdvcmtzL21vZHVsZS5qcyIsIm5vZGVzL21vZHVsZS5qcyIsIm9yZ2FuaXphdGlvbnMvbW9kdWxlLmpzIiwic2VydmljZV9sYnMvbW9kdWxlLmpzIiwic2V0dGluZ3MvbW9kdWxlLmpzIiwic3RvcmFnZV9wb2xpY2llcy9tb2R1bGUuanMiLCJ2b2x1bWVzL21vZHVsZS5qcyIsImFwcC5qcyIsImFwcGxpY2F0aW9uZ3JvdXBzL2FwcGxpY2F0aW9uZ3JvdXBjcmVhdGVjdHJsLmpzIiwiYXBwbGljYXRpb25ncm91cHMvYXBwbGljYXRpb25ncm91cGRldGFpbHNjdHJsLmpzIiwiYXBwbGljYXRpb25ncm91cHMvYXBwbGljYXRpb25ncm91cGxpc3RjdHJsLmpzIiwiYXBwbGljYXRpb25ncm91cHMvYXBwbGljYXRpb25ncm91cHNlcnZpY2UuanMiLCJkYXNoYm9hcmQvZGFzaGJvYXJkY3RybC5qcyIsImxvZ2luL2xvZ2luY3RybC5qcyIsIm1lbnUvbWVudUN0cmwuanMiLCJuZXR3b3JrX3BvbGljaWVzL2JhbmR3aWR0aGRpcmVjdGl2ZS5qcyIsIm5ldHdvcmtfcG9saWNpZXMvYmFuZHdpZHRocG9saWN5Y3JlYXRlY3RybC5qcyIsIm5ldHdvcmtfcG9saWNpZXMvYmFuZHdpZHRocG9saWN5ZGV0YWlsc2N0cmwuanMiLCJuZXR3b3JrX3BvbGljaWVzL2JhbmR3aWR0aHBvbGljeWxpc3RjdHJsLmpzIiwibmV0d29ya19wb2xpY2llcy9pc29sYXRpb25wb2xpY3ljcmVhdGVjdHJsLmpzIiwibmV0d29ya19wb2xpY2llcy9pc29sYXRpb25wb2xpY3lkZXRhaWxzY3RybC5qcyIsIm5ldHdvcmtfcG9saWNpZXMvaXNvbGF0aW9ucG9saWN5bGlzdGN0cmwuanMiLCJuZXR3b3JrX3BvbGljaWVzL25ldHdvcmtwb2xpY2llc3RhYnNjdHJsLmpzIiwibmV0d29ya3MvbmV0d29ya2NyZWF0ZWN0cmwuanMiLCJuZXR3b3Jrcy9uZXR3b3JrZGV0YWlsc2N0cmwuanMiLCJuZXR3b3Jrcy9uZXR3b3JrbGlzdGN0cmwuanMiLCJub2Rlcy9sb2dzZXJ2aWNlLmpzIiwibm9kZXMvbm9kZWNvbW1pc3Npb25jdHJsLmpzIiwibm9kZXMvbm9kZWRldGFpbHNjdHJsLmpzIiwibm9kZXMvbm9kZWRpcmVjdGl2ZS5qcyIsIm5vZGVzL25vZGVkaXNjb3ZlcmN0cmwuanMiLCJub2Rlcy9ub2RlbGlzdGN0cmwuanMiLCJvcmdhbml6YXRpb25zL29yZ2FuaXphdGlvbmNyZWF0ZWN0cmwuanMiLCJvcmdhbml6YXRpb25zL29yZ2FuaXphdGlvbmRldGFpbHNjdHJsLmpzIiwib3JnYW5pemF0aW9ucy9vcmdhbml6YXRpb25saXN0Y3RybC5qcyIsInNlcnZpY2VfbGJzL3NlcnZpY2VsYmNyZWF0ZWN0cmwuanMiLCJzZXJ2aWNlX2xicy9zZXJ2aWNlbGJkZXRhaWxzY3RybC5qcyIsInNlcnZpY2VfbGJzL3NlcnZpY2VsYmxpc3RjdHJsLmpzIiwic2VydmljZV9sYnMvc2VydmljZWxicG9ydHNkaXJlY3RpdmUuanMiLCJzZXR0aW5ncy9jbHVzdGVyc2V0dGluZ2N0cmwuanMiLCJzZXR0aW5ncy9uZXR3b3Jrc2V0dGluZ2N0cmwuanMiLCJzdG9yYWdlX3BvbGljaWVzL3N0b3JhZ2Vwb2xpY3ljcmVhdGVjdHJsLmpzIiwic3RvcmFnZV9wb2xpY2llcy9zdG9yYWdlcG9saWN5ZGV0YWlsc2N0cmwuanMiLCJzdG9yYWdlX3BvbGljaWVzL3N0b3JhZ2Vwb2xpY3lkaXJlY3RpdmUuanMiLCJzdG9yYWdlX3BvbGljaWVzL3N0b3JhZ2Vwb2xpY3lsaXN0Y3RybC5qcyIsInZvbHVtZXMvdm9sdW1lY3JlYXRlY3RybC5qcyIsInZvbHVtZXMvdm9sdW1lZGV0YWlsc2N0cmwuanMiLCJ2b2x1bWVzL3ZvbHVtZWxpc3RjdHJsLmpzIiwidm9sdW1lcy92b2x1bWVzZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9kaXJlY3RpdmVzL2NvbGxhcHNpYmxlZGlyZWN0aXZlLmpzIiwiY29tcG9uZW50cy9kaXJlY3RpdmVzL2Vycm9ybWVzc2FnZWRpcmVjdGl2ZS5qcyIsImNvbXBvbmVudHMvZGlyZWN0aXZlcy9uYW1ldmFsdWVkaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL2RpcmVjdGl2ZXMvdGFibGVkaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL21vZGVscy9hcHBsaWNhdGlvbmdyb3Vwc21vZGVsLmpzIiwiY29tcG9uZW50cy9tb2RlbHMvYmFuZHdpZHRobW9kZWwuanMiLCJjb21wb25lbnRzL21vZGVscy9uZXR3b3Jrc21vZGVsLmpzIiwiY29tcG9uZW50cy9tb2RlbHMvbm9kZXNtb2RlbC5qcyIsImNvbXBvbmVudHMvbW9kZWxzL29yZ2FuaXphdGlvbnNtb2RlbC5qcyIsImNvbXBvbmVudHMvbW9kZWxzL3BvbGljaWVzbW9kZWwuanMiLCJjb21wb25lbnRzL21vZGVscy9ydWxlc21vZGVsLmpzIiwiY29tcG9uZW50cy9tb2RlbHMvc2VydmljZWxic21vZGVsLmpzIiwiY29tcG9uZW50cy9tb2RlbHMvc3RvcmFnZXBvbGljaWVzbW9kZWwuanMiLCJjb21wb25lbnRzL21vZGVscy92b2x1bWVzbW9kZWwuanMiLCJjb21wb25lbnRzL3V0aWxzL2NydWRoZWxwZXJzZXJ2aWNlLmpzIiwiY29tcG9uZW50cy91dGlscy9uZXR3b3Jrc2VydmljZS5qcyIsImNvbXBvbmVudHMvdXRpbHMvbm9kZXNzZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9kaXJlY3RpdmVzL25vZGVzL2FjaXZhbGlkZGlyZWN0aXZlLmpzIiwiY29tcG9uZW50cy9kaXJlY3RpdmVzL25vZGVzL2NvbnRyb2xpbnRlcmZhY2VkaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL2RpcmVjdGl2ZXMvbm9kZXMvbmV0d29ya21vZGVkaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL2RpcmVjdGl2ZXMvbm9kZXMvc2NoZWR1bGVyZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbIkJhc2VDb2xsZWN0aW9uIiwiJGh0dHAiLCIkcSIsInVybCIsInRoaXMiLCJtb2RlbHMiLCJDb2xsZWN0aW9uIiwiY2FsbCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJDb250aXZHbG9iYWxzIiwiTkVUV09SS1NfRU5EUE9JTlQiLCJQT0xJQ0lFU19FTkRQT0lOVCIsIlJVTEVTX0VORFBPSU5UIiwiQVBQTElDQVRJT05HUk9VUFNfRU5EUE9JTlQiLCJTRVJWSUNFTEJTX0VORFBPSU5UIiwiT1JHQU5JWkFUSU9OU19FTkRQT0lOVCIsIk5FVFdPUktfU0VUVElOR1NfRU5EUE9JTlQiLCJCQU5EV0lEVEhfRU5EUE9JTlQiLCJWT0xVTUVTX0VORFBPSU5UIiwiVk9MVU1FU19DUkVBVEVfRU5EUE9JTlQiLCJWT0xVTUVTX0RFTEVURV9FTkRQT0lOVCIsIlZPTFVNRVNfQ09QWVNOQVBTSE9UU19FTkRQT0lOVCIsIlZPTFVNRVNfVVNFU19FTkRQT0lOVCIsIlZPTFVNRVNfU05BUFNIT1RTX0VORFBPSU5UIiwiU1RPUkFHRVBPTElDSUVTX0VORFBPSU5UIiwiTk9ERVNfTElTVF9FTkRQT0lOVCIsIk5PREVTX0RJU0NPVkVSX0VORFBPSU5UIiwiTk9ERVNfQ09NTUlTU0lPTl9FTkRQT0lOVCIsIk5PREVTX0RFQ09NTUlTU0lPTl9FTkRQT0lOVCIsIk5PREVTX01BSU5URU5BTkNFX0VORFBPSU5UIiwiTk9ERVNfTEFTVF9KT0JfRU5EUE9JTlQiLCJOT0RFU19BQ1RJVkVfSk9CX0VORFBPSU5UIiwiTk9ERVNfU0VUVElOR1NfU0VUX0VORFBPSU5UIiwiTk9ERVNfU0VUVElOR1NfR0VUX0VORFBPSU5UIiwiUkVGUkVTSF9JTlRFUlZBTCIsIkNJRFJfUkVHRVgiLCJWTEFOX1JFR0VYIiwiVlhMQU5fUkVHRVgiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsInN0YXRlIiwiYWJzdHJhY3QiLCJ0ZW1wbGF0ZSIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm90aGVyd2lzZSIsIiRzdGF0ZSIsIkFwcGxpY2F0aW9uR3JvdXBzTW9kZWwiLCJOZXR3b3Jrc01vZGVsIiwiUG9saWNpZXNNb2RlbCIsIkJhbmR3aWR0aE1vZGVsIiwiUnVsZXNNb2RlbCIsIkFwcGxpY2F0aW9uR3JvdXBTZXJ2aWNlIiwiQ1JVREhlbHBlclNlcnZpY2UiLCJyZXR1cm5Ub0FwcGxpY2F0aW9uR3JvdXAiLCJnbyIsImNhbmNlbENyZWF0aW5nIiwiZ2V0TmV0d29ya3MiLCJnZXQiLCJ0aGVuIiwicmVzdWx0IiwiYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwiLCJuZXR3b3JrcyIsIl8iLCJmaWx0ZXIiLCJ0ZW5hbnROYW1lIiwiZ2V0SXNvbGF0aW9uUG9saWNpZXMiLCJpc29sYXRpb25Qb2xpY2llcyIsImFkZElzb2xhdGlvblBvbGljeSIsInJlbW92ZUlzb2xhdGlvblBvbGljeSIsInBvbGljeU5hbWUiLCJjcmVhdGVBcHBsaWNhdGlvbkdyb3VwIiwiZm9ybSIsIiR2YWxpZCIsImhpZGVTZXJ2ZXJFcnJvciIsInN0YXJ0TG9hZGVyIiwiYXBwbGljYXRpb25Hcm91cCIsIm5ldHdvcmtOYW1lIiwic2VsZWN0ZWROZXR3b3JrIiwibmV0UHJvZmlsZSIsInNlbGVjdGVkUHJvZmlsZSIsInByb2ZpbGVOYW1lIiwia2V5IiwiZ2VuZXJhdGVLZXkiLCJjcmVhdGUiLCJzdG9wTG9hZGVyIiwic2hvd1NlcnZlckVycm9yIiwiZ2V0QmFuZHdpZHRoUHJvZmlsZXMiLCJiYW5kd2lkdGhQcm9maWxlcyIsInJlc2V0Rm9ybSIsImdyb3VwTmFtZSIsInBvbGljaWVzIiwic2VsZWN0ZWRQb2xpY3kiLCJzZWxlY3RlZFBvbGljaWVzIiwiaW5jb21pbmdSdWxlcyIsIm91dGdvaW5nUnVsZXMiLCJpc29sYXRpb25Qb2xpY2llc1Zpc2libGUiLCIkc3RhdGVQYXJhbXMiLCJzZXRNb2RlIiwiaXMiLCJhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwiLCJtb2RlIiwicmV0dXJuVG9BcHBsaWNhdGlvbkdyb3VwRGV0YWlscyIsImNhbmNlbEVkaXRpbmciLCJnZXRSdWxlcyIsImZvckVhY2giLCJwb2xpY3kiLCJnZXRJbmNvbWluZ1J1bGVzIiwicnVsZXMiLCJBcnJheSIsInByb3RvdHlwZSIsInB1c2giLCJhcHBseSIsImdldE91dGdvaW5nUnVsZXMiLCJkZWxldGVBcHBsaWNhdGlvbkdyb3VwIiwic2F2ZUFwcGxpY2F0aW9uR3JvdXAiLCJzYXZlIiwiZ2V0TW9kZWxCeUtleSIsImdyb3VwIiwidW5kZWZpbmVkIiwiJHNjb3BlIiwiJGludGVydmFsIiwiJGZpbHRlciIsImdldEFwcGxpY2F0aW9uR3JvdXBzIiwicmVsb2FkIiwiYXBwbGljYXRpb25Hcm91cExpc3RDdHJsIiwiZ3JvdXBzIiwicHJvbWlzZSIsImlzRGVmaW5lZCIsIiRvbiIsImNhbmNlbCIsImZhY3RvcnkiLCJhcHBsaWNhdGlvbkdyb3VwQ3RybCIsImZpbmQiLCJyZW1vdmUiLCJydWxlIiwiTm9kZXNNb2RlbCIsIlZvbHVtZXNNb2RlbCIsIlN0b3JhZ2VQb2xpY2llc01vZGVsIiwiZ2V0RGFzaGJvYXJkSW5mbyIsImRhc2hib2FyZEN0cmwiLCJub2RlcyIsImxlbmd0aCIsInZvbHVtZXMiLCJuZXR3b3JrcG9saWNpZXMiLCJzdG9yYWdlcG9saWNpZXMiLCJyZXR1cm5Ub0Rhc2hib2FyZCIsInVzZXJuYW1lIiwibG9naW5DdHJsIiwibG9naW4iLCJwYXJhbXMiLCJsb2dvdXQiLCJtZW51Q3RybCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0Iiwic2NvcGUiLCJiYW5kd2lkdGhQb2xpY3kiLCJ0eXBlIiwibGluayIsImJhbmR3aWR0aCIsImJhbmR3aWR0aEFycmF5Iiwic3BsaXQiLCJiYW5kd2lkdGhOdW1iZXIiLCJiYW5kd2lkdGhVbml0IiwicmV0dXJuVG9Qb2xpY2llcyIsImNyZWF0ZVBvbGljeSIsImJhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwiLCJuZXdQb2xpY3kiLCJEU0NQIiwiYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwiLCJkZWxldGVQb2xpY3kiLCJkZWxldGVVc2luZ0tleSIsInJldHVyblRvUG9saWN5RGV0YWlscyIsInNhdmVQb2xpY3kiLCJnZXRQb2xpY2llcyIsInBvbGljaWVzTGlzdEN0cmwiLCJpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsIiwiaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwiLCJkb25lRWRpdGluZyIsInJlc2V0TmV3SW5jb21pbmdSdWxlIiwibmV3SW5jb21pbmdSdWxlIiwicnVsZUlkIiwicHJpb3JpdHkiLCJhY3Rpb24iLCJmcm9tRW5kcG9pbnRHcm91cCIsImZyb21OZXR3b3JrIiwiZnJvbUlQQWRkcmVzcyIsInByb3RvY29sIiwicG9ydCIsImRpcmVjdGlvbiIsIm5ld0luY29taW5nU2VsZWN0ZWRBcHBsaWNhdGlvbkdyb3VwIiwiZGlzYWJsZUluY29taW5nTmV0d29ya1NlbGVjdGlvbiIsImRpc2FibGVJbmNvbWluZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24iLCJyZXNldE5ld091dGdvaW5nUnVsZSIsIm5ld091dGdvaW5nUnVsZSIsInRvRW5kcG9pbnRHcm91cCIsInRvTmV0d29yayIsInRvSVBBZGRyZXNzIiwibmV3T3V0Z29pbmdTZWxlY3RlZEFwcGxpY2F0aW9uR3JvdXAiLCJkaXNhYmxlT3V0Z29pbmdOZXR3b3JrU2VsZWN0aW9uIiwiZGlzYWJsZU91dGdvaW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbiIsImFwcGxpY2F0aW9uR3JvdXBzIiwib25DaGFuZ2VPdXRnb2luZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24iLCJvbkNoYW5nZUluY29taW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbiIsIm9uQ2hhbmdlT3V0Z29pbmdOZXR3b3JrU2VsZWN0aW9uIiwiVG9FbmRwb2ludEdyb3VwIiwib25DaGFuZ2VJbmNvbWluZ05ldHdvcmtTZWxlY3Rpb24iLCJnZW5lcmF0ZVJ1bGVJZCIsInRvU3RyaW5nIiwiRGF0ZSIsIm5vdyIsImFkZEluY29taW5nUnVsZSIsImFkZE91dGdvaW5nUnVsZSIsImRlbGV0ZUluY29taW5nUnVsZSIsIm4iLCJkZWxldGVPdXRnb2luZ1J1bGUiLCJyZXR1cm5Ub05ldHdvcmtzIiwiY3JlYXRlTmV0d29yayIsIm5ldHdvcmtDcmVhdGVDdHJsIiwibmV3TmV0d29yayIsImVuY2FwIiwic3VibmV0IiwiZ2F0ZXdheSIsImNpZHJQYXR0ZXJuIiwiZGVsZXRlTmV0d29yayIsIm5ldHdvcmtEZXRhaWxzQ3RybCIsIm5ldHdvcmsiLCJuZXR3b3Jrc0xpc3RDdHJsIiwiZ2V0QWN0aXZlTG9ncyIsImRlZmVycmVkIiwiZGVmZXIiLCJyZXNvbHZlIiwiZGF0YSIsInJlamVjdCIsImdldExhc3RMb2dzIiwiTm9kZXNTZXJ2aWNlIiwicmV0dXJuVG9Ob2RlRGV0YWlscyIsImNhbmNlbENvbW1pc3Npb25pbmdOb2RlIiwiY29tbWlzc2lvbiIsIm5vZGVDb21taXNzaW9uQ3RybCIsIm5vZGVPcHNPYmoiLCJjbGVhbnVwRXh0cmFWYXJzIiwiY3JlYXRlRXh0cmFWYXJzIiwiZXh0cmFfdmFycyIsImFuc2libGVWYXJpYWJsZXMiLCJlbnZWYXJpYWJsZXMiLCJnZXRTZXR0aW5ncyIsImRlY29tbWlzc2lvbiIsIm5vZGVEZXRhaWxzQ3RybCIsInNob3dDb21taXNzaW9uQnV0dG9uIiwiY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQiLCJ1cGdyYWRlQnV0dG9uRW5hYmxlZCIsInVwZ3JhZGUiLCJzZXRCdXR0b25EaXNwbGF5Iiwibm9kZSIsInN0YXR1cyIsImdldE5vZGVJbmZvIiwicmV0dXJuVG9Ob2RlcyIsImNhbmNlbERpc2NvdmVyaW5nTm9kZSIsImRpc2NvdmVyIiwibm9kZURpc2NvdmVyQ3RybCIsImNyZWF0ZUlQQWRkckFycmF5IiwiYWRkcnMiLCJ3b3JkcyIsIm5vZGVJUEFkZHIiLCJMb2dTZXJ2aWNlIiwiZ2V0Tm9kZXMiLCJub2RlTGlzdEN0cmwiLCJhY3RpdmVMb2dzIiwiZGVzYyIsImxhc3RMb2dzIiwiT3JnYW5pemF0aW9uc01vZGVsIiwicmV0dXJuVG9Pcmdhbml6YXRpb25zIiwiY3JlYXRlT3JnYW5pemF0aW9uIiwib3JnYW5pemF0aW9uQ3JlYXRlQ3RybCIsIm5ld09yZ2FuaXphdGlvbiIsImRlbGV0ZU9yZ2FuaXphdGlvbiIsIm9yZ2FuaXphdGlvbkRldGFpbHNDdHJsIiwib3JnYW5pemF0aW9uIiwiZ2V0T3JnYW5pemF0aW9ucyIsIm9yZ2FuaXphdGlvbnNMaXN0Q3RybCIsIm9yZ2FuaXphdGlvbnMiLCJTZXJ2aWNlbGJzTW9kZWwiLCJyZXR1cm5Ub1NlcnZpY2VsYnMiLCJzZXJ2aWNlbGJDcmVhdGVDdHJsIiwiY3JlYXRlTGFiZWxTZWxlY3RvclN0cmluZ3MiLCJzZXJ2aWNlbGIiLCJzZWxlY3RvcnMiLCJsYWJlbFNlbGVjdG9ycyIsImxhYmVsU2VsZWN0b3IiLCJzZWxlY3RvclN0cmluZyIsIm5hbWUiLCJ2YWx1ZSIsImNyZWF0ZVNlcnZpY2VsYiIsInNlcnZpY2VOYW1lIiwiaXBBZGRyZXNzIiwicG9ydHMiLCJzZXJ2aWNlbGJEZXRhaWxzQ3RybCIsInJldHVyblRvU2VydmljZWxiRGV0YWlscyIsImRlbGV0ZVNlcnZpY2VsYiIsInNhdmVTZXJ2aWNlbGIiLCJjcmVhdGVMYWJlbFNlbGVjdG9ycyIsInNlbGVjdG9yU3RyIiwic2VsZWN0b3IiLCJnZXRTZXJ2aWNlbGJzIiwic2VydmljZWxiTGlzdEN0cmwiLCJzZXJ2aWNlbGJzIiwiaXRlbXMiLCJjb21wYXJlIiwidmFsMSIsInZhbDIiLCJyZXNldE5ld0l0ZW0iLCJuZXdJdGVtIiwic2VydmljZVBvcnQiLCJwcm92aWRlclBvcnQiLCJpc0VtcHR5SXRlbSIsIml0ZW0iLCJhZGQiLCJuZXdJdGVtU3RyIiwicHVsbEFsbFdpdGgiLCJwYXNzZWRJdGVtIiwidXBkYXRlQ2x1c3RlclNldHRpbmdzIiwiY2x1c3RlclNldHRpbmdDdHJsIiwidXBkYXRlU2V0dGluZ3MiLCJOZXR3b3JrU2VydmljZSIsInVwZGF0ZU5ldHdvcmtTZXR0aW5ncyIsIm5ldHdvcmtTZXR0aW5nQ3RybCIsInNldHRpbmciLCJnZXROZXR3b3JrU2V0dGluZ3MiLCJ2bGFuUGF0dGVybiIsInZ4bGFuUGF0dGVybiIsInJldHVyblRvU3RvcmFnZVBvbGljaWVzIiwiY3JlYXRlRmlsZXN5c3RlbUNtZHMiLCJzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybCIsImZpbGVzeXN0ZW1jbWRzIiwibmV3U3RvcmFnZVBvbGljeSIsImZpbGVzeXN0ZW1zIiwiYmFja2VuZHMiLCJjcnVkIiwibW91bnQiLCJzbmFwc2hvdCIsInVubG9ja2VkIiwiZHJpdmVyIiwicG9vbCIsInNpemUiLCJmaWxlc3lzdGVtIiwicnVudGltZSIsInNuYXBzaG90cyIsImZyZXF1ZW5jeSIsImtlZXAiLCJyYXRlLWxpbWl0Iiwid3JpdGUtaW9wcyIsInJlYWQtaW9wcyIsIndyaXRlLWJwcyIsInJlYWQtYnBzIiwic3RvcmFnZVBvbGljeURldGFpbHNDdHJsIiwiaW5pdGlhbGl6ZUZpbGVzeXN0ZW1DbWRzQXJyYXkiLCJzdG9yYWdlUG9saWN5TGlzdEN0cmwiLCJyZXR1cm5Ub1ZvbHVtZXNNb2RlbCIsImdldFN0b3JhZ2VQb2xpY2llcyIsInZvbHVtZUNyZWF0ZUN0cmwiLCJhcHBseVBvbGljeVNldHRpbmdzIiwibmV3Vm9sdW1lIiwiY3JlYXRlVm9sdW1lIiwiVm9sdW1lU2VydmljZSIsInJldHVyblRvVm9sdW1lcyIsImRlbGV0ZVZvbHVtZSIsInZvbHVtZURldGFpbHNDdHJsIiwidm9sdW1lIiwiZ2V0Vm9sdW1lSW5mbyIsInRva2VucyIsIm1vZGVsIiwiZ2V0TW9kZWwiLCJnZXRWb2x1bWVVc2VJbmZvIiwiZ2V0Vm9sdW1lU25hcHNob3RzIiwidm9sdW1lVXNlIiwiY29weVNuYXBzaG90IiwiY29weSIsImdldFZvbHVtZXMiLCJ2b2x1bWVMaXN0Q3RybCIsInRpdGxlIiwiY29sbGFwc2VkIiwidHJhbnNjbHVkZSIsImhlYWRlciIsImVycm9yIiwiZWxlbWVudCIsImF0dHIiLCJvbiIsImFkZENsYXNzIiwibmFtZWhlYWRlciIsInZhbHVlaGVhZGVyIiwib3B0aW9ucyIsImZpbHRlckZpbHRlciIsImxpbWl0VG9GaWx0ZXIiLCJmaWx0ZXJlZGl0ZW1zIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCJzaG93Q2h1bmsiLCJwYWdlTm8iLCJzZWFyY2hUZXh0IiwidGFibGVDdHJsIiwic2VhcmNoVGV4dEZpbHRlcmVkSXRlbXMiLCJub09mQ2h1bmtzIiwiTWF0aCIsImNlaWwiLCJjaHVua3MiLCJpIiwic2VsZWN0ZWQiLCJzbGljZVN0YXJ0Iiwic2xpY2VFbmQiLCJwYWdpbmF0aW9uTWVudSIsInNsaWNlIiwiZmlsdGVyZWRJdGVtcyIsInNob3dQcmV2Q2h1bmsiLCJwcmV2Q2h1bmsiLCJzaG93TmV4dENodW5rIiwibmV4dENodW5rIiwiYWRkUGFnaW5hdGlvbk1lbnUiLCJtZW51IiwicGFyc2VJbnQiLCJpc05hTiIsImF0dHJzIiwiJHBhcmVudCIsIiR3YXRjaCIsInJlcGxhY2UiLCJjbGFzcyIsInJlcXVpcmUiLCJwbGFjZWhvbGRlciIsImdyb3Vwc21vZGVsIiwiYmFuZHdpZHRobW9kZWwiLCJleHRyYWN0IiwiY29sbGVjdGlvbiIsIndoZW4iLCJrZXluYW1lIiwiZmluZE1vZGVsIiwiYyIsIk9iamVjdCIsImNvbnNvbGUiLCJsb2ciLCJwb3N0IiwicmVzcG9uc2UiLCJyZXNwb25zZURhdGEiLCJwdXQiLCJOb2Rlc0NvbGxlY3Rpb24iLCJtYXAiLCJub2Rlc2NvbGxlY3Rpb24iLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwibm9kZXNtb2RlbCIsInBvbGljaWVzbW9kZWwiLCJydWxlc21vZGVsIiwiU3RvcmFnZVBvbGljaWVzQ29sbGVjdGlvbiIsIlZvbHVtZXNDb2xsZWN0aW9uIiwidm9sdW1lc2NvbGxlY3Rpb24iLCJ2b2xjb3B5bW9kZWwiLCJPcHRpb25zIiwidGFyZ2V0Iiwidm9sdW1lc21vZGVsIiwic2hvd0xvYWRlciIsIm1lc3NhZ2UiLCJzZXJ2ZXJFcnJvck1lc3NhZ2UiLCJjdHJsIiwiZXh0cmFWYXJzIiwic2NoZWRfcHJvdmlkZXIiLCJub2RlX2NvbnN0YW50cyIsIlNDSEVEX1BST1ZJREVSIiwibmV0d29ya19tb2RlIiwiQ09OVElWX05FVF9NT0RFIiwiQ09OVFJPTF9JTlRFUkZBQ0UiLCJEQVRBX0lOVEVSRkFDRSIsIlZJUF9BRERSIiwiVUNQX0JPT1RTVFJBUF9OT0RFIiwiRldEX01PREUiLCJBUElDX0NPTlRSX1VOUkVTVFJJQ1RfTU9ERSIsIkFQSUNfRVBHX0JSSURHRV9ET01BSU4iLCJBUElDX0xFQUZfTk9ERVMiLCJBUElDX1BBU1NXT1JEIiwiQVBJQ19QSFlTX0RPTUFJTiIsIkFQSUNfVVJMIiwiQVBJQ19VU0VSTkFNRSIsIkNMVVNURVJfTkFNRSIsImNyZWF0ZUVudlZhcmlhYmxlcyIsIkVOViIsImNyZWF0ZUFuc2libGVWYXJpYWJsZXMiLCJlbnZWYXJzIiwic2V0dGluZ19maWx0ZXIiLCJpbmRleE9mIiwiSlNPTiIsInN0cmluZ2lmeSIsImV4dHJhdmFycyJdLCJtYXBwaW5ncyI6IkFBT0EsUUFBQUEsZ0JBQUFDLEVBQUFDLEVBQUFDLEdBQ0FDLEtBQUFDLFVBQ0FELEtBQUFILE1BQUFBLEVBQ0FHLEtBQUFGLEdBQUFBLEVBQ0FFLEtBQUFELElBQUFBLEVBMkZBLFFBQUFHLFlBQUFMLEVBQUFDLEVBQUFDLEdBQ0FILGVBQUFPLEtBQUFILEtBQUFILEVBQUFDLEVBQUFDLEdDdkdBSyxRQUFBQyxPQUFBLHdCQ0dBRCxRQUFBQyxPQUFBLG1CQUNBLElBQUFDLGVBQUEsV0FFQSxPQUVBQyxrQkFBQSw4QkFDQUMsa0JBQUEsNkJBQ0FDLGVBQUEsMkJBQ0FDLDJCQUFBLG9DQUNBQyxvQkFBQSxnQ0FDQUMsdUJBQUEsNkJBQ0FDLDBCQUFBLDZCQUNBQyxtQkFBQSxpQ0FJQUMsaUJBQUEsc0JBQ0FDLHdCQUFBLDZCQUNBQyx3QkFBQSw2QkFDQUMsK0JB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Q0FDQWlILE9BQ0FuRixLQUFBLFFDTkFsRSxRQUFBQyxPQUFBLHFCQUNBa0osVUFBQSxzQkFBQSxXQUNBLE9BQ0FDLFNBQUEsSUFDQWhILFlBQUEsb0RBQ0FpSCxPQUNBOFUsVUFBQSxRQ05BbmUsUUFBQUMsT0FBQSxxQkFDQWtKLFVBQUEsaUJBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FoSCxZQUFBLCtDQUNBaUgsT0FDQThVLFVBQUEsUUNOQW5lLFFBQUFDLE9BQUEscUJBQ0FrSixVQUFBLGVBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FoSCxZQUFBLDZDQUNBaUgsT0FDQThVLFVBQUEiLCJmaWxlIjoiYXBwL2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQmFzZUNvbGxlY3Rpb24gY2xhc3MgdGhhdCBkb2VzIGp1c3QgZmV0Y2ggb2YgdGhlIG9iamVjdHMuXG4gKiBAcGFyYW0gJGh0dHBcbiAqIEBwYXJhbSAkcVxuICogQHBhcmFtIHVybCBVc2VkIGZvciBkb2luZyBIVFRQIEdFVCBhbmQgZmV0Y2ggb2JqZWN0cyBmcm9tIHNlcnZlclxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEJhc2VDb2xsZWN0aW9uKCRodHRwLCAkcSwgdXJsKSB7XG4gICAgdGhpcy5tb2RlbHMgPSBbXTtcbiAgICB0aGlzLiRodHRwID0gJGh0dHA7XG4gICAgdGhpcy4kcSA9ICRxO1xuICAgIHRoaXMudXJsID0gdXJsO1xufVxuXG5CYXNlQ29sbGVjdGlvbi5wcm90b3R5cGUuZXh0cmFjdCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0gcmVsb2FkIE9wdGlvbmFsLiBEZWZhdWx0IGlzIGZhbHNlXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuQmFzZUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChyZWxvYWQpIHtcbiAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgaWYgKHJlbG9hZCA9PT0gdW5kZWZpbmVkKSByZWxvYWQgPSBmYWxzZTtcbiAgICByZXR1cm4gKCFyZWxvYWQgJiYgY29sbGVjdGlvbi5tb2RlbHMubGVuZ3RoID4gMCkgP1xuICAgICAgICBjb2xsZWN0aW9uLiRxLndoZW4oY29sbGVjdGlvbi5tb2RlbHMpIDogY29sbGVjdGlvbi4kaHR0cC5nZXQoY29sbGVjdGlvbi51cmwpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24ubW9kZWxzID0gY29sbGVjdGlvbi5leHRyYWN0KHJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5tb2RlbHM7XG4gICAgICAgIH0pO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIGtleVxuICogQHBhcmFtIHJlbG9hZCBPcHRpb25hbC4gRGVmYXVsdCBpcyBmYWxzZVxuICogQHBhcmFtIGtleW5hbWVcbiAqIEByZXR1cm5zIHsqfVxuICovXG5CYXNlQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0TW9kZWxCeUtleSA9IGZ1bmN0aW9uIChrZXksIHJlbG9hZCwga2V5bmFtZSkge1xuICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICBpZiAocmVsb2FkID09PSB1bmRlZmluZWQpIHJlbG9hZCA9IGZhbHNlO1xuICAgIGlmIChrZXluYW1lID09PSB1bmRlZmluZWQpIGtleW5hbWUgPSAna2V5JztcblxuICAgIHZhciBkZWZlcnJlZCA9IGNvbGxlY3Rpb24uJHEuZGVmZXIoKTtcblxuICAgIGZ1bmN0aW9uIGZpbmRNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIF8uZmluZChjb2xsZWN0aW9uLm1vZGVscywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIHJldHVybiBjW2tleW5hbWVdID09IGtleTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoIXJlbG9hZCAmJiBjb2xsZWN0aW9uLm1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoZmluZE1vZGVsKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbGxlY3Rpb24uZ2V0KHJlbG9hZClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGZpbmRNb2RlbCgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIG1vZGVsXG4gKiBAcGFyYW0gcmVsb2FkIE9wdGlvbmFsLiBEZWZhdWx0IGlzIGZhbHNlXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuQmFzZUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldE1vZGVsID0gZnVuY3Rpb24gKG1vZGVsLCByZWxvYWQpIHtcbiAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgaWYgKHJlbG9hZCA9PT0gdW5kZWZpbmVkKSByZWxvYWQgPSBmYWxzZTtcblxuICAgIHZhciBkZWZlcnJlZCA9IGNvbGxlY3Rpb24uJHEuZGVmZXIoKTtcblxuICAgIGZ1bmN0aW9uIGZpbmRNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIF8uZmluZChjb2xsZWN0aW9uLm1vZGVscywgbW9kZWwpXG4gICAgfVxuXG4gICAgaWYgKCFyZWxvYWQgJiYgY29sbGVjdGlvbi5tb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGZpbmRNb2RlbCgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb2xsZWN0aW9uLmdldChyZWxvYWQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmaW5kTW9kZWwoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cblxuLyoqXG4gKiBFeHRlbmRzIEJhc2VDb2xsZWN0aW9uIGNsYXNzIHRvIGRvIGNyZWF0ZSwgdXBkYXRlIGFuZCBkZWxldGUgdXNpbmcgUE9TVCwgUFVUIGFuZCBERUxFVEUgdmVyYnMuXG4gKiBAcGFyYW0gJGh0dHBcbiAqIEBwYXJhbSAkcVxuICogQHBhcmFtIHVybCBVc2VkIGZvciBkb2luZyBIVFRQIEdFVCBhbmQgZmV0Y2ggb2JqZWN0cyBmcm9tIHNlcnZlclxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIENvbGxlY3Rpb24oJGh0dHAsICRxLCB1cmwpIHtcbiAgICBCYXNlQ29sbGVjdGlvbi5jYWxsKHRoaXMsICRodHRwLCAkcSwgdXJsKTtcbn1cblxuQ29sbGVjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhc2VDb2xsZWN0aW9uLnByb3RvdHlwZSk7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBtb2RlbFxuICogQHBhcmFtIHVybCBPcHRpb25hbCBpZiBub3QgcGFzc2VkIGl0IGlzIGNvbnN0cnVjdGVkIHVzaW5nIGtleSBhbmQgdXJsIHBhc3NlZCBpbiBjb25zdHJ1Y3RvclxuICogQHJldHVybnMgeyp9XG4gKi9cbkNvbGxlY3Rpb24ucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChtb2RlbCwgdXJsKSB7XG4gICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xuICAgIHZhciBkZWZlcnJlZCA9IGNvbGxlY3Rpb24uJHEuZGVmZXIoKTtcbiAgICBpZiAodXJsID09PSB1bmRlZmluZWQpIHVybCA9IGNvbGxlY3Rpb24udXJsICsgbW9kZWwua2V5ICsgJy8nO1xuICAgIGNvbnNvbGUubG9nKFwiVVJMOiBcIit1cmwpO1xuICAgIGNvbnNvbGUubG9nKFwiTW9kZWw6IFwiKyBtb2RlbC5rZXkpO1xuICAgIGNvbnNvbGUubG9nKFwiTW9kZWw6IFwiKyBtb2RlbC5wb2xpY3lOYW1lKTtcbiAgICBjb2xsZWN0aW9uLiRodHRwLnBvc3QodXJsLCBtb2RlbClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gY29sbGVjdGlvbi5leHRyYWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgIC8vRm9yIHJlc3QgZW5kcG9pbnRzIHRoYXQgZG8gbm90IHJldHVybiBjcmVhdGVkIGpzb24gb2JqZWN0IGluIHJlc3BvbnNlXG4gICAgICAgICAgICBpZiAoKHJlc3BvbnNlRGF0YSA9PT0gdW5kZWZpbmVkKSB8fCAocmVzcG9uc2VEYXRhID09PSAnJykpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBtb2RlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vY29sbGVjdGlvbi5tb2RlbHMucHVzaChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24ubW9kZWxzLnB1c2gocmVzcG9uc2VEYXRhKTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoY29sbGVjdGlvbi5leHRyYWN0KHJlc3BvbnNlKSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xuICAgICAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cbi8qKlxuICogVGhpcyBpcyBmb3IgbmV0bWFzdGVyIHNwZWNpZmljIGVuZHBvaW50cyBhbmQgdXNlZCBieSBuZXRtYXN0ZXIgb2JqZWN0cyBvbmx5LlxuICogVE9ETzogR2VuZXJhbGl6ZVxuICogQHBhcmFtIG1vZGVsXG4gKiBAcGFyYW0gdXJsIE9wdGlvbmFsXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuQ29sbGVjdGlvbi5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICB2YXIgZGVmZXJyZWQgPSBjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XG4gICAgdmFyIHVybCA9IGNvbGxlY3Rpb24udXJsICsgbW9kZWwua2V5ICsgJy8nO1xuICAgIGNvbGxlY3Rpb24uJGh0dHAucHV0KHVybCwgbW9kZWwpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuICAgICAgICAgICAgXy5yZW1vdmUoY29sbGVjdGlvbi5tb2RlbHMsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ua2V5ID09IG1vZGVsLmtleTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29sbGVjdGlvbi5tb2RlbHMucHVzaChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoY29sbGVjdGlvbi5leHRyYWN0KHJlc3BvbnNlKSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIFRoaXMgaXMgZm9yIG5ldG1hc3RlciBzcGVjaWZpYyBlbmRwb2ludHMgYW5kIHVzZWQgYnkgbmV0bWFzdGVyIG9iamVjdHMgb25seS5cbiAqIFRPRE86IEdlbmVyYWxpemVcbiAqIEBwYXJhbSBtb2RlbFxuICogQHJldHVybnMgeyp9XG4gKi9cbkNvbGxlY3Rpb24ucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICB2YXIgZGVmZXJyZWQgPSBjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XG4gICAgdmFyIHVybCA9IGNvbGxlY3Rpb24udXJsICsgbW9kZWwua2V5ICsgJy8nO1xuICAgIGNvbGxlY3Rpb24uJGh0dHAuZGVsZXRlKHVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBfLnJlbW92ZShjb2xsZWN0aW9uLm1vZGVscywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5rZXkgPT0gbW9kZWwua2V5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xuICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoY29sbGVjdGlvbi5leHRyYWN0KHJlc3BvbnNlKSk7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIGtleVxuICogQHBhcmFtIGtleW5hbWVcbiAqIEBwYXJhbSB1cmwgT3B0aW9uYWwgaWYgbm90IHBhc3NlZCBpdCBpcyBjb25zdHJ1Y3RlZCB1c2luZyBrZXkgYW5kIHVybCBwYXNzZWQgaW4gY29uc3RydWN0b3JcbiAqIEByZXR1cm5zIHsqfVxuICovXG5Db2xsZWN0aW9uLnByb3RvdHlwZS5kZWxldGVVc2luZ0tleSA9IGZ1bmN0aW9uIChrZXksIGtleW5hbWUsIHVybCkge1xuICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICBpZiAoa2V5bmFtZSA9PT0gdW5kZWZpbmVkKSBrZXluYW1lID0gJ2tleSc7XG5cbiAgICB2YXIgZGVmZXJyZWQgPSBjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XG4gICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB1cmwgPSBjb2xsZWN0aW9uLnVybCArIGtleSArICcvJztcbiAgICBjb2xsZWN0aW9uLiRodHRwLmRlbGV0ZSh1cmwpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuICAgICAgICAgICAgXy5yZW1vdmUoY29sbGVjdGlvbi5tb2RlbHMsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ba2V5bmFtZV0gPT0ga2V5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xuICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoY29sbGVjdGlvbi5leHRyYWN0KHJlc3BvbnNlKSk7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTsiLCJhbmd1bGFyLm1vZHVsZShcImNvbnRpdi5kaXJlY3RpdmVzXCIsIFtdKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMTQvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubW9kZWxzJywgW10pO1xudmFyIENvbnRpdkdsb2JhbHMgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLy9SRVNUIGVuZHBvaW50cyBmb3IgXG4gICAgICAgICdORVRXT1JLU19FTkRQT0lOVCc6ICcvbmV0bWFzdGVyL2FwaS92MS9uZXR3b3Jrcy8nLFxuICAgICAgICAnUE9MSUNJRVNfRU5EUE9JTlQnOiAnL25ldG1hc3Rlci9hcGkvdjEvcG9saWN5cy8nLFxuICAgICAgICAnUlVMRVNfRU5EUE9JTlQnOiAnL25ldG1hc3Rlci9hcGkvdjEvcnVsZXMvJyxcbiAgICAgICAgJ0FQUExJQ0FUSU9OR1JPVVBTX0VORFBPSU5UJzogJy9uZXRtYXN0ZXIvYXBpL3YxL2VuZHBvaW50R3JvdXBzLycsXG4gICAgICAgICdTRVJWSUNFTEJTX0VORFBPSU5UJzogJy9uZXRtYXN0ZXIvYXBpL3YxL3NlcnZpY2VMQnMvJyxcbiAgICAgICAgJ09SR0FOSVpBVElPTlNfRU5EUE9JTlQnOicvbmV0bWFzdGVyL2FwaS92MS90ZW5hbnRzLycsXG4gICAgICAgICdORVRXT1JLX1NFVFRJTkdTX0VORFBPSU5UJzogJy9uZXRtYXN0ZXIvYXBpL3YxL2dsb2JhbHMvJyxcbiAgICAgICAgJ0JBTkRXSURUSF9FTkRQT0lOVCc6ICcvbmV0bWFzdGVyL2FwaS92MS9uZXRwcm9maWxlcy8nLFxuXG5cbiAgICAgICAgLy9SRVNUIGVuZHBvaW50cyBmb3IgVk9MTUFTVEVSXG4gICAgICAgICdWT0xVTUVTX0VORFBPSU5UJzogJy92b2xtYXN0ZXIvdm9sdW1lcy8nLFxuICAgICAgICAnVk9MVU1FU19DUkVBVEVfRU5EUE9JTlQnOiAnL3ZvbG1hc3Rlci92b2x1bWVzL2NyZWF0ZS8nLFxuICAgICAgICAnVk9MVU1FU19ERUxFVEVfRU5EUE9JTlQnOiAnL3ZvbG1hc3Rlci92b2x1bWVzL3JlbW92ZS8nLFxuICAgICAgICAnVk9MVU1FU19DT1BZU05BUFNIT1RTX0VORFBPSU5UJzogJy92b2xtYXN0ZXIvdm9sdW1lcy9jb3B5LycsXG4gICAgICAgICdWT0xVTUVTX1VTRVNfRU5EUE9JTlQnOiAnL3ZvbG1hc3Rlci91c2VzL21vdW50cy8nLFxuICAgICAgICAnVk9MVU1FU19TTkFQU0hPVFNfRU5EUE9JTlQnOiAnL3ZvbG1hc3Rlci9zbmFwc2hvdHMvJyxcblxuICAgICAgICAnU1RPUkFHRVBPTElDSUVTX0VORFBPSU5UJzogJy92b2xtYXN0ZXIvcG9saWNpZXMvJyxcblxuXG4gICAgICAgIC8vUkVTVCBlbmRwb2ludHMgZm9yIENMVVNURVJcbiAgICAgICAgJ05PREVTX0xJU1RfRU5EUE9JTlQnOiAnL2luZm8vbm9kZXMnLFxuICAgICAgICAnTk9ERVNfRElTQ09WRVJfRU5EUE9JTlQnOiAnL2Rpc2NvdmVyL25vZGVzJyxcbiAgICAgICAgJ05PREVTX0NPTU1JU1NJT05fRU5EUE9JTlQnOiAnL2NvbW1pc3Npb24vbm9kZXMnLFxuICAgICAgICAnTk9ERVNfREVDT01NSVNTSU9OX0VORFBPSU5UJzogJy9kZWNvbW1pc3Npb24vbm9kZXMnLFxuICAgICAgICAnTk9ERVNfTUFJTlRFTkFOQ0VfRU5EUE9JTlQnOiAnL21haW50ZW5hbmNlL25vZGVzJyxcbiAgICAgICAgJ05PREVTX0xBU1RfSk9CX0VORFBPSU5UJzogJy9pbmZvL2pvYi9sYXN0JyxcbiAgICAgICAgJ05PREVTX0FDVElWRV9KT0JfRU5EUE9JTlQnOiAnL2luZm8vam9iL2FjdGl2ZScsXG4gICAgICAgICdOT0RFU19TRVRUSU5HU19TRVRfRU5EUE9JTlQnOiAnL2dsb2JhbHMnLFxuICAgICAgICAnTk9ERVNfU0VUVElOR1NfR0VUX0VORFBPSU5UJzogJy9pbmZvL2dsb2JhbHMnLFxuXG4gICAgICAgIC8vUmVmcmVzaCBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgJ1JFRlJFU0hfSU5URVJWQUwnOiA1MDAwLFxuXG4gICAgICAgIC8vUmVnRXggZm9yIHZhbGlkYXRpb25cbiAgICAgICAgJ0NJRFJfUkVHRVgnIDogJ14oKFswLTldfFsxLTldWzAtOV18MVswLTldezJ9fDJbMC00XVswLTldfDI1WzAtNV0pXFwuKXszfShbMC05XXxbMS05XVswLTldfDFbMC05XXsyfXwyWzAtNF1bMC05XXwyNVswLTVdKShcXC8oWzAtOV18WzEtMl1bMC05XXwzWzAtMl0pKSQnLFxuICAgICAgICAnVkxBTl9SRUdFWCcgOiAnXihbMC05XXsxLDR9Py1bMC05XXsxLDR9PykkJyxcbiAgICAgICAgJ1ZYTEFOX1JFR0VYJyA6ICdeKFswLTldezEsOH0/LVswLTldezEsOH0/KSQnIFxuICAgIH1cbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYudXRpbHMnLCBbXSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzE4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmFwcGxpY2F0aW9uZ3JvdXBzJywgWydjb250aXYubW9kZWxzJywgJ2NvbnRpdi5kaXJlY3RpdmVzJywgJ2NvbnRpdi51dGlscyddKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5hcHBsaWNhdGlvbmdyb3VwcycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvYXBwbGljYXRpb25ncm91cHMnLFxuICAgICAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiB1aS12aWV3IGNsYXNzPVwidWkgY29udGFpbmVyXCIvPidcbiAgICAgICAgICAgIH0pXG4gICAgfV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzE4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmRhc2hib2FyZCcsIFsnY29udGl2Lm1vZGVscyddKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xOS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5sb2dpbicsIFsnY29udGl2LnV0aWxzJ10pOyIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xOS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5tZW51JywgW10pOyIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xOC8xNi5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm5ldHdvcmtwb2xpY2llcycsIFsnY29udGl2Lm1vZGVscycsICdjb250aXYuZGlyZWN0aXZlcycsICdjb250aXYudXRpbHMnXSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzE4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm5ldHdvcmtzJywgWydjb250aXYubW9kZWxzJywgJ2NvbnRpdi5kaXJlY3RpdmVzJywgJ2NvbnRpdi51dGlscyddKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3MnLCB7XG4gICAgICAgICAgICB1cmw6ICcvbmV0d29ya3MnLFxuICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgdWktdmlldyBjbGFzcz1cInVpIGNvbnRhaW5lclwiLz4nXG4gICAgICAgIH0pXG4gICAgfV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzE4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm5vZGVzJywgWydjb250aXYubW9kZWxzJywgJ2NvbnRpdi5kaXJlY3RpdmVzJywgJ2NvbnRpdi51dGlscyddKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5ub2RlcycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvbm9kZXMnLFxuICAgICAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiB1aS12aWV3IGNsYXNzPVwidWkgY29udGFpbmVyXCIvPidcbiAgICAgICAgICAgIH0pXG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5vcmdhbml6YXRpb25zJywgWydjb250aXYubW9kZWxzJywgJ2NvbnRpdi5kaXJlY3RpdmVzJywgJ2NvbnRpdi51dGlscyddKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnY29udGl2Lm1lbnUub3JnYW5pemF0aW9ucycsIHtcbiAgICAgICAgICAgIHVybDogJy9vcmdhbml6YXRpb25zJyxcbiAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHVpLXZpZXcgY2xhc3M9XCJ1aSBjb250YWluZXJcIi8+J1xuICAgICAgICB9KVxuICAgIH1dKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuc2VydmljZWxicycsIFsnY29udGl2Lm1vZGVscycsICdjb250aXYuZGlyZWN0aXZlcycsICdjb250aXYudXRpbHMnXSlcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc2VydmljZWxicycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2VydmljZWxicycsXG4gICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHVpLXZpZXcgY2xhc3M9XCJ1aSBjb250YWluZXJcIi8+J1xuICAgICAgICAgICAgfSlcbiAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2LnNldHRpbmdzJywgWydjb250aXYubW9kZWxzJywgJ2NvbnRpdi5kaXJlY3RpdmVzJywgJ2NvbnRpdi51dGlscyddKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5zZXR0aW5ncycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9nbG9iYWwnLFxyXG4gICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgdWktdmlldyBjbGFzcz1cInVpIGNvbnRhaW5lclwiLz4nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc2V0dGluZ3MuZGV0YWlscycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zZXR0aW5ncycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NldHRpbmdzL3NldHRpbmdzbWVudS5odG1sJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNldHRpbmdzLmRldGFpbHMubG9ncycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9sb2dzJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc2V0dGluZ3MuZGV0YWlscy5hdXRoJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2F1dGgnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5zZXR0aW5ncy5kZXRhaWxzLmxpY2Vuc2UnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbGljZW5zZScsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNldHRpbmdzLmRldGFpbHMucG9saWNpZXMnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcG9saWNpZXMnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJydcclxuICAgICAgICAgICAgfSlcclxuICAgIH1dKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuc3RvcmFnZXBvbGljaWVzJywgWydjb250aXYubW9kZWxzJywgJ2NvbnRpdi5kaXJlY3RpdmVzJywgJ2NvbnRpdi51dGlscyddKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5zdG9yYWdlcG9saWNpZXMnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3N0b3JhZ2Vwb2xpY2llcycsXG4gICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHVpLXZpZXcgY2xhc3M9XCJ1aSBjb250YWluZXJcIi8+J1xuICAgICAgICAgICAgfSlcbiAgICB9XSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzE4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnZvbHVtZXMnLCBbJ2NvbnRpdi5tb2RlbHMnLCAnY29udGl2LmRpcmVjdGl2ZXMnLCAnY29udGl2LnV0aWxzJ10pXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnZvbHVtZXMnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3ZvbHVtZXMnLFxuICAgICAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiB1aS12aWV3IGNsYXNzPVwidWkgY29udGFpbmVyXCIvPidcbiAgICAgICAgICAgIH0pXG4gICAgfV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbi8vIERlY2xhcmUgYXBwIGxldmVsIG1vZHVsZSB3aGljaCBkZXBlbmRzIG9uIHZpZXdzLCBhbmQgY29tcG9uZW50c1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdkFwcCcsIFtcbiAgICAgICAgJ3VpLnJvdXRlcicsXG4gICAgICAgICdjb250aXYubG9naW4nLFxuICAgICAgICAnY29udGl2Lm1lbnUnLFxuICAgICAgICAnY29udGl2LmRhc2hib2FyZCcsXG4gICAgICAgICdjb250aXYuYXBwbGljYXRpb25ncm91cHMnLFxuICAgICAgICAnY29udGl2Lm5ldHdvcmtzJyxcbiAgICAgICAgJ2NvbnRpdi5uZXR3b3JrcG9saWNpZXMnLFxuICAgICAgICAnY29udGl2LnN0b3JhZ2Vwb2xpY2llcycsXG4gICAgICAgICdjb250aXYuc2VydmljZWxicycsXG4gICAgICAgICdjb250aXYudm9sdW1lcycsXG4gICAgICAgICdjb250aXYubm9kZXMnLFxuICAgICAgICAnY29udGl2Lm9yZ2FuaXphdGlvbnMnLFxuICAgICAgICAnY29udGl2LnNldHRpbmdzJyxcbiAgICBdKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAvL2Fic3RyYWN0IHN0YXRlIHNlcnZlcyBhcyBhIFBMQUNFSE9MREVSIG9yIE5BTUVTUEFDRSBmb3IgYXBwbGljYXRpb24gc3RhdGVzXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdicsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcnLFxuICAgICAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiB1aS12aWV3IGNsYXNzPVwidWkgZmx1aWQgY29udGFpbmVyXCIvPidcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcblxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG4gICAgfV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiAzLzExLzE2LlxuICovXG4vKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMTAvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuYXBwbGljYXRpb25ncm91cHMnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5hcHBsaWNhdGlvbmdyb3Vwcy5jcmVhdGUnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2NyZWF0ZScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0FwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsIGFzIGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcGxpY2F0aW9uZ3JvdXBzL2FwcGxpY2F0aW9uZ3JvdXBjcmVhdGUuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignQXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwnLCBbXG4gICAgICAgICckc3RhdGUnLFxuICAgICAgICAnQXBwbGljYXRpb25Hcm91cHNNb2RlbCcsXG4gICAgICAgICdOZXR3b3Jrc01vZGVsJyxcbiAgICAgICAgJ1BvbGljaWVzTW9kZWwnLFxuICAgICAgICAnQmFuZHdpZHRoTW9kZWwnLFxuICAgICAgICAnUnVsZXNNb2RlbCcsXG4gICAgICAgICdBcHBsaWNhdGlvbkdyb3VwU2VydmljZScsXG4gICAgICAgICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsXG4gICAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLFxuICAgICAgICAgICAgICAgICAgTmV0d29ya3NNb2RlbCxcbiAgICAgICAgICAgICAgICAgIFBvbGljaWVzTW9kZWwsXG4gICAgICAgICAgICAgICAgICBCYW5kd2lkdGhNb2RlbCxcbiAgICAgICAgICAgICAgICAgIFJ1bGVzTW9kZWwsXG4gICAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3VwU2VydmljZSxcbiAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICB2YXIgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwgPSB0aGlzO1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwubmV0d29ya3MgPSBbXTtcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsLmlzb2xhdGlvblBvbGljaWVzID0gW107XG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5iYW5kd2lkdGhQcm9maWxlcyA9IFtdO1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuYXBwbGljYXRpb25Hcm91cCA9IHt9O1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuc2VsZWN0ZWROZXR3b3JrID0ge307XG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5zZWxlY3RlZFBvbGljeSA9IHt9O1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuc2VsZWN0ZWRQb2xpY2llcyA9IFtdO1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuc2VsZWN0ZWRQcm9maWxlID0ge307XG5cbiAgICAgICAgICAgIC8vVG8gZGlzcGxheSBpbmNvbWluZyBhbmQgb3V0Z29pbmcgcnVsZXMgZm9yIHNlbGVjdGVkIHBvbGljaWVzXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5pbmNvbWluZ1J1bGVzID0gW107XG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5vdXRnb2luZ1J1bGVzID0gW107XG5cbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsLmlzb2xhdGlvblBvbGljaWVzVmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub0FwcGxpY2F0aW9uR3JvdXAoKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5hcHBsaWNhdGlvbmdyb3Vwcy5saXN0Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbENyZWF0aW5nKCkge1xuICAgICAgICAgICAgICAgIHJldHVyblRvQXBwbGljYXRpb25Hcm91cCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBuZXR3b3JrcyBmb3IgdGhlIGdpdmVuIHRlbmFudC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TmV0d29ya3MoKSB7XG4gICAgICAgICAgICAgICAgTmV0d29ya3NNb2RlbC5nZXQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwubmV0d29ya3MgPSBfLmZpbHRlcihyZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd0ZW5hbnROYW1lJzogJ2RlZmF1bHQnLy9UT0RPOiBSZW1vdmUgaGFyZGNvZGVkIHRlbmFudC5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IHBvbGljaWVzIGZvciB0aGUgZ2l2ZW4gdGVuYW50LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRJc29sYXRpb25Qb2xpY2llcygpIHtcbiAgICAgICAgICAgICAgICBQb2xpY2llc01vZGVsLmdldCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5pc29sYXRpb25Qb2xpY2llcyA9IF8uZmlsdGVyKHJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3RlbmFudE5hbWUnOiAnZGVmYXVsdCcvL1RPRE86IFJlbW92ZSBoYXJkY29kZWQgdGVuYW50LlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBZGQgcG9saWN5IHRvIG5ldyBhcHBsaWNhdGlvbiBncm91cFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRJc29sYXRpb25Qb2xpY3koKSB7XG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cFNlcnZpY2UuYWRkSXNvbGF0aW9uUG9saWN5KGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZW1vdmUgcG9saWN5IGZyb20gbmV3IGFwcGxpY2F0aW9uIGdyb3VwXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUlzb2xhdGlvblBvbGljeShwb2xpY3lOYW1lKSB7XG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cFNlcnZpY2UucmVtb3ZlSXNvbGF0aW9uUG9saWN5KGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsLCBwb2xpY3lOYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlQXBwbGljYXRpb25Hcm91cCgpIHtcbiAgICAgICAgICAgICAgICAvL2Zvcm0gY29udHJvbGxlciBpcyBpbmplY3RlZCBieSB0aGUgaHRtbCB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgIC8vY2hlY2tpbmcgaWYgYWxsIHZhbGlkYXRpb25zIGhhdmUgcGFzc2VkXG4gICAgICAgICAgICAgICAgaWYgKGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsLmZvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuYXBwbGljYXRpb25Hcm91cC5uZXR3b3JrTmFtZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5zZWxlY3RlZE5ldHdvcmsubmV0d29ya05hbWU7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5hcHBsaWNhdGlvbkdyb3VwLm5ldFByb2ZpbGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuc2VsZWN0ZWRQcm9maWxlLnByb2ZpbGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuYXBwbGljYXRpb25Hcm91cC5rZXkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5nZW5lcmF0ZUtleShhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5hcHBsaWNhdGlvbkdyb3VwKTtcblxuICAgICAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLmNyZWF0ZShhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5hcHBsaWNhdGlvbkdyb3VwKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvQXBwbGljYXRpb25Hcm91cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3IoYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IHByb2ZpbGVzIGZvciB0aGUgZ2l2ZW4gdGVuYW50LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRCYW5kd2lkdGhQcm9maWxlcygpIHtcbiAgICAgICAgICAgICAgICBCYW5kd2lkdGhNb2RlbC5nZXQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuYmFuZHdpZHRoUHJvZmlsZXMgPSBfLmZpbHRlcihyZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd0ZW5hbnROYW1lJzogJ2RlZmF1bHQnLy9UT0RPOiBSZW1vdmUgaGFyZGNvZGVkIHRlbmFudC5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNldEZvcm0oKSB7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGFwcGxpY2F0aW9uR3JvdXBDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5hcHBsaWNhdGlvbkdyb3VwID0ge1xuICAgICAgICAgICAgICAgICAgICBncm91cE5hbWU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBuZXR3b3JrTmFtZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHBvbGljaWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50TmFtZTogJ2RlZmF1bHQnLy9UT0RPOiBSZW1vdmUgaGFyZGNvZGVkIHRlbmFudC5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnZXROZXR3b3JrcygpO1xuICAgICAgICAgICAgZ2V0SXNvbGF0aW9uUG9saWNpZXMoKTtcbiAgICAgICAgICAgIGdldEJhbmR3aWR0aFByb2ZpbGVzKCk7XG5cblxuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuY3JlYXRlQXBwbGljYXRpb25Hcm91cCA9IGNyZWF0ZUFwcGxpY2F0aW9uR3JvdXA7XG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3JlYXRlQ3RybC5jYW5jZWxDcmVhdGluZyA9IGNhbmNlbENyZWF0aW5nO1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwuYWRkSXNvbGF0aW9uUG9saWN5ID0gYWRkSXNvbGF0aW9uUG9saWN5O1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cENyZWF0ZUN0cmwucmVtb3ZlSXNvbGF0aW9uUG9saWN5ID0gcmVtb3ZlSXNvbGF0aW9uUG9saWN5O1xuXG5cbiAgICAgICAgICAgIHJlc2V0Rm9ybSgpO1xuICAgICAgICB9XSk7IiwiIC8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy8xNS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5hcHBsaWNhdGlvbmdyb3VwcycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LmFwcGxpY2F0aW9uZ3JvdXBzLmRldGFpbHMnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMvOmtleScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0FwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCBhcyBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwbGljYXRpb25ncm91cHMvYXBwbGljYXRpb25ncm91cGRldGFpbHMuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LmFwcGxpY2F0aW9uZ3JvdXBzLmVkaXQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2VkaXQvOmtleScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0FwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCBhcyBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwbGljYXRpb25ncm91cHMvYXBwbGljYXRpb25ncm91cGRldGFpbHMuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignQXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsJywgW1xuICAgICAgICAnJHN0YXRlJyxcbiAgICAgICAgJyRzdGF0ZVBhcmFtcycsXG4gICAgICAgICdBcHBsaWNhdGlvbkdyb3Vwc01vZGVsJyxcbiAgICAgICAgJ1BvbGljaWVzTW9kZWwnLFxuICAgICAgICAnQmFuZHdpZHRoTW9kZWwnLFxuICAgICAgICAnUnVsZXNNb2RlbCcsXG4gICAgICAgICdBcHBsaWNhdGlvbkdyb3VwU2VydmljZScsXG4gICAgICAgICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsXG4gICAgICAgICAgICAgICAgICAkc3RhdGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLFxuICAgICAgICAgICAgICAgICAgUG9saWNpZXNNb2RlbCxcbiAgICAgICAgICAgICAgICAgIEJhbmR3aWR0aE1vZGVsLFxuICAgICAgICAgICAgICAgICAgUnVsZXNNb2RlbCxcbiAgICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uR3JvdXBTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwgPSB0aGlzO1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmlzb2xhdGlvblBvbGljaWVzID0gW107XG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuYXBwbGljYXRpb25Hcm91cCA9IHt9O1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLnNlbGVjdGVkTmV0d29yayA9IHt9O1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLnNlbGVjdGVkUG9saWN5ID0ge307XG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuc2VsZWN0ZWRQb2xpY2llcyA9IFtdO1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLnNlbGVjdGVkUHJvZmlsZSA9IHt9O1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmJhbmR3aWR0aFByb2ZpbGVzID0gW107XG5cbiAgICAgICAgICAgIC8vVG8gZGlzcGxheSBpbmNvbWluZyBhbmQgb3V0Z29pbmcgcnVsZXMgZm9yIHNlbGVjdGVkIHBvbGljaWVzXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuaW5jb21pbmdSdWxlcyA9IFtdO1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLm91dGdvaW5nUnVsZXMgPSBbXTtcblxuXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuaXNvbGF0aW9uUG9saWNpZXNWaXNpYmxlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVG8gc2hvdyBlZGl0IG9yIGRldGFpbHMgc2NyZWVuIGJhc2VkIG9uIHRoZSByb3V0ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRNb2RlKCkge1xuICAgICAgICAgICAgICAgIGlmICgkc3RhdGUuaXMoJ2NvbnRpdi5tZW51LmFwcGxpY2F0aW9uZ3JvdXBzLmVkaXQnKSkge1xuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwubW9kZSA9ICdlZGl0JztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwubW9kZSA9ICdkZXRhaWxzJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvQXBwbGljYXRpb25Hcm91cCgpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LmFwcGxpY2F0aW9uZ3JvdXBzLmxpc3QnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9BcHBsaWNhdGlvbkdyb3VwRGV0YWlscygpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LmFwcGxpY2F0aW9uZ3JvdXBzLmRldGFpbHMnLCB7J2tleSc6IGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5hcHBsaWNhdGlvbkdyb3VwLmtleX0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjYW5jZWxFZGl0aW5nKCkge1xuICAgICAgICAgICAgICAgIHJldHVyblRvQXBwbGljYXRpb25Hcm91cERldGFpbHMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UnVsZXMoKSB7XG4gICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXAucG9saWNpZXMuZm9yRWFjaChmdW5jdGlvbiAocG9saWN5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVG8gZGlzcGxheSBydWxlcyBvZiBzZWxlY3RlZCBwb2xpY2llc1xuICAgICAgICAgICAgICAgICAgICBSdWxlc01vZGVsLmdldEluY29taW5nUnVsZXMocG9saWN5LCAnZGVmYXVsdCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocnVsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuaW5jb21pbmdSdWxlcywgcnVsZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFJ1bGVzTW9kZWwuZ2V0T3V0Z29pbmdSdWxlcyhwb2xpY3ksICdkZWZhdWx0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChydWxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5vdXRnb2luZ1J1bGVzLCBydWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVBcHBsaWNhdGlvbkdyb3VwKCkge1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5kZWxldGUoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXApLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvQXBwbGljYXRpb25Hcm91cCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IHBvbGljaWVzIGZvciB0aGUgZ2l2ZW4gdGVuYW50LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRJc29sYXRpb25Qb2xpY2llcygpIHtcblxuICAgICAgICAgICAgICAgIFBvbGljaWVzTW9kZWwuZ2V0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5pc29sYXRpb25Qb2xpY2llcyA9IF8uZmlsdGVyKHJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3RlbmFudE5hbWUnOiAnZGVmYXVsdCcvL1RPRE86IFJlbW92ZSBoYXJkY29kZWQgdGVuYW50LlxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFkZCBwb2xpY3kgdG8gYXBwbGljYXRpb24gZ3JvdXBcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gYWRkSXNvbGF0aW9uUG9saWN5KCkge1xuICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uR3JvdXBTZXJ2aWNlLmFkZElzb2xhdGlvblBvbGljeShhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlbW92ZSBwb2xpY3kgZnJvbSBhcHBsaWNhdGlvbiBncm91cFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVJc29sYXRpb25Qb2xpY3kocG9saWN5TmFtZSkge1xuICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uR3JvdXBTZXJ2aWNlLnJlbW92ZUlzb2xhdGlvblBvbGljeShhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwsIHBvbGljeU5hbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBzYXZlQXBwbGljYXRpb25Hcm91cCgpIHtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwpO1xuXG4gICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXAubmV0UHJvZmlsZSA9IGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5zZWxlY3RlZFByb2ZpbGUucHJvZmlsZU5hbWU7XG5cbiAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLnNhdmUoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXApLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblRvQXBwbGljYXRpb25Hcm91cERldGFpbHMoKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsKTtcbiAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwpO1xuXG4gICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLmdldE1vZGVsQnlLZXkoJHN0YXRlUGFyYW1zLmtleSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXAgPSBncm91cDtcbiAgICAgICAgICAgICAgICAgICAgLy9BcHBsaWNhdGlvbiBHcm91cHMgbWlnaHQgbm90IGhhdmUgYW55IHBvbGljaWVzIGFzc29jaWF0ZWQgd2l0aCB0aGVtIHNvIGRlZmluZSBhbiBlbXB0eSBhcnJheVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXAucG9saWNpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXAucG9saWNpZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBnZXRSdWxlcygpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBwcm9maWxlcyBmb3IgdGhlIGdpdmVuIHRlbmFudC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QmFuZHdpZHRoUHJvZmlsZXMoKSB7XG5cbiAgICAgICAgICAgICAgICBCYW5kd2lkdGhNb2RlbC5nZXQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmJhbmR3aWR0aFByb2ZpbGVzID0gXy5maWx0ZXIocmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndGVuYW50TmFtZSc6ICdkZWZhdWx0Jy8vVE9ETzogUmVtb3ZlIGhhcmRjb2RlZCB0ZW5hbnQuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZ2V0QmFuZHdpZHRoUHJvZmlsZXMoKTtcbiAgICAgICAgICAgIGdldElzb2xhdGlvblBvbGljaWVzKCk7XG5cbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5zYXZlQXBwbGljYXRpb25Hcm91cCA9IHNhdmVBcHBsaWNhdGlvbkdyb3VwO1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmNhbmNlbEVkaXRpbmcgPSBjYW5jZWxFZGl0aW5nO1xuICAgICAgICAgICAgYXBwbGljYXRpb25Hcm91cERldGFpbHNDdHJsLmFkZElzb2xhdGlvblBvbGljeSA9IGFkZElzb2xhdGlvblBvbGljeTtcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uR3JvdXBEZXRhaWxzQ3RybC5yZW1vdmVJc29sYXRpb25Qb2xpY3kgPSByZW1vdmVJc29sYXRpb25Qb2xpY3k7XG4gICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwRGV0YWlsc0N0cmwuZGVsZXRlQXBwbGljYXRpb25Hcm91cCA9IGRlbGV0ZUFwcGxpY2F0aW9uR3JvdXA7XG5cbiAgICAgICAgICAgIHNldE1vZGUoKTtcblxuICAgICAgICB9XSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiAzLzExLzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmFwcGxpY2F0aW9uZ3JvdXBzJylcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuYXBwbGljYXRpb25ncm91cHMubGlzdCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvbGlzdCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0FwcGxpY2F0aW9uR3JvdXBMaXN0Q3RybCBhcyBhcHBsaWNhdGlvbkdyb3VwTGlzdEN0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwbGljYXRpb25ncm91cHMvYXBwbGljYXRpb25ncm91cGxpc3QuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignQXBwbGljYXRpb25Hcm91cExpc3RDdHJsJyxcbiAgICAgICAgWyckc2NvcGUnLCAnJGludGVydmFsJywgJyRmaWx0ZXInLCAnQXBwbGljYXRpb25Hcm91cHNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaW50ZXJ2YWwsICRmaWx0ZXIsIEFwcGxpY2F0aW9uR3JvdXBzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFwcGxpY2F0aW9uR3JvdXBMaXN0Q3RybCA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRBcHBsaWNhdGlvbkdyb3VwcyhyZWxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5nZXQocmVsb2FkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYXBwbGljYXRpb25Hcm91cExpc3RDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwTGlzdEN0cmwuZ3JvdXBzID0gJGZpbHRlcignb3JkZXJCeScpKHJlc3VsdCwgJ2dyb3VwTmFtZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGFwcGxpY2F0aW9uR3JvdXBMaXN0Q3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0xvYWQgZnJvbSBjYWNoZSBmb3IgcXVpY2sgZGlzcGxheSBpbml0aWFsbHlcbiAgICAgICAgICAgICAgICBnZXRBcHBsaWNhdGlvbkdyb3VwcyhmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZTtcbiAgICAgICAgICAgICAgICAvL0Rvbid0IHN0YXJ0IGF1dG8tcmVmcmVzaCBpZiBvbmUgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xuICAgICAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQocHJvbWlzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRBcHBsaWNhdGlvbkdyb3Vwcyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vc3RvcCBwb2xsaW5nIHdoZW4gdXNlciBtb3ZlcyBhd2F5IGZyb20gdGhlIHBhZ2VcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChwcm9taXNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1dKTtcbiIsIlxuLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiAzLzE2LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LmFwcGxpY2F0aW9uZ3JvdXBzJylcbiAgICAuZmFjdG9yeSgnQXBwbGljYXRpb25Hcm91cFNlcnZpY2UnLCBbJ1J1bGVzTW9kZWwnLCBmdW5jdGlvbiAoUnVsZXNNb2RlbCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgcG9saWN5IHRvIGFwcGxpY2F0aW9uIGdyb3VwXG4gICAgICAgICAqIEBwYXJhbSBhcHBsaWNhdGlvbkdyb3VwQ3RybCBDb250cm9sbGVyIGZvciBhcHBsaWNhdGlvbiBncm91cCBlZGl0IG9yIGNyZWF0ZSBvcGVyYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFkZElzb2xhdGlvblBvbGljeShhcHBsaWNhdGlvbkdyb3VwQ3RybCkge1xuICAgICAgICAgICAgaWYgKF8uZmluZChhcHBsaWNhdGlvbkdyb3VwQ3RybC5zZWxlY3RlZFBvbGljaWVzLCBhcHBsaWNhdGlvbkdyb3VwQ3RybC5zZWxlY3RlZFBvbGljeSkgPT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAvL1RvIGRpc3BsYXkgc2VsZWN0ZWQgcG9saWNpZXNcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3RybC5zZWxlY3RlZFBvbGljaWVzLnB1c2goYXBwbGljYXRpb25Hcm91cEN0cmwuc2VsZWN0ZWRQb2xpY3kpO1xuXG4gICAgICAgICAgICAgICAgLy9UbyBkaXNwbGF5IHJ1bGVzIG9mIHNlbGVjdGVkIHBvbGljaWVzXG4gICAgICAgICAgICAgICAgUnVsZXNNb2RlbC5nZXRJbmNvbWluZ1J1bGVzKGFwcGxpY2F0aW9uR3JvdXBDdHJsLnNlbGVjdGVkUG9saWN5LnBvbGljeU5hbWUsICdkZWZhdWx0JylcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcHBsaWNhdGlvbkdyb3VwQ3RybC5pbmNvbWluZ1J1bGVzLCBydWxlcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFJ1bGVzTW9kZWwuZ2V0T3V0Z29pbmdSdWxlcyhhcHBsaWNhdGlvbkdyb3VwQ3RybC5zZWxlY3RlZFBvbGljeS5wb2xpY3lOYW1lLCAnZGVmYXVsdCcpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChydWxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYXBwbGljYXRpb25Hcm91cEN0cmwub3V0Z29pbmdSdWxlcywgcnVsZXMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vVG8gYmUgYWRkZWQgdG8gYXBwbGljYXRpb24gZ3JvdXAgYW5kIHNhdmVkIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkdyb3VwQ3RybC5hcHBsaWNhdGlvbkdyb3VwLnBvbGljaWVzXG4gICAgICAgICAgICAgICAgICAgIC5wdXNoKGFwcGxpY2F0aW9uR3JvdXBDdHJsLnNlbGVjdGVkUG9saWN5LnBvbGljeU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZSBwb2xpY3kgZnJvbSBhcHBsaWNhdGlvbiBncm91cFxuICAgICAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25Hcm91cEN0cmwgQ29udHJvbGxlciBmb3IgYXBwbGljYXRpb24gZ3JvdXAgZWRpdCBvciBjcmVhdGUgb3BlcmF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiByZW1vdmVJc29sYXRpb25Qb2xpY3koYXBwbGljYXRpb25Hcm91cEN0cmwsIHBvbGljeU5hbWUpIHtcbiAgICAgICAgICAgIF8ucmVtb3ZlKGFwcGxpY2F0aW9uR3JvdXBDdHJsLmFwcGxpY2F0aW9uR3JvdXAucG9saWNpZXMsIGZ1bmN0aW9uIChwb2xpY3kpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9saWN5ID09IHBvbGljeU5hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8ucmVtb3ZlKGFwcGxpY2F0aW9uR3JvdXBDdHJsLmluY29taW5nUnVsZXMsIGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGUucG9saWN5TmFtZSA9PSBwb2xpY3lOYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLnJlbW92ZShhcHBsaWNhdGlvbkdyb3VwQ3RybC5vdXRnb2luZ1J1bGVzLCBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBydWxlLnBvbGljeU5hbWUgPT0gcG9saWN5TmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFkZElzb2xhdGlvblBvbGljeTogYWRkSXNvbGF0aW9uUG9saWN5LFxuICAgICAgICAgICAgcmVtb3ZlSXNvbGF0aW9uUG9saWN5OiByZW1vdmVJc29sYXRpb25Qb2xpY3lcbiAgICAgICAgfVxuXG4gICAgfV0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy8xMS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5kYXNoYm9hcmQnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5kYXNoYm9hcmQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2Rhc2hib2FyZCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0Rhc2hib2FyZEN0cmwgYXMgZGFzaGJvYXJkQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdkYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWwnXG4gICAgICAgICAgICB9KTtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignRGFzaGJvYXJkQ3RybCcsXG4gICAgICAgIFtcbiAgICAgICAgICAgICckc2NvcGUnLFxuICAgICAgICAgICAgJyRpbnRlcnZhbCcsXG4gICAgICAgICAgICAnTm9kZXNNb2RlbCcsXG4gICAgICAgICAgICAnTmV0d29ya3NNb2RlbCcsXG4gICAgICAgICAgICAnVm9sdW1lc01vZGVsJyxcbiAgICAgICAgICAgICdBcHBsaWNhdGlvbkdyb3Vwc01vZGVsJyxcbiAgICAgICAgICAgICdQb2xpY2llc01vZGVsJyxcbiAgICAgICAgICAgICdTdG9yYWdlUG9saWNpZXNNb2RlbCcsXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbCxcbiAgICAgICAgICAgICAgICAgICAgICBOb2Rlc01vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgIE5ldHdvcmtzTW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgVm9sdW1lc01vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uR3JvdXBzTW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgUG9saWNpZXNNb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICBTdG9yYWdlUG9saWNpZXNNb2RlbCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXNoYm9hcmRDdHJsID0gdGhpcztcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldERhc2hib2FyZEluZm8ocmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgIE5vZGVzTW9kZWwuZ2V0KHJlbG9hZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLm5vZGVzID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBOZXR3b3Jrc01vZGVsLmdldChyZWxvYWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC5uZXR3b3JrcyA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgVm9sdW1lc01vZGVsLmdldChyZWxvYWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC52b2x1bWVzID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLmdldChyZWxvYWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC5ncm91cHMgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFBvbGljaWVzTW9kZWwuZ2V0KHJlbG9hZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLm5ldHdvcmtwb2xpY2llcyA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmFnZVBvbGljaWVzTW9kZWwuZ2V0KHJlbG9hZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLnN0b3JhZ2Vwb2xpY2llcyA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL1dpbGwgZGlzcGxheSAwIGlmIHRoZXJlIGlzIGVycm9yIGZldGNoaW5nIGRhdGFcbiAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLm5vZGVzID0gMDtcbiAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLm5ldHdvcmtzID0gMDtcbiAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLnZvbHVtZXMgPSAwO1xuICAgICAgICAgICAgICAgIGRhc2hib2FyZEN0cmwuZ3JvdXBzID0gMDtcbiAgICAgICAgICAgICAgICBkYXNoYm9hcmRDdHJsLm5ldHdvcmtwb2xpY2llcyA9IDA7XG4gICAgICAgICAgICAgICAgZGFzaGJvYXJkQ3RybC5zdG9yYWdlcG9saWNpZXMgPSAwO1xuXG4gICAgICAgICAgICAgICAgLy9Mb2FkIGZyb20gY2FjaGUgZm9yIHF1aWNrIGRpc3BsYXkgaW5pdGlhbGx5XG4gICAgICAgICAgICAgICAgZ2V0RGFzaGJvYXJkSW5mbyhmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldERhc2hib2FyZEluZm8odHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSwgNTAwMCk7XG5cbiAgICAgICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTkvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubG9naW4nKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubG9naW4nLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnLycsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdsb2dpbi9sb2dpbi5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsIGFzIGxvZ2luQ3RybCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignTG9naW5DdHJsJywgWyckc3RhdGUnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCBDUlVESGVscGVyU2VydmljZSkge1xuICAgICAgICAgICAgdmFyIGxvZ2luQ3RybCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvRGFzaGJvYXJkKCkge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUuZGFzaGJvYXJkJywge3VzZXJuYW1lOiBsb2dpbkN0cmwudXNlcm5hbWV9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gbG9naW4oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuVG9EYXNoYm9hcmQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihsb2dpbkN0cmwpO1xuICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGxvZ2luQ3RybCk7XG4gICAgICAgICAgICBsb2dpbkN0cmwubG9naW4gPSBsb2dpbjtcblxuICAgICAgICB9XSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzE5LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm1lbnUnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvbScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtZW51L21lbnUuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ01lbnVDdHJsIGFzIG1lbnVDdHJsJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHt1c2VybmFtZTogbnVsbH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignTWVudUN0cmwnLCBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgdmFyIG1lbnVDdHJsID0gdGhpcztcblxuICAgICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5sb2dpbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVudUN0cmwudXNlcm5hbWUgPSAkc3RhdGVQYXJhbXMudXNlcm5hbWU7XG4gICAgICAgIG1lbnVDdHJsLmxvZ291dCA9IGxvZ291dDtcblxuICAgIH1dKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgaGFyZGlrIGdhbmRoaSBvbiA2LzI0LzE2LlxuICovXG5cblxuYW5ndWxhci5tb2R1bGUoXCJjb250aXYubmV0d29ya3BvbGljaWVzXCIpXG4gICAgLmRpcmVjdGl2ZShcImN0dkJhbmR3aWR0aFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBiYW5kd2lkdGhQb2xpY3k6Jz0nLFxuICAgICAgICAgICAgICAgIHR5cGU6XCJAXCJcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGxpbms6ZnVuY3Rpb24oc2NvcGUpIHtcblxuICAgICAgICAgICAgICAgIGlmIChzY29wZS5iYW5kd2lkdGhQb2xpY3kuYmFuZHdpZHRoICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5kd2lkdGhBcnJheSA9IHNjb3BlLmJhbmR3aWR0aFBvbGljeS5iYW5kd2lkdGguc3BsaXQoJyAnKTtcbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmJhbmR3aWR0aFBvbGljeS5iYW5kd2lkdGhOdW1iZXIgPSBiYW5kd2lkdGhBcnJheVswXTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuYmFuZHdpZHRoUG9saWN5LmJhbmR3aWR0aFVuaXQgPSBiYW5kd2lkdGhBcnJheVsxXTtcbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKHNjb3BlLnR5cGUgPT0gXCJjcmVhdGVcIil7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmJhbmR3aWR0aFBvbGljeS5tb2RlID0gJ2NyZWF0ZSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzY29wZS50eXBlID09IFwiZWRpdFwiKXtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuYmFuZHdpZHRoUG9saWN5Lm1vZGUgPSAnZWRpdCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25ldHdvcmtfcG9saWNpZXMvYmFuZHdpZHRoaW5wdXQuaHRtbCdcbiAgICAgICAgfVxuICAgIH0pO1xuIiwiLypcbi8qKlxuICogQ3JlYXRlZCBieSBoYXJkaWsgZ2FuZGhpIG9uIDYvMTQvMTYuXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5uZXR3b3JrcG9saWNpZXMnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMuYmFuZHdpZHRoLmNyZWF0ZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvY3JlYXRlJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQmFuZHdpZHRoUG9saWN5Q3JlYXRlQ3RybCBhcyBiYW5kd2lkdGhQb2xpY3lDcmVhdGVDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25ldHdvcmtfcG9saWNpZXMvYmFuZHdpZHRocG9saWN5Y3JlYXRlLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ0JhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwnLCBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCdCYW5kd2lkdGhNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgQmFuZHdpZHRoTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICB2YXIgYmFuZHdpZHRoUG9saWN5Q3JlYXRlQ3RybCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvUG9saWNpZXMoKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMuYmFuZHdpZHRoLmxpc3QnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsQ3JlYXRpbmcoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuVG9Qb2xpY2llcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVQb2xpY3koKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwuZm9ybS4kdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGJhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihiYW5kd2lkdGhQb2xpY3lDcmVhdGVDdHJsKTtcblxuICAgICAgICAgICAgICAgICAgICBiYW5kd2lkdGhQb2xpY3lDcmVhdGVDdHJsLm5ld1BvbGljeS5rZXkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgQmFuZHdpZHRoTW9kZWwuZ2VuZXJhdGVLZXkoYmFuZHdpZHRoUG9saWN5Q3JlYXRlQ3RybC5uZXdQb2xpY3kpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYmFuZHdpZHRoUG9saWN5Q3JlYXRlQ3RybC5uZXdQb2xpY3kuYmFuZHdpZHRoID0gYmFuZHdpZHRoUG9saWN5Q3JlYXRlQ3RybC5uZXdQb2xpY3kuYmFuZHdpZHRoTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiIFwiKyBiYW5kd2lkdGhQb2xpY3lDcmVhdGVDdHJsLm5ld1BvbGljeS5iYW5kd2lkdGhVbml0O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgQmFuZHdpZHRoTW9kZWwuY3JlYXRlKGJhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwubmV3UG9saWN5KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYmFuZHdpZHRoUG9saWN5Q3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub1BvbGljaWVzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGJhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGJhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYmFuZHdpZHRoUG9saWN5Q3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGJhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgIGJhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwubmV3UG9saWN5ID0ge1xuICAgICAgICAgICAgICAgICAgICBwcm9maWxlTmFtZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudE5hbWU6ICdkZWZhdWx0JywgLy9UT0RPOiBSZW1vdmUgaGFyZGNvZGVkIHRlbmFudC5cbiAgICAgICAgICAgICAgICAgICAgYmFuZHdpZHRoOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgRFNDUDogJydcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBiYW5kd2lkdGhQb2xpY3lDcmVhdGVDdHJsLmNyZWF0ZVBvbGljeSA9IGNyZWF0ZVBvbGljeTtcbiAgICAgICAgICAgIGJhbmR3aWR0aFBvbGljeUNyZWF0ZUN0cmwuY2FuY2VsQ3JlYXRpbmcgPSBjYW5jZWxDcmVhdGluZztcblxuICAgICAgICAgICAgcmVzZXRGb3JtKCk7XG4gICAgICAgIH1dKTtcblxuXG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgaGFyZGlrIGdhbmRoaSBvbiA2LzE2LzE2LlxuICovXG5cblxuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5uZXR3b3JrcG9saWNpZXMnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMuYmFuZHdpZHRoLmRldGFpbHMnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMvOmtleScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0JhbmR3aWR0aFBvbGljeURldGFpbHNDdHJsIGFzIGJhbmR3aWR0aFBvbGljeURldGFpbHNDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25ldHdvcmtfcG9saWNpZXMvYmFuZHdpZHRocG9saWN5ZGV0YWlscy5odG1sJ1xuICAgICAgICAgICAgfSk7XG4gICAgfV0pXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5ldHdvcmtwb2xpY2llcy5iYW5kd2lkdGguZWRpdCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvZWRpdC86a2V5JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwgYXMgYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbmV0d29ya19wb2xpY2llcy9iYW5kd2lkdGhwb2xpY3lkZXRhaWxzLmh0bWwnXG4gICAgICAgICAgICB9KTtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignQmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwnLCBbXG4gICAgICAgICckc3RhdGUnLFxuICAgICAgICAnJHN0YXRlUGFyYW1zJyxcbiAgICAgICAgJ0JhbmR3aWR0aE1vZGVsJyxcbiAgICAgICAgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBCYW5kd2lkdGhNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGJhbmR3aWR0aFBvbGljeURldGFpbHNDdHJsLmJhbmR3aWR0aFByb2ZpbGVzID0gW107XG5cbiAgICAgICAgICAgIC8qIEdldCBwYXJ0aWN1bGFyIFByb2ZpbGUgZm9yIGJhc2VkIG9uIGtleSovXG4gICAgICAgICAgICBCYW5kd2lkdGhNb2RlbC5nZXRNb2RlbEJ5S2V5KCRzdGF0ZVBhcmFtcy5rZXkpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBvbGljeSkge1xuICAgICAgICAgICAgICAgICAgICBiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kgPSBwb2xpY3k7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVG8gc2hvdyBlZGl0IG9yIGRldGFpbHMgc2NyZWVuIGJhc2VkIG9uIHRoZSByb3V0ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRNb2RlKCkge1xuICAgICAgICAgICAgICAgIGlmICgkc3RhdGUuaXMoJ2NvbnRpdi5tZW51Lm5ldHdvcmtwb2xpY2llcy5iYW5kd2lkdGguZWRpdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhbmR3aWR0aFBvbGljeURldGFpbHNDdHJsLm1vZGUgPSAnZWRpdCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwubW9kZSA9ICdkZXRhaWxzJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVBvbGljeSgpIHtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKGJhbmR3aWR0aFBvbGljeURldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICBCYW5kd2lkdGhNb2RlbC5kZWxldGVVc2luZ0tleShiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kua2V5LCAnbmFtZScpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9Qb2xpY2llcygpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3IoYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvUG9saWNpZXMoKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMuYmFuZHdpZHRoLmxpc3QnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9Qb2xpY3lEZXRhaWxzKCkge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmJhbmR3aWR0aC5kZXRhaWxzJywgeydrZXknOiBiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kua2V5fSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbEVkaXRpbmcoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuVG9Qb2xpY3lEZXRhaWxzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNhdmVQb2xpY3koKSB7XG4gICAgICAgICAgICAgICAgLy9mb3JtIGNvbnRyb2xsZXIgaXMgaW5qZWN0ZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAvL2NoZWNraW5nIGlmIGFsbCB2YWxpZGF0aW9ucyBoYXZlIHBhc3NlZFxuICAgICAgICAgICAgICAgIGlmIChiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybC5mb3JtLiR2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIGJhbmR3aWR0aFBvbGljeURldGFpbHNDdHJsLnBvbGljeS5iYW5kd2lkdGggPSBiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kuYmFuZHdpZHRoTnVtYmVyICsgXCIgXCIgKyBiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kuYmFuZHdpZHRoVW5pdDtcbiAgICAgICAgICAgICAgICAgICAgQmFuZHdpZHRoTW9kZWwuc2F2ZShiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub1BvbGljeURldGFpbHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGJhbmR3aWR0aFBvbGljeURldGFpbHNDdHJsLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihiYW5kd2lkdGhQb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwpO1xuXG4gICAgICAgICAgICBzZXRNb2RlKCk7XG5cbiAgICAgICAgICAgIGJhbmR3aWR0aFBvbGljeURldGFpbHNDdHJsLmRlbGV0ZVBvbGljeSA9IGRlbGV0ZVBvbGljeTtcbiAgICAgICAgICAgIGJhbmR3aWR0aFBvbGljeURldGFpbHNDdHJsLnNhdmVQb2xpY3kgPSBzYXZlUG9saWN5O1xuICAgICAgICAgICAgYmFuZHdpZHRoUG9saWN5RGV0YWlsc0N0cmwuY2FuY2VsRWRpdGluZyA9IGNhbmNlbEVkaXRpbmc7XG5cbiAgICAgICAgfV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGhhcmRpayBnYW5kaGkgb24gNi8xNC8xNi5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm5ldHdvcmtwb2xpY2llcycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5ldHdvcmtwb2xpY2llcy5iYW5kd2lkdGgubGlzdCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvbGlzdCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0JhbmR3aWR0aFBvbGljeUxpc3RDdHJsIGFzIGJhbmR3aWR0aFBvbGljeUxpc3RDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25ldHdvcmtfcG9saWNpZXMvYmFuZHdpZHRocG9saWN5bGlzdC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdCYW5kd2lkdGhQb2xpY3lMaXN0Q3RybCcsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ0JhbmR3aWR0aE1vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGludGVydmFsLCAkZmlsdGVyLCBCYW5kd2lkdGhNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBwb2xpY2llc0xpc3RDdHJsID0gdGhpcztcblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UG9saWNpZXMocmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgQmFuZHdpZHRoTW9kZWwuZ2V0KHJlbG9hZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihwb2xpY2llc0xpc3RDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljaWVzTGlzdEN0cmwucG9saWNpZXMgPSAkZmlsdGVyKCdvcmRlckJ5JykocmVzdWx0LCAncHJvZmlsZU5hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIocG9saWNpZXNMaXN0Q3RybCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0xvYWQgZnJvbSBjYWNoZSBmb3IgcXVpY2sgZGlzcGxheSBpbml0aWFsbHlcbiAgICAgICAgICAgIGdldFBvbGljaWVzKHRydWUpO1xuXG4gICAgICAgICAgICB2YXIgcHJvbWlzZTtcbiAgICAgICAgICAgIC8vRG9uJ3Qgc3RhcnQgYXV0by1yZWZyZXNoIGlmIG9uZSBpcyBhbHJlYWR5IGluIHByb2dyZXNzXG4gICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKHByb21pc2UpKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldFBvbGljaWVzKHRydWUpO1xuICAgICAgICAgICAgICAgIH0sIENvbnRpdkdsb2JhbHMuUkVGUkVTSF9JTlRFUlZBTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMTAvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubmV0d29ya3BvbGljaWVzJylcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5jcmVhdGUnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2NyZWF0ZScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0lzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwgYXMgaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICduZXR3b3JrX3BvbGljaWVzL2lzb2xhdGlvbnBvbGljeWNyZWF0ZS5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdJc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsJywgWyckc3RhdGUnLCAnUG9saWNpZXNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsIFBvbGljaWVzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsID0gdGhpcztcblxuICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub1BvbGljaWVzKCkge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMuaXNvbGF0aW9uLmxpc3QnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNhbmNlbENyZWF0aW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuVG9Qb2xpY2llcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUG9saWN5KCkge1xuICAgICAgICAgICAgaWYgKGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwuZm9ybS4kdmFsaWQpIHtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybC5uZXdQb2xpY3kua2V5ID1cbiAgICAgICAgICAgICAgICAgICAgUG9saWNpZXNNb2RlbC5nZW5lcmF0ZUtleShpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsLm5ld1BvbGljeSk7XG4gICAgICAgICAgICAgICAgUG9saWNpZXNNb2RlbC5jcmVhdGUoaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybC5uZXdQb2xpY3kpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub1BvbGljaWVzKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXNldEZvcm0oKSB7XG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGlzb2xhdGlvblBvbGljeUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybC5uZXdQb2xpY3kgPSB7XG4gICAgICAgICAgICAgICAgcG9saWN5TmFtZTogJycsXG4gICAgICAgICAgICAgICAgdGVuYW50TmFtZTogJ2RlZmF1bHQnLy9UT0RPOiBSZW1vdmUgaGFyZGNvZGVkIHRlbmFudC5cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpc29sYXRpb25Qb2xpY3lDcmVhdGVDdHJsLmNyZWF0ZVBvbGljeSA9IGNyZWF0ZVBvbGljeTtcbiAgICAgICAgaXNvbGF0aW9uUG9saWN5Q3JlYXRlQ3RybC5jYW5jZWxDcmVhdGluZyA9IGNhbmNlbENyZWF0aW5nO1xuXG4gICAgICAgIHJlc2V0Rm9ybSgpO1xuICAgIH1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy84LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm5ldHdvcmtwb2xpY2llcycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5ldHdvcmtwb2xpY2llcy5pc29sYXRpb24uZGV0YWlscycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvZGV0YWlscy86a2V5JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnSXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwgYXMgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbmV0d29ya19wb2xpY2llcy9pc29sYXRpb25wb2xpY3lkZXRhaWxzLmh0bWwnXG4gICAgICAgICAgICB9KTtcbiAgICB9XSlcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5lZGl0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9lZGl0LzprZXknLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdJc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCBhcyBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICduZXR3b3JrX3BvbGljaWVzL2lzb2xhdGlvbnBvbGljeWRldGFpbHMuaHRtbCdcbiAgICAgICAgICAgIH0pO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdJc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCcsIFtcbiAgICAgICAgJyRzdGF0ZScsXG4gICAgICAgICckc3RhdGVQYXJhbXMnLFxuICAgICAgICAnUG9saWNpZXNNb2RlbCcsXG4gICAgICAgICdSdWxlc01vZGVsJyxcbiAgICAgICAgJ05ldHdvcmtzTW9kZWwnLFxuICAgICAgICAnQXBwbGljYXRpb25Hcm91cHNNb2RlbCcsXG4gICAgICAgICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgUG9saWNpZXNNb2RlbCwgUnVsZXNNb2RlbCwgTmV0d29ya3NNb2RlbCwgQXBwbGljYXRpb25Hcm91cHNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCA9IHRoaXM7XG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXR3b3JrcyA9IFtdO1xuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuYXBwbGljYXRpb25Hcm91cHMgPSBbXTtcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVPdXRnb2luZ05ldHdvcmtTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVJbmNvbWluZ05ldHdvcmtTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVPdXRnb2luZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVJbmNvbWluZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nU2VsZWN0ZWRBcHBsaWNhdGlvbkdyb3VwID0gJyc7XG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdPdXRnb2luZ1NlbGVjdGVkQXBwbGljYXRpb25Hcm91cCA9ICcnO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub1BvbGljaWVzKCkge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5saXN0Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvUG9saWN5RGV0YWlscygpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51Lm5ldHdvcmtwb2xpY2llcy5pc29sYXRpb24uZGV0YWlscycsIHtrZXk6IGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLnBvbGljeS5rZXl9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsRWRpdGluZygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5Ub1BvbGljeURldGFpbHMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHbyBiYWNrIHRvIHBvbGljeSBkZXRhaWxzIGFmdGVyIGRvbmUgZWRpdGluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBkb25lRWRpdGluZygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5Ub1BvbGljeURldGFpbHMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZGVsZXRlUG9saWN5KCkge1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgIFBvbGljaWVzTW9kZWwuZGVsZXRlKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLnBvbGljeSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub1BvbGljaWVzKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUbyBzaG93IGVkaXQgb3IgZGV0YWlscyBzY3JlZW4gYmFzZWQgb24gdGhlIHJvdXRlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldE1vZGUoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzdGF0ZS5pcygnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5lZGl0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubW9kZSA9ICdlZGl0JztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5tb2RlID0gJ2RldGFpbHMnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXROZXdJbmNvbWluZ1J1bGUoKSB7XG4gICAgICAgICAgICAgICAgLy9SdWxlIG9iamVjdCB0byBiZSBjcmVhdGVkIG9uIHNlcnZlclxuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcnVsZUlkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2FsbG93JywvL3RvIG1ha2UgaXQgZGVmYXVsdCBzZWxlY3RlZCBvcHRpb24gaW4gVUlcbiAgICAgICAgICAgICAgICAgICAgZnJvbUVuZHBvaW50R3JvdXA6ICcnLFxuICAgICAgICAgICAgICAgICAgICBmcm9tTmV0d29yazogJycsXG4gICAgICAgICAgICAgICAgICAgIGZyb21JUEFkZHJlc3M6ICcnLFxuICAgICAgICAgICAgICAgICAgICBwcm90b2NvbDogJ3RjcCcsLy90byBtYWtlIGl0IGRlZmF1bHQgc2VsZWN0ZWQgb3B0aW9uIGluIFVJXG4gICAgICAgICAgICAgICAgICAgIHBvcnQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdpbicsXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudE5hbWU6ICdkZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgcG9saWN5TmFtZTogaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwucG9saWN5LnBvbGljeU5hbWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nU2VsZWN0ZWRBcHBsaWNhdGlvbkdyb3VwID0gJyc7XG4gICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZUluY29taW5nTmV0d29ya1NlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVJbmNvbWluZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXROZXdPdXRnb2luZ1J1bGUoKSB7XG4gICAgICAgICAgICAgICAgLy9SdWxlIG9iamVjdCB0byBiZSBjcmVhdGVkIG9uIHNlcnZlclxuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld091dGdvaW5nUnVsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcnVsZUlkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2FsbG93JywvL3RvIG1ha2UgaXQgZGVmYXVsdCBzZWxlY3RlZCBvcHRpb24gaW4gVUlcbiAgICAgICAgICAgICAgICAgICAgdG9FbmRwb2ludEdyb3VwOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgdG9OZXR3b3JrOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgdG9JUEFkZHJlc3M6ICcnLFxuICAgICAgICAgICAgICAgICAgICBwcm90b2NvbDogJ3RjcCcsLy90byBtYWtlIGl0IGRlZmF1bHQgc2VsZWN0ZWQgb3B0aW9uIGluIFVJXG4gICAgICAgICAgICAgICAgICAgIHBvcnQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdvdXQnLFxuICAgICAgICAgICAgICAgICAgICB0ZW5hbnROYW1lOiAnZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgIHBvbGljeU5hbWU6IGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLnBvbGljeS5wb2xpY3lOYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdPdXRnb2luZ1NlbGVjdGVkQXBwbGljYXRpb25Hcm91cCA9ICcnO1xuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVPdXRnb2luZ05ldHdvcmtTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kaXNhYmxlT3V0Z29pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IG5ldHdvcmsgbmFtZXMgZm9yIHRoZSBnaXZlbiB0ZW5hbnQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE5ldHdvcmtzKCkge1xuICAgICAgICAgICAgICAgIE5ldHdvcmtzTW9kZWwuZ2V0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vXy5maWx0ZXIoKSByZXR1cm5zIGEgbmV3IGFycmF5XG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ldHdvcmtzID0gXy5maWx0ZXIocmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndGVuYW50TmFtZSc6ICdkZWZhdWx0Jy8vVE9ETzogUmVtb3ZlIGhhcmRjb2RlZCB0ZW5hbnQuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBhcHBsaWNhdGlvbiBncm91cCBuYW1lcyBmb3IgdGhlIGdpdmVuIHRlbmFudC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QXBwbGljYXRpb25Hcm91cHMoKSB7XG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25Hcm91cHNNb2RlbC5nZXQoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL18uZmlsdGVyKCkgcmV0dXJucyBhIG5ldyBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuYXBwbGljYXRpb25Hcm91cHMgPSBfLmZpbHRlcihyZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGVuYW50TmFtZSc6ICdkZWZhdWx0Jy8vVE9ETzogUmVtb3ZlIGhhcmRjb2RlZCB0ZW5hbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlciB0byBkaXNhYmxlIG5ldHdvcmsgc2VsZWN0aW9uIGJveCBvbmNlIGFwcGxpY2F0aW9uIGdyb3VwIGlzIHNlbGVjdGVkIHdoaWxlIGNyZWF0aW5nIGEgbmV3XG4gICAgICAgICAgICAgKiBydWxlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBvbkNoYW5nZU91dGdvaW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdTZWxlY3RlZEFwcGxpY2F0aW9uR3JvdXAgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvL0lmIGFwcGxpY2F0aW9uIGdyb3VwIGhhcyBiZWVuIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld091dGdvaW5nUnVsZS50b0VuZHBvaW50R3JvdXAgPVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdTZWxlY3RlZEFwcGxpY2F0aW9uR3JvdXAuZ3JvdXBOYW1lO1xuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdPdXRnb2luZ1J1bGUudG9OZXR3b3JrID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmRpc2FibGVPdXRnb2luZ05ldHdvcmtTZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vV2hlbiAnbm9uZScgaXMgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdSdWxlLnRvRW5kcG9pbnRHcm91cCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kaXNhYmxlT3V0Z29pbmdOZXR3b3JrU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXIgdG8gZGlzYWJsZSBuZXR3b3JrIHNlbGVjdGlvbiBib3ggb25jZSBhcHBsaWNhdGlvbiBncm91cCBpcyBzZWxlY3RlZCB3aGlsZSBjcmVhdGluZyBhIG5ld1xuICAgICAgICAgICAgICogcnVsZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gb25DaGFuZ2VJbmNvbWluZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nU2VsZWN0ZWRBcHBsaWNhdGlvbkdyb3VwICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9JZiBhcHBsaWNhdGlvbiBncm91cCBoYXMgYmVlbiBzZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdJbmNvbWluZ1J1bGUuZnJvbUVuZHBvaW50R3JvdXAgPVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3SW5jb21pbmdTZWxlY3RlZEFwcGxpY2F0aW9uR3JvdXAuZ3JvdXBOYW1lO1xuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdJbmNvbWluZ1J1bGUuZnJvbU5ldHdvcmsgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZUluY29taW5nTmV0d29ya1NlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9XaGVuICdub25lJyBpcyBzZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdJbmNvbWluZ1J1bGUuZnJvbUVuZHBvaW50R3JvdXAgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZUluY29taW5nTmV0d29ya1NlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXIgdG8gZGlzYWJsZSBhcHBsaWNhdGlvbiBncm91cCBzZWxlY3Rpb24gYm94IG9uY2UgbmV0d29yayBpcyBzZWxlY3RlZCB3aGlsZSBjcmVhdGluZyBhIG5ld1xuICAgICAgICAgICAgICogcnVsZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gb25DaGFuZ2VPdXRnb2luZ05ldHdvcmtTZWxlY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld091dGdvaW5nUnVsZS50b05ldHdvcmsgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvL0lmIG5ldHdvcmsgaGFzIGJlZW4gc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdSdWxlLlRvRW5kcG9pbnRHcm91cCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kaXNhYmxlT3V0Z29pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kaXNhYmxlT3V0Z29pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXIgdG8gZGlzYWJsZSBhcHBsaWNhdGlvbiBncm91cCBzZWxlY3Rpb24gYm94IG9uY2UgbmV0d29yayBpcyBzZWxlY3RlZCB3aGlsZSBjcmVhdGluZyBhIG5ld1xuICAgICAgICAgICAgICogcnVsZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gb25DaGFuZ2VJbmNvbWluZ05ldHdvcmtTZWxlY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZS5mcm9tTmV0d29yayAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vSWYgbmV0d29yayBoYXMgYmVlbiBzZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdJbmNvbWluZ1J1bGUuZnJvbUVuZHBvaW50R3JvdXAgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZUluY29taW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuZGlzYWJsZUluY29taW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2VuZXJhdGVzIHJ1bGUgaWRcbiAgICAgICAgICAgICAqIFRPRE8gTWFrZSBpdCBjcnlwdG9ncmFwaGljYWxseSBzdHJvbmdlciBvbmNlIHdlIGhhdmUgbXVsdGlwbGUgdXNlcnMgdXBkYXRpbmcgc2FtZSBwb2xpY3lcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVSdWxlSWQocnVsZSkge1xuICAgICAgICAgICAgICAgIHJ1bGUucnVsZUlkID1cbiAgICAgICAgICAgICAgICAgICAgKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmluY29taW5nUnVsZXMubGVuZ3RoICsgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwub3V0Z29pbmdSdWxlcy5sZW5ndGggKyAxKS50b1N0cmluZygpICsgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJ1bGUgaXMgc2F2ZWQgdG8gc2VydmVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEluY29taW5nUnVsZSgpIHtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZVJ1bGVJZChpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdJbmNvbWluZ1J1bGUpO1xuICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZS5rZXkgPSBSdWxlc01vZGVsLmdlbmVyYXRlS2V5KGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld0luY29taW5nUnVsZSk7XG4gICAgICAgICAgICAgICAgUnVsZXNNb2RlbC5jcmVhdGUoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3SW5jb21pbmdSdWxlKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLmluY29taW5nUnVsZXMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICByZXNldE5ld0luY29taW5nUnVsZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3IoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUnVsZSBpcyBzYXZlZCB0byBzZXJ2ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gYWRkT3V0Z29pbmdSdWxlKCkge1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgIGdlbmVyYXRlUnVsZUlkKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm5ld091dGdvaW5nUnVsZSk7XG4gICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdSdWxlLmtleSA9IFJ1bGVzTW9kZWwuZ2VuZXJhdGVLZXkoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwubmV3T3V0Z29pbmdSdWxlKTtcbiAgICAgICAgICAgICAgICBSdWxlc01vZGVsLmNyZWF0ZShpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5uZXdPdXRnb2luZ1J1bGUpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwub3V0Z29pbmdSdWxlcy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0TmV3T3V0Z29pbmdSdWxlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWxldGUgaW5jb21pbmcgcnVsZSBmcm9tIHNlcnZlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVJbmNvbWluZ1J1bGUoa2V5KSB7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgUnVsZXNNb2RlbC5kZWxldGVVc2luZ0tleShrZXkpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgXy5yZW1vdmUoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuaW5jb21pbmdSdWxlcywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmtleSA9PSBrZXk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3IoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVsZXRlIG91dGdvaW5nIHJ1bGUgZnJvbSBzZXJ2ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZGVsZXRlT3V0Z29pbmdSdWxlKGtleSkge1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgIFJ1bGVzTW9kZWwuZGVsZXRlVXNpbmdLZXkoa2V5KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIF8ucmVtb3ZlKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm91dGdvaW5nUnVsZXMsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5rZXkgPT0ga2V5O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsKTtcbiAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybCk7XG5cbiAgICAgICAgICAgIFBvbGljaWVzTW9kZWwuZ2V0TW9kZWxCeUtleSgkc3RhdGVQYXJhbXMua2V5KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwb2xpY3kpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwucG9saWN5ID0gcG9saWN5O1xuICAgICAgICAgICAgICAgICAgICBSdWxlc01vZGVsLmdldEluY29taW5nUnVsZXMocG9saWN5LnBvbGljeU5hbWUsICdkZWZhdWx0JykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5pbmNvbWluZ1J1bGVzID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXROZXdJbmNvbWluZ1J1bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFJ1bGVzTW9kZWwuZ2V0T3V0Z29pbmdSdWxlcyhwb2xpY3kucG9saWN5TmFtZSwgJ2RlZmF1bHQnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm91dGdvaW5nUnVsZXMgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldE5ld091dGdvaW5nUnVsZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ2V0TmV0d29ya3MoKTtcbiAgICAgICAgICAgIGdldEFwcGxpY2F0aW9uR3JvdXBzKCk7XG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kZWxldGVQb2xpY3kgPSBkZWxldGVQb2xpY3k7XG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kZWxldGVJbmNvbWluZ1J1bGUgPSBkZWxldGVJbmNvbWluZ1J1bGU7XG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kZWxldGVPdXRnb2luZ1J1bGUgPSBkZWxldGVPdXRnb2luZ1J1bGU7XG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5hZGRJbmNvbWluZ1J1bGUgPSBhZGRJbmNvbWluZ1J1bGU7XG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5hZGRPdXRnb2luZ1J1bGUgPSBhZGRPdXRnb2luZ1J1bGU7XG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5kb25lRWRpdGluZyA9IGRvbmVFZGl0aW5nO1xuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwuY2FuY2VsRWRpdGluZyA9IGNhbmNlbEVkaXRpbmc7XG4gICAgICAgICAgICAvL0V2ZW50IEhhbmRsZXJzXG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5vbkNoYW5nZU91dGdvaW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbiA9IG9uQ2hhbmdlT3V0Z29pbmdBcHBsaWNhdGlvbkdyb3VwU2VsZWN0aW9uO1xuICAgICAgICAgICAgaXNvbGF0aW9uUG9saWN5RGV0YWlsc0N0cmwub25DaGFuZ2VJbmNvbWluZ0FwcGxpY2F0aW9uR3JvdXBTZWxlY3Rpb24gPSBvbkNoYW5nZUluY29taW5nQXBwbGljYXRpb25Hcm91cFNlbGVjdGlvbjtcbiAgICAgICAgICAgIGlzb2xhdGlvblBvbGljeURldGFpbHNDdHJsLm9uQ2hhbmdlT3V0Z29pbmdOZXR3b3JrU2VsZWN0aW9uID0gb25DaGFuZ2VPdXRnb2luZ05ldHdvcmtTZWxlY3Rpb247XG4gICAgICAgICAgICBpc29sYXRpb25Qb2xpY3lEZXRhaWxzQ3RybC5vbkNoYW5nZUluY29taW5nTmV0d29ya1NlbGVjdGlvbiA9IG9uQ2hhbmdlSW5jb21pbmdOZXR3b3JrU2VsZWN0aW9uO1xuXG4gICAgICAgICAgICBzZXRNb2RlKCk7XG5cbiAgICAgICAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKCdjb250aXYubmV0d29ya3BvbGljaWVzJylcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbi5saXN0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9saXN0JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnSXNvbGF0aW9uUG9saWN5TGlzdEN0cmwgYXMgaXNvbGF0aW9uUG9saWN5TGlzdEN0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbmV0d29ya19wb2xpY2llcy9pc29sYXRpb25wb2xpY3lsaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ0lzb2xhdGlvblBvbGljeUxpc3RDdHJsJywgWyckc2NvcGUnLCAnJGludGVydmFsJywgJyRmaWx0ZXInLCAnUG9saWNpZXNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRpbnRlcnZhbCwgJGZpbHRlciwgUG9saWNpZXNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBwb2xpY2llc0xpc3RDdHJsID0gdGhpcztcblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UG9saWNpZXMocmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgUG9saWNpZXNNb2RlbC5nZXQocmVsb2FkKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIocG9saWNpZXNMaXN0Q3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2xpY2llc0xpc3RDdHJsLnBvbGljaWVzID0gJGZpbHRlcignb3JkZXJCeScpKHJlc3VsdCwgJ3BvbGljeU5hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIocG9saWNpZXNMaXN0Q3RybCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0xvYWQgZnJvbSBjYWNoZSBmb3IgcXVpY2sgZGlzcGxheSBpbml0aWFsbHlcbiAgICAgICAgICAgIGdldFBvbGljaWVzKGZhbHNlKTtcblxuICAgICAgICAgICAgdmFyIHByb21pc2U7XG4gICAgICAgICAgICAvL0Rvbid0IHN0YXJ0IGF1dG8tcmVmcmVzaCBpZiBvbmUgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBnZXRQb2xpY2llcyh0cnVlKTtcbiAgICAgICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9zdG9wIHBvbGxpbmcgd2hlbiB1c2VyIG1vdmVzIGF3YXkgZnJvbSB0aGUgcGFnZVxuICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChwcm9taXNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvOS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5uZXR3b3JrcG9saWNpZXMnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL25ldHdvcmtwb2xpY2llcycsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05ldHdvcmtQb2xpY2llc1RhYnNDdHJsIGFzIG5ldHdvcmtQb2xpY2llc1RhYnNDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25ldHdvcmtfcG9saWNpZXMvbmV0d29ya3BvbGljaWVzdGFicy5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLmlzb2xhdGlvbicsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvaXNvbGF0aW9uJyxcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzx1aS12aWV3Lz4nXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3JrcG9saWNpZXMucHJpb3JpdGl6YXRpb24nLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3ByaW9yaXRpemF0aW9uJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTmV0d29ya1BvbGljaWVzVGFic0N0cmwgYXMgbmV0d29ya1BvbGljaWVzVGFic0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbmV0d29ya19wb2xpY2llcy9wcmlvcml0aXphdGlvbnBvbGljeWxpc3QuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5ldHdvcmtwb2xpY2llcy5iYW5kd2lkdGgnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2JhbmR3aWR0aCcsXG4gICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8dWktdmlldy8+J1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3BvbGljaWVzLnJlZGlyZWN0aW9uJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9yZWRpcmVjdGlvbicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05ldHdvcmtQb2xpY2llc1RhYnNDdHJsIGFzIG5ldHdvcmtQb2xpY2llc1RhYnNDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25ldHdvcmtfcG9saWNpZXMvcmVkaXJlY3Rpb25wb2xpY3lsaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ05ldHdvcmtQb2xpY2llc1RhYnNDdHJsJywgWyckc3RhdGUnLCBmdW5jdGlvbiAoJHN0YXRlKSB7XG4gICAgfV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiAyLzE5LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm5ldHdvcmtzJylcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUubmV0d29ya3MuY3JlYXRlJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9jcmVhdGUnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbmV0d29ya3MvbmV0d29ya2NyZWF0ZS5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTmV0d29ya0NyZWF0ZUN0cmwgYXMgbmV0d29ya0NyZWF0ZUN0cmwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ05ldHdvcmtDcmVhdGVDdHJsJywgWyckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJ05ldHdvcmtzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIE5ldHdvcmtzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICB2YXIgbmV0d29ya0NyZWF0ZUN0cmwgPSB0aGlzO1xuICAgICAgICAgICAgbmV0d29ya0NyZWF0ZUN0cmwuY2lkclBhdHRlcm4gPSBDb250aXZHbG9iYWxzLkNJRFJfUkVHRVg7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvTmV0d29ya3MoKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5uZXR3b3Jrcy5saXN0Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbENyZWF0aW5nKCkge1xuICAgICAgICAgICAgICAgIHJldHVyblRvTmV0d29ya3MoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlTmV0d29yaygpIHtcbiAgICAgICAgICAgICAgICAvL2Zvcm0gY29udHJvbGxlciBpcyBpbmplY3RlZCBieSB0aGUgaHRtbCB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgIC8vY2hlY2tpbmcgaWYgYWxsIHZhbGlkYXRpb25zIGhhdmUgcGFzc2VkXG4gICAgICAgICAgICAgICAgaWYgKG5ldHdvcmtDcmVhdGVDdHJsLmZvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihuZXR3b3JrQ3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKG5ldHdvcmtDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya0NyZWF0ZUN0cmwubmV3TmV0d29yay5rZXkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya0NyZWF0ZUN0cmwubmV3TmV0d29yay50ZW5hbnROYW1lICsgJzonICsgbmV0d29ya0NyZWF0ZUN0cmwubmV3TmV0d29yay5uZXR3b3JrTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgTmV0d29ya3NNb2RlbC5jcmVhdGUobmV0d29ya0NyZWF0ZUN0cmwubmV3TmV0d29yaykudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5ldHdvcmtDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvTmV0d29ya3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya0NyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKG5ldHdvcmtDcmVhdGVDdHJsLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya0NyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihuZXR3b3JrQ3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgbmV0d29ya0NyZWF0ZUN0cmwubmV3TmV0d29yayA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya05hbWU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBlbmNhcDogJ3Z4bGFuJyxcbiAgICAgICAgICAgICAgICAgICAgc3VibmV0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheTogJycsXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudE5hbWU6ICdkZWZhdWx0Jy8vVE9ETzogUmVtb3ZlIGhhcmRjb2RlZCB0ZW5hbnQuXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV0d29ya0NyZWF0ZUN0cmwuY3JlYXRlTmV0d29yayA9IGNyZWF0ZU5ldHdvcms7XG4gICAgICAgICAgICBuZXR3b3JrQ3JlYXRlQ3RybC5jYW5jZWxDcmVhdGluZyA9IGNhbmNlbENyZWF0aW5nO1xuXG4gICAgICAgICAgICByZXNldEZvcm0oKTtcbiAgICAgICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5uZXR3b3JrcycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5ldHdvcmtzLmRldGFpbHMnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMvOmtleScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05ldHdvcmtEZXRhaWxzQ3RybCBhcyBuZXR3b3JrRGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbmV0d29ya3MvbmV0d29ya2RldGFpbHMuaHRtbCdcbiAgICAgICAgICAgIH0pO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdOZXR3b3JrRGV0YWlsc0N0cmwnLFxuICAgICAgICBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ05ldHdvcmtzTW9kZWwnLCAnQXBwbGljYXRpb25Hcm91cHNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRzY29wZSwgJGludGVydmFsLCAkZmlsdGVyLCBOZXR3b3Jrc01vZGVsLCBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXR3b3JrRGV0YWlsc0N0cmwgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9OZXR3b3JrcygpIHtcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5uZXR3b3Jrcy5saXN0Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGVsZXRlTmV0d29yaygpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG5ldHdvcmtEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKG5ldHdvcmtEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIE5ldHdvcmtzTW9kZWwuZGVsZXRlKG5ldHdvcmtEZXRhaWxzQ3RybC5uZXR3b3JrKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya0RldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvTmV0d29ya3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya0RldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihuZXR3b3JrRGV0YWlsc0N0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldCBhcHBsaWNhdGlvbiBncm91cHMgYmVsb25naW5nIHRvIGEgbmV0d29ya1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEFwcGxpY2F0aW9uR3JvdXBzKHJlbG9hZCkge1xuICAgICAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkdyb3Vwc01vZGVsLmdldChyZWxvYWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya0RldGFpbHNDdHJsLmFwcGxpY2F0aW9uR3JvdXBzID0gJGZpbHRlcignb3JkZXJCeScpKF8uZmlsdGVyKHJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICduZXR3b3JrTmFtZSc6IG5ldHdvcmtEZXRhaWxzQ3RybC5uZXR3b3JrLm5ldHdvcmtOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSwgJ2dyb3VwTmFtZScpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5ldHdvcmtEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG5ldHdvcmtEZXRhaWxzQ3RybCk7XG5cbiAgICAgICAgICAgICAgICBOZXR3b3Jrc01vZGVsLmdldE1vZGVsQnlLZXkoJHN0YXRlUGFyYW1zLmtleSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG5ldHdvcmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtEZXRhaWxzQ3RybC5uZXR3b3JrID0gbmV0d29yaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEFwcGxpY2F0aW9uR3JvdXBzKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBuZXR3b3JrRGV0YWlsc0N0cmwuZGVsZXRlTmV0d29yayA9IGRlbGV0ZU5ldHdvcms7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZTtcbiAgICAgICAgICAgICAgICAvL0Rvbid0IGRvIGF1dG9yZWZyZXNoIGlmIG9uZSBpcyBhbHJlYWR5IGluIHByb2dyZXNzXG4gICAgICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEFwcGxpY2F0aW9uR3JvdXBzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vc3RvcCBwb2xsaW5nIHdoZW4gdXNlciBtb3ZlcyBhd2F5IGZyb20gdGhlIHBhZ2VcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChwcm9taXNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdjb250aXYubmV0d29ya3MnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5uZXR3b3Jrcy5saXN0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9saXN0JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTmV0d29ya3NMaXN0Q3RybCBhcyBuZXR3b3Jrc0xpc3RDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25ldHdvcmtzL25ldHdvcmtsaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ05ldHdvcmtzTGlzdEN0cmwnLCBbJyRzY29wZScsICckaW50ZXJ2YWwnLCAnJGZpbHRlcicsICdOZXR3b3Jrc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGludGVydmFsLCAkZmlsdGVyLCBOZXR3b3Jrc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xuICAgICAgICAgICAgdmFyIG5ldHdvcmtzTGlzdEN0cmwgPSB0aGlzO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXROZXR3b3JrcyhyZWxvYWQpIHtcbiAgICAgICAgICAgICAgICBOZXR3b3Jrc01vZGVsLmdldChyZWxvYWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5ldHdvcmtzTGlzdEN0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtzTGlzdEN0cmwubmV0d29ya3MgPSAkZmlsdGVyKCdvcmRlckJ5JykocmVzdWx0LCAnbmV0d29ya05hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya3NMaXN0Q3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9Mb2FkIGZyb20gY2FjaGUgZm9yIHF1aWNrIGRpc3BsYXkgaW5pdGlhbGx5XG4gICAgICAgICAgICBnZXROZXR3b3JrcyhmYWxzZSk7XG5cbiAgICAgICAgICAgIHZhciBwcm9taXNlO1xuICAgICAgICAgICAgLy9Eb24ndCBkbyBhdXRvcmVmcmVzaCBpZiBvbmUgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBnZXROZXR3b3Jrcyh0cnVlKTtcbiAgICAgICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdjb250aXYubm9kZXMnKVxuICAgIC5mYWN0b3J5KCdMb2dTZXJ2aWNlJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcbiAgICAgICAgZnVuY3Rpb24gZ2V0QWN0aXZlTG9ncygpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5OT0RFU19BQ1RJVkVfSk9CX0VORFBPSU5UO1xuICAgICAgICAgICAgJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQuZGF0YSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXN1bHQuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TGFzdExvZ3MoKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIHVybCA9IENvbnRpdkdsb2JhbHMuTk9ERVNfTEFTVF9KT0JfRU5EUE9JTlQ7XG4gICAgICAgICAgICAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC5kYXRhKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3VsdC5kYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0QWN0aXZlTG9nczogZ2V0QWN0aXZlTG9ncyxcbiAgICAgICAgICAgIGdldExhc3RMb2dzOiBnZXRMYXN0TG9nc1xuICAgICAgICB9XG4gICAgfV0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gMy8yNS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5ub2RlcycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5vZGVzLmNvbW1pc3Npb24nLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvbW1pc3Npb24vOmtleScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05vZGVDb21taXNzaW9uQ3RybCBhcyBub2RlQ29tbWlzc2lvbkN0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbm9kZXMvbm9kZWNvbW1pc3Npb24uaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignTm9kZUNvbW1pc3Npb25DdHJsJywgW1xuICAgICAgICAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdOb2Rlc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJywgJ05vZGVzU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgTm9kZXNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UsIE5vZGVzU2VydmljZSkge1xuICAgICAgICAgICAgdmFyIG5vZGVDb21taXNzaW9uQ3RybCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvTm9kZURldGFpbHMoKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5ub2Rlcy5kZXRhaWxzLmluZm8nLCB7J2tleSc6ICRzdGF0ZVBhcmFtcy5rZXl9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsQ29tbWlzc2lvbmluZ05vZGUoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuVG9Ob2RlRGV0YWlscygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjb21taXNzaW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlQ29tbWlzc2lvbkN0cmwuZm9ybS4kdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG5vZGVDb21taXNzaW9uQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKG5vZGVDb21taXNzaW9uQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVDb21taXNzaW9uQ3RybC5ub2RlT3BzT2JqLm5vZGVzID0gWyRzdGF0ZVBhcmFtcy5rZXldO1xuICAgICAgICAgICAgICAgICAgICBOb2Rlc1NlcnZpY2UuY2xlYW51cEV4dHJhVmFycyhub2RlQ29tbWlzc2lvbkN0cmwpO1xuICAgICAgICAgICAgICAgICAgICBOb2Rlc1NlcnZpY2UuY3JlYXRlRXh0cmFWYXJzKG5vZGVDb21taXNzaW9uQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIE5vZGVzTW9kZWwuY29tbWlzc2lvbihub2RlQ29tbWlzc2lvbkN0cmwubm9kZU9wc09iaikudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5vZGVDb21taXNzaW9uQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub05vZGVEZXRhaWxzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5vZGVDb21taXNzaW9uQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Iobm9kZUNvbW1pc3Npb25DdHJsLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vZGVDb21taXNzaW9uQ3RybC5ub2RlT3BzT2JqID0ge307XG4gICAgICAgICAgICBub2RlQ29tbWlzc2lvbkN0cmwuZXh0cmFfdmFycyA9IHt9OyAvL1RPRE8gSW50aWFsaXplIGZyb20gZ2xvYmFsIHNldHRpbmdzXG4gICAgICAgICAgICBub2RlQ29tbWlzc2lvbkN0cmwuYW5zaWJsZVZhcmlhYmxlcyA9IFtdO1xuICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLmVudlZhcmlhYmxlcyA9IFtdO1xuXG4gICAgICAgICAgICBOb2Rlc1NlcnZpY2UuZ2V0U2V0dGluZ3Mobm9kZUNvbW1pc3Npb25DdHJsKTtcblxuICAgICAgICAgICAgbm9kZUNvbW1pc3Npb25DdHJsLmNhbmNlbENvbW1pc3Npb25pbmdOb2RlID0gY2FuY2VsQ29tbWlzc2lvbmluZ05vZGU7XG4gICAgICAgICAgICBub2RlQ29tbWlzc2lvbkN0cmwuY29tbWlzc2lvbiA9IGNvbW1pc3Npb247XG5cbiAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobm9kZUNvbW1pc3Npb25DdHJsKTtcbiAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihub2RlQ29tbWlzc2lvbkN0cmwpO1xuICAgICAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMjUvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubm9kZXMnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5ub2Rlcy5kZXRhaWxzJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9kZXRhaWxzLzprZXknLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOb2RlRGV0YWlsc0N0cmwgYXMgbm9kZURldGFpbHNDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25vZGVzL25vZGVkZXRhaWxzLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5ub2Rlcy5kZXRhaWxzLmluZm8nLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2luZm8nLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOb2RlRGV0YWlsc0N0cmwgYXMgbm9kZURldGFpbHNDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25vZGVzL25vZGVpbmZvLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5ub2Rlcy5kZXRhaWxzLnN0YXRzJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9zdGF0cycsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05vZGVEZXRhaWxzQ3RybCBhcyBub2RlRGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbm9kZXMvbm9kZXN0YXRzLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5ub2Rlcy5kZXRhaWxzLmxvZ3MnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2xvZ3MnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOb2RlRGV0YWlsc0N0cmwgYXMgbm9kZURldGFpbHNDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25vZGVzL25vZGVsb2dzLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ05vZGVEZXRhaWxzQ3RybCcsIFsnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICckc2NvcGUnLCAnJGludGVydmFsJywgJ05vZGVzTW9kZWwnLFxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRzY29wZSwgJGludGVydmFsLCBOb2Rlc01vZGVsKSB7XG4gICAgICAgICAgICB2YXIgbm9kZURldGFpbHNDdHJsID0gdGhpcztcblxuICAgICAgICAgICAgZnVuY3Rpb24gZGVjb21taXNzaW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlT3BzT2JqID0ge1xuICAgICAgICAgICAgICAgICAgbm9kZXM6IFskc3RhdGVQYXJhbXMua2V5XVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgTm9kZXNNb2RlbC5kZWNvbW1pc3Npb24obm9kZU9wc09iaikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vRGlzYWJsZSBhbGwgYnV0dG9ucyBpbml0aWFsbHkuIFBvbGwgd2lsbCBhc3NpZ24gdmFsdWVzIGFwcHJvcHJpYXRlbHkuXG4gICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC5zaG93Q29tbWlzc2lvbkJ1dHRvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnVwZ3JhZGVCdXR0b25FbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZ3JhZGUoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVPcHNPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzOiBbJHN0YXRlUGFyYW1zLmtleV1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE5vZGVzTW9kZWwudXBncmFkZShub2RlT3BzT2JqKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9EaXNhYmxlIGFsbCBidXR0b25zIGluaXRpYWxseS4gUG9sbCB3aWxsIGFzc2lnbiB2YWx1ZXMgYXBwcm9wcmlhdGVseS5cbiAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnNob3dDb21taXNzaW9uQnV0dG9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC5jb21taXNzaW9uQnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwudXBncmFkZUJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEaXNwbGF5IGJ1dHRvbnMgYmFzZWQgb24gc3RhdHVzIG9mIG5vZGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gc2V0QnV0dG9uRGlzcGxheSgpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vZGVEZXRhaWxzQ3RybC5ub2RlWydpbnZlbnRvcnlfc3RhdGUnXS5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnVW5hbGxvY2F0ZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnNob3dDb21taXNzaW9uQnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC5jb21taXNzaW9uQnV0dG9uRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwudXBncmFkZUJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdEZWNvbW1pc3Npb25lZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuc2hvd0NvbW1pc3Npb25CdXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLmNvbW1pc3Npb25CdXR0b25FbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC51cGdyYWRlQnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1Byb3Zpc2lvbmluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuc2hvd0NvbW1pc3Npb25CdXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLmNvbW1pc3Npb25CdXR0b25FbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwudXBncmFkZUJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdBbGxvY2F0ZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnNob3dDb21taXNzaW9uQnV0dG9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnVwZ3JhZGVCdXR0b25FbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdDYW5jZWxsZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnNob3dDb21taXNzaW9uQnV0dG9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC51cGdyYWRlQnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ01haW50ZW5hbmNlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC5zaG93Q29tbWlzc2lvbkJ1dHRvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuY29tbWlzc2lvbkJ1dHRvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC51cGdyYWRlQnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6Ly9DbHVzdGVyIHNob3VsZCBub3QgYmUgaW4gdGhpcyBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnNob3dDb21taXNzaW9uQnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVEZXRhaWxzQ3RybC5jb21taXNzaW9uQnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnVwZ3JhZGVCdXR0b25FbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE5vZGVJbmZvKHJlbG9hZCkge1xuICAgICAgICAgICAgICAgIE5vZGVzTW9kZWwuZ2V0TW9kZWxCeUtleSgkc3RhdGVQYXJhbXMua2V5LCByZWxvYWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwubm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRCdXR0b25EaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBub2RlRGV0YWlsc0N0cmwuZGVjb21taXNzaW9uID0gZGVjb21taXNzaW9uO1xuICAgICAgICAgICAgbm9kZURldGFpbHNDdHJsLnVwZ3JhZGUgPSB1cGdyYWRlO1xuXG4gICAgICAgICAgICAvL0xvYWQgZnJvbSBjYWNoZSBmb3IgcXVpY2sgZGlzcGxheSBpbml0aWFsbHlcbiAgICAgICAgICAgIGdldE5vZGVJbmZvKGZhbHNlKTtcblxuICAgICAgICAgICAgdmFyIHByb21pc2U7XG4gICAgICAgICAgICAvL0Rvbid0IGRvIGF1dG8tcmVmcmVzaCBpZiBvbmUgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBnZXROb2RlSW5mbyh0cnVlKTtcbiAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vc3RvcCBwb2xsaW5nIHdoZW4gdXNlciBtb3ZlcyBhd2F5IGZyb20gdGhlIHBhZ2VcbiAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA2LzE0LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZShcImNvbnRpdi5ub2Rlc1wiKVxuICAgIC5kaXJlY3RpdmUoXCJjdHZOb2Rlc3RhdHVzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgbm9kZTogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdub2Rlcy9ub2Rlc3RhdHVzLmh0bWwnXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5kaXJlY3RpdmUoXCJjdHZOb2Rlc3RhdGVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBub2RlOiAnPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ25vZGVzL25vZGVzdGF0ZS5odG1sJ1xuICAgICAgICB9XG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5ub2RlcycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm5vZGVzLmRpc2NvdmVyJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9kaXNjb3ZlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05vZGVEaXNjb3ZlckN0cmwgYXMgbm9kZURpc2NvdmVyQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdub2Rlcy9ub2RlZGlzY292ZXIuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignTm9kZURpc2NvdmVyQ3RybCcsIFtcbiAgICAgICAgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnTm9kZXNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsICdOb2Rlc1NlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIE5vZGVzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlLCBOb2Rlc1NlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBub2RlRGlzY292ZXJDdHJsID0gdGhpcztcblxuICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9Ob2RlcygpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51Lm5vZGVzLmxpc3QnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsRGlzY292ZXJpbmdOb2RlKCkge1xuICAgICAgICAgICAgICAgIHJldHVyblRvTm9kZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZGlzY292ZXIoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVEaXNjb3ZlckN0cmwuZm9ybS4kdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG5vZGVEaXNjb3ZlckN0cmwpO1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihub2RlRGlzY292ZXJDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlSVBBZGRyQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgTm9kZXNTZXJ2aWNlLmNyZWF0ZUV4dHJhVmFycyhub2RlRGlzY292ZXJDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgTm9kZXNNb2RlbC5kaXNjb3Zlcihub2RlRGlzY292ZXJDdHJsLm5vZGVPcHNPYmopLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihub2RlRGlzY292ZXJDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvTm9kZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobm9kZURpc2NvdmVyQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Iobm9kZURpc2NvdmVyQ3RybCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVJUEFkZHJBcnJheSgpIHtcbiAgICAgICAgICAgICAgICBub2RlRGlzY292ZXJDdHJsLm5vZGVPcHNPYmouYWRkcnMgPSBfLndvcmRzKG5vZGVEaXNjb3ZlckN0cmwubm9kZUlQQWRkciwgL1teLCBdKy9nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbm9kZURpc2NvdmVyQ3RybC5ub2RlT3BzT2JqID0ge307XG4gICAgICAgICAgICBub2RlRGlzY292ZXJDdHJsLmV4dHJhX3ZhcnMgPSB7fTsgLy9UT0RPIEludGlhbGl6ZSBmcm9tIGdsb2JhbCBzZXR0aW5nc1xuICAgICAgICAgICAgbm9kZURpc2NvdmVyQ3RybC5hbnNpYmxlVmFyaWFibGVzID0gW107XG4gICAgICAgICAgICBub2RlRGlzY292ZXJDdHJsLmVudlZhcmlhYmxlcyA9IFtdO1xuICAgICAgICAgICAgbm9kZURpc2NvdmVyQ3RybC5ub2RlSVBBZGRyID0gJyc7IC8vSVAgYWRkcmVzcyBvZiBub2RlcyB0byBkaXNjb3ZlclxuXG4gICAgICAgICAgICBOb2Rlc1NlcnZpY2UuZ2V0U2V0dGluZ3Mobm9kZURpc2NvdmVyQ3RybCk7XG5cbiAgICAgICAgICAgIG5vZGVEaXNjb3ZlckN0cmwuZGlzY292ZXIgPSBkaXNjb3ZlcjtcbiAgICAgICAgICAgIG5vZGVEaXNjb3ZlckN0cmwuY2FuY2VsRGlzY292ZXJpbmdOb2RlID0gY2FuY2VsRGlzY292ZXJpbmdOb2RlO1xuXG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5vZGVEaXNjb3ZlckN0cmwpO1xuICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG5vZGVEaXNjb3ZlckN0cmwpO1xuICAgICAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMjIvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubm9kZXMnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5ub2Rlcy5saXN0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9saXN0JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTm9kZUxpc3RDdHJsIGFzIG5vZGVMaXN0Q3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdub2Rlcy9ub2RlbGlzdC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdOb2RlTGlzdEN0cmwnLCBbJyRzY29wZScsICckaW50ZXJ2YWwnLCAnJGZpbHRlcicsICdOb2Rlc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJywgJ0xvZ1NlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaW50ZXJ2YWwsICRmaWx0ZXIsIE5vZGVzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlLCBMb2dTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBub2RlTGlzdEN0cmwgPSB0aGlzO1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldE5vZGVzKHJlbG9hZCkge1xuICAgICAgICAgICAgTm9kZXNNb2RlbC5nZXQocmVsb2FkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihub2RlTGlzdEN0cmwpO1xuICAgICAgICAgICAgICAgICAgICBub2RlTGlzdEN0cmwubm9kZXMgPSAkZmlsdGVyKCdvcmRlckJ5JykocmVzdWx0LCAna2V5Jyk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihub2RlTGlzdEN0cmwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdldEFjdGl2ZUxvZ3MoKTtcbiAgICAgICAgICAgICAgICBnZXRMYXN0TG9ncygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWN0aXZlTG9ncygpIHtcbiAgICAgICAgICAgIExvZ1NlcnZpY2UuZ2V0QWN0aXZlTG9ncygpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIG5vZGVMaXN0Q3RybC5hY3RpdmVMb2dzID0gcmVzdWx0O1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAvL09uY2UgdGhlIGpvYiBmaW5pc2hlcywgZW5kcG9pbnQgcmV0dXJucyA1MDAgZXJyb3IuIFNvIHJlc2V0IHRoZSBhY3RpdmVMb2dzXG4gICAgICAgICAgICAgICAgbm9kZUxpc3RDdHJsLmFjdGl2ZUxvZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2M6ICdUaGVyZSBpcyBjdXJyZW50bHkgbm8gYWN0aXZlIGpvYi4gQ2hlY2sgTGFzdCBKb2IgZm9yIGEgam9iIHRoYXQgcmVjZW50bHkgZmluaXNoZWQuJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldExhc3RMb2dzKCkge1xuICAgICAgICAgICAgTG9nU2VydmljZS5nZXRMYXN0TG9ncygpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIG5vZGVMaXN0Q3RybC5sYXN0TG9ncyA9IHJlc3VsdDtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGVMaXN0Q3RybC5nZXRBY3RpdmVMb2dzID0gZ2V0QWN0aXZlTG9ncztcbiAgICAgICAgbm9kZUxpc3RDdHJsLmdldExhc3RMb2dzID0gZ2V0TGFzdExvZ3M7XG5cbiAgICAgICAgLy9Mb2FkIGZyb20gY2FjaGUgZm9yIHF1aWNrIGRpc3BsYXkgaW5pdGlhbGx5XG4gICAgICAgIGdldE5vZGVzKGZhbHNlKTtcblxuICAgICAgICB2YXIgcHJvbWlzZTtcbiAgICAgICAgLy9Eb24ndCBkbyBhdXRvLXJlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcbiAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xuICAgICAgICAgICAgcHJvbWlzZSA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZ2V0Tm9kZXModHJ1ZSk7XG4gICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xuICAgICAgICB9XG4gICAgICAgIC8vc3RvcCBwb2xsaW5nIHdoZW4gdXNlciBtb3ZlcyBhd2F5IGZyb20gdGhlIHBhZ2VcbiAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xuICAgICAgICB9KTtcbiAgICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5vcmdhbml6YXRpb25zJylcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUub3JnYW5pemF0aW9ucy5jcmVhdGUnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2NyZWF0ZScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdvcmdhbml6YXRpb25zL29yZ2FuaXphdGlvbmNyZWF0ZS5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnT3JnYW5pemF0aW9uQ3JlYXRlQ3RybCBhcyBvcmdhbml6YXRpb25DcmVhdGVDdHJsJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdPcmdhbml6YXRpb25DcmVhdGVDdHJsJywgWyckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJ09yZ2FuaXphdGlvbnNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgT3JnYW5pemF0aW9uc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xuICAgICAgICAgICAgdmFyIG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwgPSB0aGlzO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub09yZ2FuaXphdGlvbnMoKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5vcmdhbml6YXRpb25zLmxpc3QnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsQ3JlYXRpbmcoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuVG9Pcmdhbml6YXRpb25zKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU9yZ2FuaXphdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvL2Zvcm0gY29udHJvbGxlciBpcyBpbmplY3RlZCBieSB0aGUgaHRtbCB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgIC8vY2hlY2tpbmcgaWYgYWxsIHZhbGlkYXRpb25zIGhhdmUgcGFzc2VkXG4gICAgICAgICAgICAgICAgaWYgKG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwuZm9ybS4kdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihvcmdhbml6YXRpb25DcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uQ3JlYXRlQ3RybC5uZXdPcmdhbml6YXRpb24ua2V5ID0gb3JnYW5pemF0aW9uQ3JlYXRlQ3RybC5uZXdPcmdhbml6YXRpb24udGVuYW50TmFtZTsgXG4gICAgICAgICAgICAgICAgICAgIE9yZ2FuaXphdGlvbnNNb2RlbC5jcmVhdGUob3JnYW5pemF0aW9uQ3JlYXRlQ3RybC5uZXdPcmdhbml6YXRpb24pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihvcmdhbml6YXRpb25DcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvT3JnYW5pemF0aW9ucygpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihvcmdhbml6YXRpb25DcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihvcmdhbml6YXRpb25DcmVhdGVDdHJsLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihvcmdhbml6YXRpb25DcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25DcmVhdGVDdHJsLm5ld09yZ2FuaXphdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50TmFtZTogJydcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcmdhbml6YXRpb25DcmVhdGVDdHJsLmNyZWF0ZU9yZ2FuaXphdGlvbiA9IGNyZWF0ZU9yZ2FuaXphdGlvbjtcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbkNyZWF0ZUN0cmwuY2FuY2VsQ3JlYXRpbmcgPSBjYW5jZWxDcmVhdGluZztcblxuICAgICAgICAgICAgcmVzZXRGb3JtKCk7XG4gICAgICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdjb250aXYub3JnYW5pemF0aW9ucycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51Lm9yZ2FuaXphdGlvbnMuZGV0YWlscycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvZGV0YWlscy86a2V5JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnT3JnYW5pemF0aW9uRGV0YWlsc0N0cmwgYXMgb3JnYW5pemF0aW9uRGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnb3JnYW5pemF0aW9ucy9vcmdhbml6YXRpb25kZXRhaWxzLmh0bWwnXG4gICAgICAgICAgICB9KTtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignT3JnYW5pemF0aW9uRGV0YWlsc0N0cmwnLFxuICAgICAgICBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ09yZ2FuaXphdGlvbnNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRzY29wZSwgJGludGVydmFsLCAkZmlsdGVyLCBPcmdhbml6YXRpb25zTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9yZ2FuaXphdGlvbkRldGFpbHNDdHJsID0gdGhpcztcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvT3JnYW5pemF0aW9ucygpIHtcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS5vcmdhbml6YXRpb25zLmxpc3QnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVPcmdhbml6YXRpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihvcmdhbml6YXRpb25EZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKG9yZ2FuaXphdGlvbkRldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgT3JnYW5pemF0aW9uc01vZGVsLmRlbGV0ZShvcmdhbml6YXRpb25EZXRhaWxzQ3RybC5vcmdhbml6YXRpb24pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihvcmdhbml6YXRpb25EZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub09yZ2FuaXphdGlvbnMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIob3JnYW5pemF0aW9uRGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKG9yZ2FuaXphdGlvbkRldGFpbHNDdHJsLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG9yZ2FuaXphdGlvbkRldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3Iob3JnYW5pemF0aW9uRGV0YWlsc0N0cmwpO1xuXG4gICAgICAgICAgICAgICAgT3JnYW5pemF0aW9uc01vZGVsLmdldE1vZGVsQnlLZXkoJHN0YXRlUGFyYW1zLmtleSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG9yZ2FuaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uRGV0YWlsc0N0cmwub3JnYW5pemF0aW9uID0gb3JnYW5pemF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbkRldGFpbHNDdHJsLmRlbGV0ZU9yZ2FuaXphdGlvbiA9IGRlbGV0ZU9yZ2FuaXphdGlvbjtcbiAgICAgICAgICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2Lm9yZ2FuaXphdGlvbnMnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS5vcmdhbml6YXRpb25zLmxpc3QnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2xpc3QnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdPcmdhbml6YXRpb25zTGlzdEN0cmwgYXMgb3JnYW5pemF0aW9uc0xpc3RDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ29yZ2FuaXphdGlvbnMvb3JnYW5pemF0aW9ubGlzdC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdPcmdhbml6YXRpb25zTGlzdEN0cmwnLCBbJyRzY29wZScsICckaW50ZXJ2YWwnLCAnJGZpbHRlcicsICdPcmdhbml6YXRpb25zTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaW50ZXJ2YWwsICRmaWx0ZXIsIE9yZ2FuaXphdGlvbnNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBvcmdhbml6YXRpb25zTGlzdEN0cmwgPSB0aGlzO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRPcmdhbml6YXRpb25zKHJlbG9hZCkge1xuICAgICAgICAgICAgICAgIE9yZ2FuaXphdGlvbnNNb2RlbC5nZXQocmVsb2FkKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihvcmdhbml6YXRpb25zTGlzdEN0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbnNMaXN0Q3RybC5vcmdhbml6YXRpb25zID0gJGZpbHRlcignb3JkZXJCeScpKHJlc3VsdCwgJ3RlbmFudE5hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIob3JnYW5pemF0aW9uc0xpc3RDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0xvYWQgZnJvbSBjYWNoZSBmb3IgcXVpY2sgZGlzcGxheSBpbml0aWFsbHlcbiAgICAgICAgICAgIGdldE9yZ2FuaXphdGlvbnMoZmFsc2UpO1xuXG4gICAgICAgICAgICB2YXIgcHJvbWlzZTtcbiAgICAgICAgICAgIC8vRG9uJ3QgZG8gYXV0b3JlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQocHJvbWlzZSkpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0T3JnYW5pemF0aW9ucyh0cnVlKTtcbiAgICAgICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1dKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTIvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuc2VydmljZWxicycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMuY3JlYXRlJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9jcmVhdGUnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2VydmljZV9sYnMvc2VydmljZWxiY3JlYXRlLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZXJ2aWNlbGJDcmVhdGVDdHJsIGFzIHNlcnZpY2VsYkNyZWF0ZUN0cmwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ1NlcnZpY2VsYkNyZWF0ZUN0cmwnLCBbXG4gICAgICAgICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJ1NlcnZpY2VsYnNNb2RlbCcsICdOZXR3b3Jrc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBTZXJ2aWNlbGJzTW9kZWwsIE5ldHdvcmtzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICB2YXIgc2VydmljZWxiQ3JlYXRlQ3RybCA9IHRoaXM7XG4gICAgICAgICAgICBzZXJ2aWNlbGJDcmVhdGVDdHJsLmxhYmVsU2VsZWN0b3JzID0gW107XG4gICAgICAgICAgICBzZXJ2aWNlbGJDcmVhdGVDdHJsLm5ldHdvcmtzID0gW107XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvU2VydmljZWxicygpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMubGlzdCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjYW5jZWxDcmVhdGluZygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5Ub1NlcnZpY2VsYnMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXQgbmV0d29ya3MgZm9yIHRoZSBnaXZlbiB0ZW5hbnQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE5ldHdvcmtzKCkge1xuICAgICAgICAgICAgICAgIE5ldHdvcmtzTW9kZWwuZ2V0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwubmV0d29ya3MgPSBfLmZpbHRlcihyZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd0ZW5hbnROYW1lJzogJ2RlZmF1bHQnLy9UT0RPOiBSZW1vdmUgaGFyZGNvZGVkIHRlbmFudC5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUxhYmVsU2VsZWN0b3JTdHJpbmdzKCkge1xuICAgICAgICAgICAgICAgIC8vRW1wdHkgb3V0IHRoZSBzZWxlY3RvcnMuIEluIGNhc2Ugb2Ygc2VydmVyIGVycm9ycyB0aGlzIG5lZWRzIHRvIGJlIHJlc2V0LlxuICAgICAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwuc2VydmljZWxiLnNlbGVjdG9ycyA9IFtdO1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZXJ2aWNlbGJDcmVhdGVDdHJsLmxhYmVsU2VsZWN0b3JzLCBmdW5jdGlvbihsYWJlbFNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvclN0cmluZyA9IGxhYmVsU2VsZWN0b3IubmFtZSArICc9JyArIGxhYmVsU2VsZWN0b3IudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwuc2VydmljZWxiLnNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yU3RyaW5nKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlU2VydmljZWxiKCkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZUxhYmVsU2VsZWN0b3JTdHJpbmdzKCk7XG4gICAgICAgICAgICAgICAgLy9mb3JtIGNvbnRyb2xsZXIgaXMgaW5qZWN0ZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAvL2NoZWNraW5nIGlmIGFsbCB2YWxpZGF0aW9ucyBoYXZlIHBhc3NlZFxuICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNlbGJDcmVhdGVDdHJsLmZvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihzZXJ2aWNlbGJDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoc2VydmljZWxiQ3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwuc2VydmljZWxiLmtleSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlbGJDcmVhdGVDdHJsLnNlcnZpY2VsYi50ZW5hbnROYW1lICsgJzonICsgc2VydmljZWxiQ3JlYXRlQ3RybC5zZXJ2aWNlbGIuc2VydmljZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIFNlcnZpY2VsYnNNb2RlbC5jcmVhdGUoc2VydmljZWxiQ3JlYXRlQ3RybC5zZXJ2aWNlbGIpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzZXJ2aWNlbGJDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvU2VydmljZWxicygpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzZXJ2aWNlbGJDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihzZXJ2aWNlbGJDcmVhdGVDdHJsLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc2VydmljZWxiQ3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHNlcnZpY2VsYkNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwuc2VydmljZWxiID0ge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlTmFtZTogJycsXG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcmtOYW1lOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgaXBBZGRyZXNzOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgcG9ydHM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB0ZW5hbnROYW1lOiAnZGVmYXVsdCcvL1RPRE86IFJlbW92ZSBoYXJkY29kZWQgdGVuYW50LlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJ2aWNlbGJDcmVhdGVDdHJsLmNyZWF0ZVNlcnZpY2VsYiA9IGNyZWF0ZVNlcnZpY2VsYjtcbiAgICAgICAgICAgIHNlcnZpY2VsYkNyZWF0ZUN0cmwuY2FuY2VsQ3JlYXRpbmcgPSBjYW5jZWxDcmVhdGluZztcblxuICAgICAgICAgICAgZ2V0TmV0d29ya3MoKTtcbiAgICAgICAgICAgIHJlc2V0Rm9ybSgpO1xuICAgICAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTEvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuc2VydmljZWxicycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMuZGV0YWlscycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvZGV0YWlscy86a2V5JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnU2VydmljZWxiRGV0YWlsc0N0cmwgYXMgc2VydmljZWxiRGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2VydmljZV9sYnMvc2VydmljZWxiZGV0YWlscy5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc2VydmljZWxicy5lZGl0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9lZGl0LzprZXknLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZXJ2aWNlbGJEZXRhaWxzQ3RybCBhcyBzZXJ2aWNlbGJEZXRhaWxzQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzZXJ2aWNlX2xicy9zZXJ2aWNlbGJkZXRhaWxzLmh0bWwnXG4gICAgICAgICAgICB9KTtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignU2VydmljZWxiRGV0YWlsc0N0cmwnLFxuICAgICAgICBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnU2VydmljZWxic01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgU2VydmljZWxic01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlbGJEZXRhaWxzQ3RybCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc2VydmljZWxiRGV0YWlsc0N0cmwubGFiZWxTZWxlY3RvcnMgPSBbXTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFRvIHNob3cgZWRpdCBvciBkZXRhaWxzIHNjcmVlbiBiYXNlZCBvbiB0aGUgcm91dGVcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRNb2RlKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHN0YXRlLmlzKCdjb250aXYubWVudS5zZXJ2aWNlbGJzLmVkaXQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZWxiRGV0YWlsc0N0cmwubW9kZSA9ICdlZGl0JztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkRldGFpbHNDdHJsLm1vZGUgPSAnZGV0YWlscyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub1NlcnZpY2VsYnMoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUuc2VydmljZWxicy5saXN0Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVG9TZXJ2aWNlbGJEZXRhaWxzKCkge1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMuZGV0YWlscycsIHsna2V5Jzogc2VydmljZWxiRGV0YWlsc0N0cmwuc2VydmljZWxiLmtleX0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbEVkaXRpbmcoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblRvU2VydmljZWxiRGV0YWlscygpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVNlcnZpY2VsYigpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHNlcnZpY2VsYkRldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoc2VydmljZWxiRGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlbGJzTW9kZWwuZGVsZXRlKHNlcnZpY2VsYkRldGFpbHNDdHJsLnNlcnZpY2VsYikudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHNlcnZpY2VsYkRldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvU2VydmljZWxicygpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzZXJ2aWNlbGJEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Ioc2VydmljZWxiRGV0YWlsc0N0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNhdmVTZXJ2aWNlbGIoKSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihzZXJ2aWNlbGJEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKHNlcnZpY2VsYkRldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlTGFiZWxTZWxlY3RvclN0cmluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgU2VydmljZWxic01vZGVsLnNhdmUoc2VydmljZWxiRGV0YWlsc0N0cmwuc2VydmljZWxiKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc2VydmljZWxiRGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9TZXJ2aWNlbGJEZXRhaWxzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHNlcnZpY2VsYkRldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihzZXJ2aWNlbGJEZXRhaWxzQ3RybCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlTGFiZWxTZWxlY3RvcnMoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZXJ2aWNlbGJEZXRhaWxzQ3RybC5zZXJ2aWNlbGIuc2VsZWN0b3JzLCBmdW5jdGlvbihzZWxlY3RvclN0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNlbGVjdG9yU3RyLnNwbGl0KCc9JylbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGVjdG9yU3RyLnNwbGl0KCc9JylbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlbGJEZXRhaWxzQ3RybC5sYWJlbFNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlTGFiZWxTZWxlY3RvclN0cmluZ3MoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VsYkRldGFpbHNDdHJsLnNlcnZpY2VsYi5zZWxlY3RvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNlcnZpY2VsYkRldGFpbHNDdHJsLmxhYmVsU2VsZWN0b3JzLCBmdW5jdGlvbihsYWJlbFNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JTdHJpbmcgPSBsYWJlbFNlbGVjdG9yLm5hbWUgKyAnPScgKyBsYWJlbFNlbGVjdG9yLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZWxiRGV0YWlsc0N0cmwuc2VydmljZWxiLnNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHNlcnZpY2VsYkRldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3Ioc2VydmljZWxiRGV0YWlsc0N0cmwpO1xuXG4gICAgICAgICAgICAgICAgU2VydmljZWxic01vZGVsLmdldE1vZGVsQnlLZXkoJHN0YXRlUGFyYW1zLmtleSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHNlcnZpY2VsYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZWxiRGV0YWlsc0N0cmwuc2VydmljZWxiID0gc2VydmljZWxiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTGFiZWxTZWxlY3RvcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzZXJ2aWNlbGJEZXRhaWxzQ3RybC5zYXZlU2VydmljZWxiID0gc2F2ZVNlcnZpY2VsYjtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlbGJEZXRhaWxzQ3RybC5jYW5jZWxFZGl0aW5nID0gY2FuY2VsRWRpdGluZztcbiAgICAgICAgICAgICAgICBzZXJ2aWNlbGJEZXRhaWxzQ3RybC5kZWxldGVTZXJ2aWNlbGIgPSBkZWxldGVTZXJ2aWNlbGI7XG4gICAgICAgICAgICAgICAgc2V0TW9kZSgpO1xuXG4gICAgICAgICAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMTEvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuc2VydmljZWxicycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNlcnZpY2VsYnMubGlzdCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvbGlzdCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1NlcnZpY2VsYkxpc3RDdHJsIGFzIHNlcnZpY2VsYkxpc3RDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NlcnZpY2VfbGJzL3NlcnZpY2VsYmxpc3QuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignU2VydmljZWxiTGlzdEN0cmwnLCBbJyRzY29wZScsICckaW50ZXJ2YWwnLCAnJGZpbHRlcicsICdTZXJ2aWNlbGJzTW9kZWwnLCAnQ1JVREhlbHBlclNlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaW50ZXJ2YWwsICRmaWx0ZXIsIFNlcnZpY2VsYnNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlbGJMaXN0Q3RybCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNlcnZpY2VsYnMocmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgU2VydmljZWxic01vZGVsLmdldChyZWxvYWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHNlcnZpY2VsYkxpc3RDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlbGJMaXN0Q3RybC5zZXJ2aWNlbGJzID0gJGZpbHRlcignb3JkZXJCeScpKHJlc3VsdCwgJ3NlcnZpY2VOYW1lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHNlcnZpY2VsYkxpc3RDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0xvYWQgZnJvbSBjYWNoZSBmb3IgcXVpY2sgZGlzcGxheSBpbml0aWFsbHlcbiAgICAgICAgICAgIGdldFNlcnZpY2VsYnMoZmFsc2UpO1xuXG4gICAgICAgICAgICB2YXIgcHJvbWlzZTtcbiAgICAgICAgICAgIC8vRG9uJ3QgZG8gYXV0b3JlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQocHJvbWlzZSkpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0U2VydmljZWxicyh0cnVlKTtcbiAgICAgICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xMy8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJjb250aXYuc2VydmljZWxic1wiKVxuICAgIC5kaXJlY3RpdmUoXCJjdHZTZXJ2aWNlbGJwb3J0c1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICByZXR1cm4ge1xuICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgIGl0ZW1zOiAnPSdcbiAgICAgICAgICAgfSxcbiAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUpIHtcbiAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICogQ29tcGFyZSBpZiB0d28gaXRlbXMgaGF2ZSBzYW1lIHBvcnRzIGFuZCBwcm90b2NvbHNcbiAgICAgICAgICAgICAgICAqIEBwYXJhbSB2YWwxXG4gICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsMlxuICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXBhcmUodmFsMSwgdmFsMikge1xuICAgICAgICAgICAgICAgICAgIHJldHVybiAodmFsMSA9PT0gdmFsMik7XG4gICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0TmV3SXRlbSgpIHtcbiAgICAgICAgICAgICAgICAgICBzY29wZS5uZXdJdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlUG9ydDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyUG9ydDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgIHByb3RvY29sOiAnJ1xuICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgIGZ1bmN0aW9uIGlzRW1wdHlJdGVtKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gKGl0ZW0uc2VydmljZVBvcnQgPT09ICcnICYmIGl0ZW0ucHJvdmlkZXJQb3J0ID09PSAnJyAmJiBpdGVtLnByb3RvY29sID09PSAnJyk7XG4gICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgIHNjb3BlLmFkZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgIGlmIChpc0VtcHR5SXRlbShzY29wZS5uZXdJdGVtKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgIGlmIChzY29wZS5pdGVtcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLml0ZW1zID0gW107XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgIHZhciBuZXdJdGVtU3RyID0gc2NvcGUubmV3SXRlbS5zZXJ2aWNlUG9ydCArICc6J1xuICAgICAgICAgICAgICAgICAgICAgICArIHNjb3BlLm5ld0l0ZW0ucHJvdmlkZXJQb3J0ICsgJzonXG4gICAgICAgICAgICAgICAgICAgICAgICsgc2NvcGUubmV3SXRlbS5wcm90b2NvbDtcbiAgICAgICAgICAgICAgICAgICAvL1JlbW92ZXMgZXhpc3RpbmcgaXRlbSB3aXRoIHRoZSBzYW1lIHZhbHVlIGZpcnN0IGlmIGl0IGV4aXN0cy5cbiAgICAgICAgICAgICAgICAgICBfLnB1bGxBbGxXaXRoKHNjb3BlLml0ZW1zLCBbbmV3SXRlbVN0cl0sIGNvbXBhcmUpO1xuICAgICAgICAgICAgICAgICAgIHNjb3BlLml0ZW1zLnB1c2gobmV3SXRlbVN0cik7XG4gICAgICAgICAgICAgICAgICAgcmVzZXROZXdJdGVtKCk7XG4gICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICBzY29wZS5yZW1vdmUgPSBmdW5jdGlvbihwYXNzZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgXy5yZW1vdmUoc2NvcGUuaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlKGl0ZW0sIHBhc3NlZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgIHJlc2V0TmV3SXRlbSgpO1xuICAgICAgICAgICB9LFxuICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NlcnZpY2VfbGJzL3NlcnZpY2VsYnBvcnRzLmh0bWwnXG4gICAgICAgfVxuICAgIH0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5zZXR0aW5ncycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNldHRpbmdzLmRldGFpbHMuY2x1c3RlcicsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvY2x1c3RlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0NsdXN0ZXJTZXR0aW5nQ3RybCBhcyBjbHVzdGVyU2V0dGluZ0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2V0dGluZ3MvY2x1c3RlcnNldHRpbmdzLmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ0NsdXN0ZXJTZXR0aW5nQ3RybCcsIFsnJHN0YXRlUGFyYW1zJywgJ0NSVURIZWxwZXJTZXJ2aWNlJywgJ05vZGVzU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGVQYXJhbXMsIENSVURIZWxwZXJTZXJ2aWNlLCBOb2Rlc1NlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBjbHVzdGVyU2V0dGluZ0N0cmwgPSB0aGlzO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVDbHVzdGVyU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNsdXN0ZXJTZXR0aW5nQ3RybC5mb3JtLiR2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoY2x1c3RlclNldHRpbmdDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIoY2x1c3RlclNldHRpbmdDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlclNldHRpbmdDdHJsLm5vZGVPcHNPYmoubm9kZXMgPSBbJHN0YXRlUGFyYW1zLmtleV07XG4gICAgICAgICAgICAgICAgICAgIE5vZGVzU2VydmljZS5jbGVhbnVwRXh0cmFWYXJzKGNsdXN0ZXJTZXR0aW5nQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIE5vZGVzU2VydmljZS5jcmVhdGVFeHRyYVZhcnMoY2x1c3RlclNldHRpbmdDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgTm9kZXNTZXJ2aWNlLnVwZGF0ZVNldHRpbmdzKGNsdXN0ZXJTZXR0aW5nQ3RybC5ub2RlT3BzT2JqKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoY2x1c3RlclNldHRpbmdDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoY2x1c3RlclNldHRpbmdDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihjbHVzdGVyU2V0dGluZ0N0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2x1c3RlclNldHRpbmdDdHJsLm5vZGVPcHNPYmogPSB7fTtcbiAgICAgICAgICAgIGNsdXN0ZXJTZXR0aW5nQ3RybC5leHRyYV92YXJzID0ge307IC8vVE9ETyBJbnRpYWxpemUgZnJvbSBnbG9iYWwgc2V0dGluZ3NcbiAgICAgICAgICAgIGNsdXN0ZXJTZXR0aW5nQ3RybC5hbnNpYmxlVmFyaWFibGVzID0gW107XG4gICAgICAgICAgICBjbHVzdGVyU2V0dGluZ0N0cmwuZW52VmFyaWFibGVzID0gW107XG5cbiAgICAgICAgICAgIE5vZGVzU2VydmljZS5nZXRTZXR0aW5ncyhjbHVzdGVyU2V0dGluZ0N0cmwpO1xuXG4gICAgICAgICAgICBjbHVzdGVyU2V0dGluZ0N0cmwudXBkYXRlQ2x1c3RlclNldHRpbmdzID0gdXBkYXRlQ2x1c3RlclNldHRpbmdzO1xuXG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKGNsdXN0ZXJTZXR0aW5nQ3RybCk7XG4gICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3IoY2x1c3RlclNldHRpbmdDdHJsKTtcbiAgICAgICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5zZXR0aW5ncycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnNldHRpbmdzLmRldGFpbHMubmV0d29ya3MnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL25ldHdvcmtzJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTmV0d29ya1NldHRpbmdDdHJsIGFzIG5ldHdvcmtTZXR0aW5nQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzZXR0aW5ncy9uZXR3b3Jrc2V0dGluZ3MuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignTmV0d29ya1NldHRpbmdDdHJsJywgWydDUlVESGVscGVyU2VydmljZScsICdOZXR3b3JrU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uIChDUlVESGVscGVyU2VydmljZSwgTmV0d29ya1NlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBuZXR3b3JrU2V0dGluZ0N0cmwgPSB0aGlzO1xuICAgICAgICAgICAgbmV0d29ya1NldHRpbmdDdHJsLnZsYW5QYXR0ZXJuID0gQ29udGl2R2xvYmFscy5WTEFOX1JFR0VYO1xuICAgICAgICAgICAgbmV0d29ya1NldHRpbmdDdHJsLnZ4bGFuUGF0dGVybiA9IENvbnRpdkdsb2JhbHMuVlhMQU5fUkVHRVg7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZU5ldHdvcmtTZXR0aW5ncygpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV0d29ya1NldHRpbmdDdHJsLmZvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihuZXR3b3JrU2V0dGluZ0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihuZXR3b3JrU2V0dGluZ0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICBOZXR3b3JrU2VydmljZS51cGRhdGVTZXR0aW5ncyhuZXR3b3JrU2V0dGluZ0N0cmwuc2V0dGluZykudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKG5ldHdvcmtTZXR0aW5nQ3RybCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya1NldHRpbmdDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihuZXR3b3JrU2V0dGluZ0N0cmwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TmV0d29ya1NldHRpbmdzKCkge1xuICAgICAgICAgICAgICAgIE5ldHdvcmtTZXJ2aWNlLmdldFNldHRpbmdzKCkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcmtTZXR0aW5nQ3RybC5zZXR0aW5nID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZXROZXR3b3JrU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIG5ldHdvcmtTZXR0aW5nQ3RybC51cGRhdGVOZXR3b3JrU2V0dGluZ3MgPSB1cGRhdGVOZXR3b3JrU2V0dGluZ3M7XG5cbiAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIobmV0d29ya1NldHRpbmdDdHJsKTtcbiAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihuZXR3b3JrU2V0dGluZ0N0cmwpO1xuICAgICAgICB9XSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA2LzEvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuc3RvcmFnZXBvbGljaWVzJylcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc3RvcmFnZXBvbGljaWVzLmNyZWF0ZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvY3JlYXRlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0b3JhZ2VfcG9saWNpZXMvc3RvcmFnZXBvbGljeWNyZWF0ZS5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnU3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwgYXMgc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ1N0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsJywgWyckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJ1N0b3JhZ2VQb2xpY2llc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBTdG9yYWdlUG9saWNpZXNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvU3RvcmFnZVBvbGljaWVzKCkge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUuc3RvcmFnZXBvbGljaWVzLmxpc3QnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuY2VsQ3JlYXRpbmcoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuVG9TdG9yYWdlUG9saWNpZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlRmlsZXN5c3RlbUNtZHMoKSB7XG4gICAgICAgICAgICAgICAgc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwuZmlsZXN5c3RlbWNtZHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybC5uZXdTdG9yYWdlUG9saWN5LmZpbGVzeXN0ZW1zW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVQb2xpY3koKSB7XG4gICAgICAgICAgICAgICAgLy9mb3JtIGNvbnRyb2xsZXIgaXMgaW5qZWN0ZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAvL2NoZWNraW5nIGlmIGFsbCB2YWxpZGF0aW9ucyBoYXZlIHBhc3NlZFxuICAgICAgICAgICAgICAgIGlmIChzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybC5mb3JtLiR2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5oaWRlU2VydmVyRXJyb3Ioc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZpbGVzeXN0ZW1DbWRzKCk7XG4gICAgICAgICAgICAgICAgICAgIFN0b3JhZ2VQb2xpY2llc01vZGVsLmNyZWF0ZShzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybC5uZXdTdG9yYWdlUG9saWN5KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvU3RvcmFnZVBvbGljaWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnNob3dTZXJ2ZXJFcnJvcihzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNldEZvcm0oKSB7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHN0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5Q3JlYXRlQ3RybC5uZXdTdG9yYWdlUG9saWN5ID0ge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJiYWNrZW5kc1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNydWRcIjogXCJjZXBoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1vdW50XCI6IFwiY2VwaFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzbmFwc2hvdFwiOiBcImNlcGhcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcInVubG9ja2VkXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBcImRyaXZlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInBvb2xcIjogXCJyYmRcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcImNyZWF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInNpemVcIjogXCIwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImZpbGVzeXN0ZW1cIjogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcInJ1bnRpbWVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzbmFwc2hvdHNcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic25hcHNob3RcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZnJlcXVlbmN5XCI6IFwiMzBtXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJrZWVwXCI6IDIwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJyYXRlLWxpbWl0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndyaXRlLWlvcHNcIjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlYWQtaW9wc1wiOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid3JpdGUtYnBzXCI6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZWFkLWJwc1wiOiAwIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcImZpbGVzeXN0ZW1zXCI6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwuY3JlYXRlUG9saWN5ID0gY3JlYXRlUG9saWN5O1xuICAgICAgICAgICAgc3RvcmFnZVBvbGljeUNyZWF0ZUN0cmwuY2FuY2VsQ3JlYXRpbmcgPSBjYW5jZWxDcmVhdGluZztcbiAgICAgICAgICAgIHN0b3JhZ2VQb2xpY3lDcmVhdGVDdHJsLmZpbGVzeXN0ZW1jbWRzID0gW107XG5cbiAgICAgICAgICAgIHJlc2V0Rm9ybSgpO1xuICAgICAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDUvMjcvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYuc3RvcmFnZXBvbGljaWVzJylcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc3RvcmFnZXBvbGljaWVzLmRldGFpbHMnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMvOmtleScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1N0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCBhcyBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RvcmFnZV9wb2xpY2llcy9zdG9yYWdlcG9saWN5ZGV0YWlscy5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnY29udGl2Lm1lbnUuc3RvcmFnZXBvbGljaWVzLmVkaXQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMvOmtleScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1N0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCBhcyBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RvcmFnZV9wb2xpY2llcy9zdG9yYWdlcG9saWN5ZGV0YWlscy5odG1sJ1xuICAgICAgICAgICAgfSk7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ1N0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCcsXG4gICAgICAgIFsnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICckc2NvcGUnLCAnJGludGVydmFsJywgJyRmaWx0ZXInLCAnU3RvcmFnZVBvbGljaWVzTW9kZWwnLCAnVm9sdW1lc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHNjb3BlLCAkaW50ZXJ2YWwsICRmaWx0ZXIsIFN0b3JhZ2VQb2xpY2llc01vZGVsLCBWb2x1bWVzTW9kZWwsIENSVURIZWxwZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLmZpbGVzeXN0ZW1jbWRzID0gW107XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUbyBzaG93IGVkaXQgb3IgZGV0YWlscyBzY3JlZW4gYmFzZWQgb24gdGhlIHJvdXRlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0TW9kZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzdGF0ZS5pcygnY29udGl2Lm1lbnUuc3RvcmFnZXBvbGljaWVzLmVkaXQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLm1vZGUgPSAnZWRpdCc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwubW9kZSA9ICdkZXRhaWxzJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRvUG9saWNpZXMoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUuc3RvcmFnZXBvbGljaWVzLmxpc3QnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub1BvbGljeURldGFpbHMoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY29udGl2Lm1lbnUuc3RvcmFnZXBvbGljaWVzLmRldGFpbHMnLCB7J2tleSc6IHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kubmFtZX0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNhbmNlbEVkaXRpbmcoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblRvUG9saWN5RGV0YWlscygpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVBvbGljeSgpIHtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0YXJ0TG9hZGVyKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIFN0b3JhZ2VQb2xpY2llc01vZGVsLmRlbGV0ZVVzaW5nS2V5KHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kubmFtZSwgJ25hbWUnKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeURldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ub1BvbGljaWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIoc3RvcmFnZVBvbGljeURldGFpbHNDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Ioc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2V0IHZvbHVtZXMgYmVsb25naW5nIHRvIGEgcG9saWN5XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Vm9sdW1lcyhyZWxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgVm9sdW1lc01vZGVsLmdldChyZWxvYWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLnZvbHVtZXMgPSAkZmlsdGVyKCdvcmRlckJ5JykoXy5maWx0ZXIocmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BvbGljeSc6IHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5wb2xpY3kubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksICduYW1lJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVGaWxlc3lzdGVtQ21kc0FycmF5KCkge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLnBvbGljeS5maWxlc3lzdGVtcywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoKHtuYW1lOiBrZXksIHZhbHVlOiB2YWx1ZX0pO1xuICAgICAgICAgICAgICAgICAgICB9LCBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwuZmlsZXN5c3RlbWNtZHMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbGVzeXN0ZW1DbWRzKCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwuZmlsZXN5c3RlbWNtZHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLnBvbGljeS5maWxlc3lzdGVtc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2F2ZVBvbGljeSgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9mb3JtIGNvbnRyb2xsZXIgaXMgaW5qZWN0ZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgLy9jaGVja2luZyBpZiBhbGwgdmFsaWRhdGlvbnMgaGF2ZSBwYXNzZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5mb3JtLiR2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2UuaGlkZVNlcnZlckVycm9yKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdGFydExvYWRlcihzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmlsZXN5c3RlbUNtZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JhZ2VQb2xpY2llc01vZGVsLnNhdmUoc3RvcmFnZVBvbGljeURldGFpbHNDdHJsLnBvbGljeSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRvUG9saWN5RGV0YWlscygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc2hvd1NlcnZlckVycm9yKHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwpO1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcihzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwpO1xuXG4gICAgICAgICAgICAgICAgU3RvcmFnZVBvbGljaWVzTW9kZWwuZ2V0TW9kZWxCeUtleSgkc3RhdGVQYXJhbXMua2V5LCBmYWxzZSwgJ25hbWUnKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocG9saWN5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwucG9saWN5ID0gcG9saWN5O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZUZpbGVzeXN0ZW1DbWRzQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0Vm9sdW1lcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwuZGVsZXRlUG9saWN5ID0gZGVsZXRlUG9saWN5O1xuICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2xpY3lEZXRhaWxzQ3RybC5zYXZlUG9saWN5ID0gc2F2ZVBvbGljeTtcbiAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5RGV0YWlsc0N0cmwuY2FuY2VsRWRpdGluZyA9IGNhbmNlbEVkaXRpbmc7XG5cbiAgICAgICAgICAgICAgICBzZXRNb2RlKCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZTtcbiAgICAgICAgICAgICAgICAvL0Rvbid0IGRvIGF1dG9yZWZyZXNoIGlmIG9uZSBpcyBhbHJlYWR5IGluIHByb2dyZXNzXG4gICAgICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0Vm9sdW1lcyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgQ29udGl2R2xvYmFscy5SRUZSRVNIX0lOVEVSVkFMKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDYvMi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJjb250aXYuc3RvcmFnZXBvbGljaWVzXCIpXG4gICAgLmRpcmVjdGl2ZShcImN0dlN0b3JhZ2Vwb2xpY3liYXNpY3NldHRpbmdzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5kaXJlY3RpdmUoXCJjdHZTdG9yYWdlcG9saWN5ZmlsZXN5c3RlbXNldHRpbmdzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgcG9saWN5OiAnPScsXG4gICAgICAgICAgICAgICAgZmlsZXN5c3RlbWNtZHM6ICc9J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuZmlsZXN5c3RlbXMgPSBbJ2V4dDQnLCAnYnRyZnMnXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0b3JhZ2VfcG9saWNpZXMvZmlsZXN5c3RlbXNldHRpbmdzLmh0bWwnXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5kaXJlY3RpdmUoXCJjdHZTdG9yYWdlcG9saWN5c25hcHNob3RzZXR0aW5nc1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgIHBvbGljeTogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdG9yYWdlX3BvbGljaWVzL3NuYXBzaG90c2V0dGluZ3MuaHRtbCdcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLmRpcmVjdGl2ZShcImN0dlN0b3JhZ2Vwb2xpY3lyd29wc3NldHRpbmdzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgcG9saWN5OiAnPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0b3JhZ2VfcG9saWNpZXMvcndvcHNzZXR0aW5ncy5odG1sJ1xuICAgICAgICB9XG4gICAgfSlcbiAgICAuZGlyZWN0aXZlKFwiY3R2U3RvcmFnZXBvbGljeWJhY2tlbmRkcml2ZXJzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgcG9saWN5OiAnPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0b3JhZ2VfcG9saWNpZXMvYmFja2VuZGRyaXZlcnMuaHRtbCdcbiAgICAgICAgfVxuICAgIH0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA0LzE4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnN0b3JhZ2Vwb2xpY2llcycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnN0b3JhZ2Vwb2xpY2llcy5saXN0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9saXN0JyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnU3RvcmFnZVBvbGljeUxpc3RDdHJsIGFzIHN0b3JhZ2VQb2xpY3lMaXN0Q3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdG9yYWdlX3BvbGljaWVzL3N0b3JhZ2Vwb2xpY3lsaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ1N0b3JhZ2VQb2xpY3lMaXN0Q3RybCcsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ1N0b3JhZ2VQb2xpY2llc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGludGVydmFsLCAkZmlsdGVyLCBTdG9yYWdlUG9saWNpZXNNb2RlbCwgQ1JVREhlbHBlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHZhciBzdG9yYWdlUG9saWN5TGlzdEN0cmwgPSB0aGlzO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRQb2xpY2llcyhyZWxvYWQpIHtcbiAgICAgICAgICAgICAgICBTdG9yYWdlUG9saWNpZXNNb2RlbC5nZXQocmVsb2FkKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHN0b3JhZ2VQb2xpY3lMaXN0Q3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUG9saWN5TGlzdEN0cmwucG9saWNpZXMgPSAkZmlsdGVyKCdvcmRlckJ5JykocmVzdWx0LCAnbmFtZScpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcihzdG9yYWdlUG9saWN5TGlzdEN0cmwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9Mb2FkIGZyb20gY2FjaGUgZm9yIHF1aWNrIGRpc3BsYXkgaW5pdGlhbGx5XG4gICAgICAgICAgICBnZXRQb2xpY2llcyhmYWxzZSk7XG5cbiAgICAgICAgICAgIHZhciBwcm9taXNlO1xuICAgICAgICAgICAgLy9Eb24ndCBkbyBhdXRvLXJlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQocHJvbWlzZSkpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0UG9saWNpZXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSwgQ29udGl2R2xvYmFscy5SRUZSRVNIX0lOVEVSVkFMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vc3RvcCBwb2xsaW5nIHdoZW4gdXNlciBtb3ZlcyBhd2F5IGZyb20gdGhlIHBhZ2VcbiAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfV0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNi8zLzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnZvbHVtZXMnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS52b2x1bWVzLmNyZWF0ZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvY3JlYXRlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZvbHVtZXMvdm9sdW1lY3JlYXRlLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdWb2x1bWVDcmVhdGVDdHJsIGFzIHZvbHVtZUNyZWF0ZUN0cmwnXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ1ZvbHVtZUNyZWF0ZUN0cmwnLCBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnVm9sdW1lc01vZGVsJywgJ1N0b3JhZ2VQb2xpY2llc01vZGVsJywgJ0NSVURIZWxwZXJTZXJ2aWNlJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBWb2x1bWVzTW9kZWwsIFN0b3JhZ2VQb2xpY2llc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xuICAgICAgICAgICAgdmFyIHZvbHVtZUNyZWF0ZUN0cmwgPSB0aGlzO1xuICAgICAgICAgICAgdm9sdW1lQ3JlYXRlQ3RybC5maWxlc3lzdGVtcyA9IFsnZXh0NCcsICdidHJmcyddO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub1ZvbHVtZXNNb2RlbCgpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRpdi5tZW51LnZvbHVtZXMubGlzdCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjYW5jZWxDcmVhdGluZygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5Ub1ZvbHVtZXNNb2RlbCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBzdG9yYWdlIHBvbGljaWVzLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTdG9yYWdlUG9saWNpZXMoKSB7XG4gICAgICAgICAgICAgICAgU3RvcmFnZVBvbGljaWVzTW9kZWwuZ2V0KCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZvbHVtZUNyZWF0ZUN0cmwucG9saWNpZXMgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFwcGx5UG9saWN5U2V0dGluZ3MoKSB7XG4gICAgICAgICAgICAgICAgdm9sdW1lQ3JlYXRlQ3RybC5uZXdWb2x1bWUucG9saWN5ID0gdm9sdW1lQ3JlYXRlQ3RybC5zZWxlY3RlZFBvbGljeS5uYW1lO1xuICAgICAgICAgICAgICAgIHZvbHVtZUNyZWF0ZUN0cmwubmV3Vm9sdW1lLmJhY2tlbmRzID0gdm9sdW1lQ3JlYXRlQ3RybC5zZWxlY3RlZFBvbGljeS5iYWNrZW5kcztcbiAgICAgICAgICAgICAgICB2b2x1bWVDcmVhdGVDdHJsLm5ld1ZvbHVtZS5kcml2ZXIgPSB2b2x1bWVDcmVhdGVDdHJsLnNlbGVjdGVkUG9saWN5LmRyaXZlcjtcbiAgICAgICAgICAgICAgICB2b2x1bWVDcmVhdGVDdHJsLm5ld1ZvbHVtZS5jcmVhdGUgPSB2b2x1bWVDcmVhdGVDdHJsLnNlbGVjdGVkUG9saWN5LmNyZWF0ZTtcbiAgICAgICAgICAgICAgICB2b2x1bWVDcmVhdGVDdHJsLm5ld1ZvbHVtZS5ydW50aW1lID0gdm9sdW1lQ3JlYXRlQ3RybC5zZWxlY3RlZFBvbGljeS5ydW50aW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVWb2x1bWUoKSB7XG4gICAgICAgICAgICAgICAgLy9mb3JtIGNvbnRyb2xsZXIgaXMgaW5qZWN0ZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAvL2NoZWNraW5nIGlmIGFsbCB2YWxpZGF0aW9ucyBoYXZlIHBhc3NlZFxuICAgICAgICAgICAgICAgIGlmICh2b2x1bWVDcmVhdGVDdHJsLmZvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcih2b2x1bWVDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RhcnRMb2FkZXIodm9sdW1lQ3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgIGFwcGx5UG9saWN5U2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgVm9sdW1lc01vZGVsLmNyZWF0ZSh2b2x1bWVDcmVhdGVDdHJsLm5ld1ZvbHVtZSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHZvbHVtZUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG9Wb2x1bWVzTW9kZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIodm9sdW1lQ3JlYXRlQ3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zaG93U2VydmVyRXJyb3Iodm9sdW1lQ3JlYXRlQ3RybCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcbiAgICAgICAgICAgICAgICBDUlVESGVscGVyU2VydmljZS5zdG9wTG9hZGVyKHZvbHVtZUNyZWF0ZUN0cmwpO1xuICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLmhpZGVTZXJ2ZXJFcnJvcih2b2x1bWVDcmVhdGVDdHJsKTtcbiAgICAgICAgICAgICAgICB2b2x1bWVDcmVhdGVDdHJsLm5ld1ZvbHVtZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja2VuZHNcIjoge30sXG4gICAgICAgICAgICAgICAgICAgIFwiZHJpdmVyXCI6IHt9LFxuICAgICAgICAgICAgICAgICAgICBcImNyZWF0ZVwiOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgXCJydW50aW1lXCI6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdm9sdW1lQ3JlYXRlQ3RybC5jcmVhdGVWb2x1bWUgPSBjcmVhdGVWb2x1bWU7XG4gICAgICAgICAgICB2b2x1bWVDcmVhdGVDdHJsLmNhbmNlbENyZWF0aW5nID0gY2FuY2VsQ3JlYXRpbmc7XG5cbiAgICAgICAgICAgIGdldFN0b3JhZ2VQb2xpY2llcygpO1xuXG4gICAgICAgICAgICByZXNldEZvcm0oKTtcbiAgICAgICAgfV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA0LzE1LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnZvbHVtZXMnKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb250aXYubWVudS52b2x1bWVzLmRldGFpbHMnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2RldGFpbHMvOmtleScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZvbHVtZURldGFpbHNDdHJsIGFzIHZvbHVtZURldGFpbHNDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZvbHVtZXMvdm9sdW1lZGV0YWlscy5odG1sJ1xuICAgICAgICAgICAgfSk7XG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ1ZvbHVtZURldGFpbHNDdHJsJyxcbiAgICAgICAgWyckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJyRzY29wZScsICckaW50ZXJ2YWwnLCAnJGh0dHAnLCAnVm9sdW1lc01vZGVsJywgJ1ZvbHVtZVNlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRzY29wZSwgJGludGVydmFsLCAkaHR0cCwgVm9sdW1lc01vZGVsLCBWb2x1bWVTZXJ2aWNlKSB7XG4gICAgICAgICAgICB2YXIgdm9sdW1lRGV0YWlsc0N0cmwgPSB0aGlzO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5Ub1ZvbHVtZXMoKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjb250aXYubWVudS52b2x1bWVzLmxpc3QnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVZvbHVtZSgpIHtcbiAgICAgICAgICAgICAgICBWb2x1bWVzTW9kZWwuZGVsZXRlKHZvbHVtZURldGFpbHNDdHJsLnZvbHVtZSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblRvVm9sdW1lcygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRWb2x1bWVJbmZvKHJlbG9hZCkge1xuICAgICAgICAgICAgICAgIHZhciB0b2tlbnMgPSAkc3RhdGVQYXJhbXMua2V5LnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID17fTtcbiAgICAgICAgICAgICAgICBtb2RlbC5wb2xpY3kgPSB0b2tlbnNbMF07XG4gICAgICAgICAgICAgICAgbW9kZWwubmFtZSA9IHRva2Vuc1sxXTtcbiAgICAgICAgICAgICAgICBWb2x1bWVzTW9kZWwuZ2V0TW9kZWwobW9kZWwsIHJlbG9hZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZvbHVtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm9sdW1lRGV0YWlsc0N0cmwudm9sdW1lID0gdm9sdW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Vm9sdW1lVXNlSW5mbygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Vm9sdW1lU25hcHNob3RzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRWb2x1bWVVc2VJbmZvKCkge1xuICAgICAgICAgICAgICAgIFZvbHVtZVNlcnZpY2UuZ2V0Vm9sdW1lVXNlSW5mbyh2b2x1bWVEZXRhaWxzQ3RybC52b2x1bWUpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB2b2x1bWVEZXRhaWxzQ3RybC52b2x1bWVVc2UgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9SZXR1cm5zIGVycm9yIGlmIHZvbHVtZSBpcyBub3QgbW91bnRlZCBieSBhbnkgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFZvbHVtZVNuYXBzaG90cygpIHtcbiAgICAgICAgICAgICAgICBWb2x1bWVTZXJ2aWNlLmdldFZvbHVtZVNuYXBzaG90cyh2b2x1bWVEZXRhaWxzQ3RybC52b2x1bWUpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB2b2x1bWVEZXRhaWxzQ3RybC5zbmFwc2hvdHMgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjb3B5U25hcHNob3Qoc25hcHNob3QsIG5ld1ZvbHVtZSkge1xuICAgICAgICAgICAgICAgIFZvbHVtZXNNb2RlbC5jb3B5KG1vZGVsLCBzbmFwc2hvdCwgbmV3Vm9sdW1lKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcblxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2b2x1bWVEZXRhaWxzQ3RybC5kZWxldGVWb2x1bWUgPSBkZWxldGVWb2x1bWU7XG4gICAgICAgICAgICB2b2x1bWVEZXRhaWxzQ3RybC5jb3B5U25hcHNob3QgPSBjb3B5U25hcHNob3Q7XG5cbiAgICAgICAgICAgIC8vTG9hZCBmcm9tIGNhY2hlIGZvciBxdWljayBkaXNwbGF5IGluaXRpYWxseVxuICAgICAgICAgICAgZ2V0Vm9sdW1lSW5mbyhmYWxzZSk7XG5cbiAgICAgICAgICAgIHZhciBwcm9taXNlO1xuICAgICAgICAgICAgLy9Eb24ndCBkbyBhdXRvLXJlZnJlc2ggaWYgb25lIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQocHJvbWlzZSkpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0Vm9sdW1lSW5mbyh0cnVlKTtcbiAgICAgICAgICAgICAgICB9LCBDb250aXZHbG9iYWxzLlJFRlJFU0hfSU5URVJWQUwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9zdG9wIHBvbGxpbmcgd2hlbiB1c2VyIG1vdmVzIGF3YXkgZnJvbSB0aGUgcGFnZVxuICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChwcm9taXNlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1dKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMjIvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYudm9sdW1lcycpXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRpdi5tZW51LnZvbHVtZXMubGlzdCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvbGlzdCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZvbHVtZUxpc3RDdHJsIGFzIHZvbHVtZUxpc3RDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZvbHVtZXMvdm9sdW1lbGlzdC5odG1sJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdWb2x1bWVMaXN0Q3RybCcsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckZmlsdGVyJywgJ1ZvbHVtZXNNb2RlbCcsICdDUlVESGVscGVyU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRpbnRlcnZhbCwgJGZpbHRlciwgVm9sdW1lc01vZGVsLCBDUlVESGVscGVyU2VydmljZSkge1xuICAgICAgICAgICAgdmFyIHZvbHVtZUxpc3RDdHJsID0gdGhpcztcblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Vm9sdW1lcyhyZWxvYWQpIHtcbiAgICAgICAgICAgICAgICBWb2x1bWVzTW9kZWwuZ2V0KHJlbG9hZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ1JVREhlbHBlclNlcnZpY2Uuc3RvcExvYWRlcih2b2x1bWVMaXN0Q3RybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2b2x1bWVMaXN0Q3RybC52b2x1bWVzID0gJGZpbHRlcignb3JkZXJCeScpKHJlc3VsdCwgJ25hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENSVURIZWxwZXJTZXJ2aWNlLnN0b3BMb2FkZXIodm9sdW1lTGlzdEN0cmwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9Mb2FkIGZyb20gY2FjaGUgZm9yIHF1aWNrIGRpc3BsYXkgaW5pdGlhbGx5XG4gICAgICAgICAgICBnZXRWb2x1bWVzKGZhbHNlKTtcblxuICAgICAgICAgICAgdmFyIHByb21pc2U7XG4gICAgICAgICAgICAvL0Rvbid0IGRvIGF1dG8tcmVmcmVzaCBpZiBvbmUgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBnZXRWb2x1bWVzKHRydWUpO1xuICAgICAgICAgICAgICAgIH0sIENvbnRpdkdsb2JhbHMuUkVGUkVTSF9JTlRFUlZBTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3N0b3AgcG9sbGluZyB3aGVuIHVzZXIgbW92ZXMgYXdheSBmcm9tIHRoZSBwYWdlXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHByb21pc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNi81LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2LnZvbHVtZXMnKVxuICAgIC5mYWN0b3J5KCdWb2x1bWVTZXJ2aWNlJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcbiAgICAgICAgZnVuY3Rpb24gZ2V0Vm9sdW1lVXNlSW5mbyh2b2x1bWUpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5WT0xVTUVTX1VTRVNfRU5EUE9JTlRcbiAgICAgICAgICAgICAgICArIHZvbHVtZS5wb2xpY3lcbiAgICAgICAgICAgICAgICArICcvJyArIHZvbHVtZS5uYW1lO1xuICAgICAgICAgICAgJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQuZGF0YSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIC8vUmV0dXJucyBlcnJvciBpZiB2b2x1bWUgaXMgbm90IG1vdW50ZWQgYnkgYW55IGNvbnRhaW5lclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXN1bHQuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Vm9sdW1lU25hcHNob3RzKHZvbHVtZSkge1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBDb250aXZHbG9iYWxzLlZPTFVNRVNfU05BUFNIT1RTX0VORFBPSU5UXG4gICAgICAgICAgICAgICAgKyB2b2x1bWUucG9saWN5XG4gICAgICAgICAgICAgICAgKyAnLycgKyB2b2x1bWUubmFtZTtcbiAgICAgICAgICAgICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0LmRhdGEpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVzdWx0LmRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRWb2x1bWVVc2VJbmZvOiBnZXRWb2x1bWVVc2VJbmZvLFxuICAgICAgICAgICAgZ2V0Vm9sdW1lU25hcHNob3RzOiBnZXRWb2x1bWVTbmFwc2hvdHNcbiAgICAgICAgfVxuICAgIH1dKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDYvMi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJjb250aXYuZGlyZWN0aXZlc1wiKVxuICAgIC5kaXJlY3RpdmUoXCJjdHZDb2xsYXBzaWJsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0AnLFxuICAgICAgICAgICAgICAgIGNvbGxhcHNlZDogJ0AnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xuICAgICAgICAgICAgICAgIGlmIChzY29wZS5jb2xsYXBzZWQgPT09IHVuZGVmaW5lZCkgc2NvcGUuY29sbGFwc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvZGlyZWN0aXZlcy9jb2xsYXBzaWJsZS5odG1sJ1xuICAgICAgICB9XG4gICAgfSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDQvMjgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKFwiY29udGl2LmRpcmVjdGl2ZXNcIilcbiAgICAuZGlyZWN0aXZlKFwiY3R2RXJyb3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgaGVhZGVyOiAnQCcsXG4gICAgICAgICAgICAgICAgZXJyb3I6ICc9J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuZmluZCgnaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCduZy1oaWRlJyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvZGlyZWN0aXZlcy9lcnJvcm1lc3NhZ2UuaHRtbCdcbiAgICAgICAgfVxuICAgIH0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzExLzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZShcImNvbnRpdi5kaXJlY3RpdmVzXCIpXG4gICAgLmRpcmVjdGl2ZShcImN0dk5hbWV2YWx1ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICByZXR1cm4ge1xuICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgaXRlbXM6ICc9JyxcbiAgICAgICAgICAgICAgIG5hbWVoZWFkZXI6ICdAJywvL0ZpZWxkIG5hbWUgdG8gZGlzcGxheSBmb3Iga2V5XG4gICAgICAgICAgICAgICB2YWx1ZWhlYWRlcjogJ0AnLC8vRmllbGQgbmFtZSB0byBkaXNwbGF5IGZvciB2YWx1ZVxuICAgICAgICAgICAgICAgdHlwZTogJ0AnLC8vJ3RleHQnIG9yICdzZWxlY3QnIHRvIGNob29zZSBpbnB1dCBvciBzZWxlY3QgaHRtbCB0YWcgZm9yIGtleVxuICAgICAgICAgICAgICAgb3B0aW9uczogJz0nLy9UbyBiZSB1c2VkIHdoZW4gdHlwZSBpcyAnc2VsZWN0J1xuICAgICAgICAgICB9LFxuICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgKiBDb21wYXJlIGlmIHR3byBpdGVtcyBoYXZlIHNhbWUgbmFtZVxuICAgICAgICAgICAgICAgICogQHBhcmFtIHZhbDFcbiAgICAgICAgICAgICAgICAqIEBwYXJhbSB2YWwyXG4gICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgZnVuY3Rpb24gY29tcGFyZSh2YWwxLCB2YWwyKSB7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbDEubmFtZSA9PSB2YWwyLm5hbWU7XG4gICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0TmV3SXRlbSgpIHtcbiAgICAgICAgICAgICAgICAgICBzY29wZS5uZXdJdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcnXG4gICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgZnVuY3Rpb24gaXNFbXB0eUl0ZW0oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgIHJldHVybiAoaXRlbS5uYW1lID09PSAnJyAmJiBpdGVtLnZhbHVlID09PSAnJyk7XG4gICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgIHNjb3BlLmFkZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgIGlmIChpc0VtcHR5SXRlbShzY29wZS5uZXdJdGVtKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgIGlmIChzY29wZS5pdGVtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuaXRlbSA9IFtdO1xuICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAvL1JlbW92ZXMgZXhpc3RpbmcgaXRlbSB3aXRoIHRoZSBzYW1lIG5hbWUgZmlyc3QgaWYgaXQgZXhpc3RzLlxuICAgICAgICAgICAgICAgICAgIF8ucHVsbEFsbFdpdGgoc2NvcGUuaXRlbXMsIFtzY29wZS5uZXdJdGVtXSwgY29tcGFyZSk7XG4gICAgICAgICAgICAgICAgICAgc2NvcGUuaXRlbXMucHVzaChzY29wZS5uZXdJdGVtKTtcbiAgICAgICAgICAgICAgICAgICByZXNldE5ld0l0ZW0oKTtcbiAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgIHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKHBhc3NlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICBfLnJlbW92ZShzY29wZS5pdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PSBwYXNzZWRJdGVtLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgcmVzZXROZXdJdGVtKCk7XG5cbiAgICAgICAgICAgICAgIGlmIChzY29wZS5uYW1laGVhZGVyID09PSB1bmRlZmluZWQpIHNjb3BlLm5hbWVoZWFkZXIgPSAnTmFtZSc7XG4gICAgICAgICAgICAgICBpZiAoc2NvcGUudmFsdWVoZWFkZXIgPT09IHVuZGVmaW5lZCkgc2NvcGUudmFsdWVoZWFkZXIgPSAnVmFsdWUnO1xuICAgICAgICAgICAgICAgaWYgKHNjb3BlLnR5cGUgPT09IHVuZGVmaW5lZCkgc2NvcGUudHlwZSA9ICd0ZXh0JztcbiAgICAgICAgICAgfSxcbiAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2RpcmVjdGl2ZXMvbmFtZXZhbHVlLmh0bWwnXG4gICAgICAgfVxuICAgIH0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiA1LzQvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKFwiY29udGl2LmRpcmVjdGl2ZXNcIilcbiAgICAuZGlyZWN0aXZlKFwiY3R2VGFibGVcIiwgWydmaWx0ZXJGaWx0ZXInLCAnbGltaXRUb0ZpbHRlcicsIGZ1bmN0aW9uIChmaWx0ZXJGaWx0ZXIsIGxpbWl0VG9GaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogJz0nLFxuICAgICAgICAgICAgICAgIGZpbHRlcmVkaXRlbXM6ICc9JyxcbiAgICAgICAgICAgICAgICBzaXplOiAnQCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlQ3RybCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdGFibGVDdHJsLmNodW5rcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5wYWdlTm8gPSAwO1xuXG4gICAgICAgICAgICAgICAgdGFibGVDdHJsLnNpemUgPSBwYXJzZUludCgkc2NvcGUuc2l6ZSwgMTApO1xuICAgICAgICAgICAgICAgIGlmIChpc05hTih0YWJsZUN0cmwuc2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLnNpemUgPSAxMjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBBbHdheXMgY2FsbCBzaG93Q2h1bmsgd2l0aCBib3RoIHBhcmFtZXRlcnMuXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHBhZ2VOb1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0XG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2hvd0NodW5rKHBhZ2VObywgc2VhcmNoVGV4dCkge1xuICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwuc2VhcmNoVGV4dCA9IHNlYXJjaFRleHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VObyA9PT0gdW5kZWZpbmVkIHx8IHBhZ2VObyA8IDApIHBhZ2VObyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5wYWdlTm8gPSBwYWdlTm87XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5pdGVtcyAhPT0gdW5kZWZpbmVkKSB7Ly9UT0RPOiBDaGVjayB3aHkgaXRlbXMgYXJlIHVuZGVmaW5lZCBkdXJpbmcgaW5pdGlhbGl6YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2hUZXh0RmlsdGVyZWRJdGVtcyA9IGZpbHRlckZpbHRlcigkc2NvcGUuaXRlbXMsIHRhYmxlQ3RybC5zZWFyY2hUZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vT2ZDaHVua3MgPSBNYXRoLmNlaWwoc2VhcmNoVGV4dEZpbHRlcmVkSXRlbXMubGVuZ3RoIC8gdGFibGVDdHJsLnNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vT2ZDaHVua3MgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vT2ZDaHVua3MgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLmNodW5rcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub09mQ2h1bmtzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwuY2h1bmtzLnB1c2goe3NlbGVjdGVkOiBmYWxzZSwgcGFnZU5vOiBpfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQWZ0ZXIgZmlsdGVyaW5nIG51bWJlciBvZiBjaHVua3MgY291bGQgY2hhbmdlIHNvIHJlc2V0IHBhZ2Ugbm8gaWYgaXQgaXMgZ3JlYXRlciB0aGFuIG5vIG9mIGNodW5rc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VObyA+PSB0YWJsZUN0cmwuY2h1bmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5wYWdlTm8gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwuY2h1bmtzW3RhYmxlQ3RybC5wYWdlTm9dLnNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9VcGRhdGUgbnVtYmVyIG9mIGNodW5rcyBmb3IgcGFnaW5hdGlvbiBtZW51XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVDdHJsLmNodW5rcy5sZW5ndGggPiA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWNlU3RhcnQsIHNsaWNlRW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlU3RhcnQgPSB0YWJsZUN0cmwucGFnZU5vIC0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGljZUVuZCA9IHRhYmxlQ3RybC5wYWdlTm8gKyAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGljZVN0YXJ0IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGljZUVuZCA9IHNsaWNlRW5kIC0gc2xpY2VTdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpY2VTdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGljZUVuZCA+IHRhYmxlQ3RybC5jaHVua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlU3RhcnQgPSBzbGljZVN0YXJ0IC0gKHNsaWNlRW5kIC0gdGFibGVDdHJsLmNodW5rcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGljZUVuZCA9IHRhYmxlQ3RybC5jaHVua3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbk1lbnUuY2h1bmtzID0gdGFibGVDdHJsLmNodW5rcy5zbGljZShzbGljZVN0YXJ0LCBzbGljZUVuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uTWVudS5jaHVua3MgPSB0YWJsZUN0cmwuY2h1bmtzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwuZmlsdGVyZWRJdGVtcyA9IGxpbWl0VG9GaWx0ZXIoc2VhcmNoVGV4dEZpbHRlcmVkSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLnNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLnBhZ2VObyAqIHRhYmxlQ3RybC5zaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJlZGl0ZW1zID0gdGFibGVDdHJsLmZpbHRlcmVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaG93UHJldkNodW5rKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldkNodW5rO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVDdHJsLnBhZ2VObyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2Q2h1bmsgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkNodW5rID0gdGFibGVDdHJsLnBhZ2VObyAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dDaHVuayhwcmV2Q2h1bmspO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dOZXh0Q2h1bmsoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0Q2h1bms7XG4gICAgICAgICAgICAgICAgICAgIG5leHRDaHVuayA9IHRhYmxlQ3RybC5wYWdlTm8gKyAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dENodW5rID4gdGFibGVDdHJsLmNodW5rcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q2h1bmsgPSB0YWJsZUN0cmwuY2h1bmtzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dDaHVuayhuZXh0Q2h1bmspO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNhdmUgcGFnaW5hdGlvbiBzY29wZSB0byBwcm92aWRlIGNodW5rIGluZm9ybWF0aW9uIHRvIHBhZ2luYXRpb24gbWVudS5cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbWVudVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFBhZ2luYXRpb25NZW51KG1lbnUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb25NZW51ID0gbWVudTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0YWJsZUN0cmwuc2hvd0NodW5rID0gc2hvd0NodW5rO1xuICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5zaG93TmV4dENodW5rID0gc2hvd05leHRDaHVuaztcbiAgICAgICAgICAgICAgICB0YWJsZUN0cmwuc2hvd1ByZXZDaHVuayA9IHNob3dQcmV2Q2h1bms7XG4gICAgICAgICAgICAgICAgdGFibGVDdHJsLmFkZFBhZ2luYXRpb25NZW51ID0gYWRkUGFnaW5hdGlvbk1lbnU7XG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIHRhYmxlQ3RybCkge1xuICAgICAgICAgICAgICAgIC8vV2F0Y2ggZm9yIGl0ZW1zIGFzIHRoZXkgd2lsbCBiZSBhdXRvIHJlZnJlc2hlZFxuICAgICAgICAgICAgICAgIHNjb3BlLiRwYXJlbnQuJHdhdGNoKGF0dHJzLml0ZW1zLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5zaG93Q2h1bmsodGFibGVDdHJsLnBhZ2VObywgdGFibGVDdHJsLnNlYXJjaFRleHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2RpcmVjdGl2ZXMvdGFibGUuaHRtbCdcbiAgICAgICAgfVxuICAgIH1dKVxuICAgIC5kaXJlY3RpdmUoXCJjdHZUaGVhZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzx0aGVhZCBuZy10cmFuc2NsdWRlPjwvdGhlYWQ+J1xuICAgICAgICB9XG4gICAgfSlcbiAgICAuZGlyZWN0aXZlKFwiY3R2VGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBjbGFzczogJ0AnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8dGggbmctY2xhc3M9XCJjbGFzc1wiIG5nLXRyYW5zY2x1ZGU+PC90aD4nXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5kaXJlY3RpdmUoXCJjdHZUYm9keVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzx0Ym9keSBuZy10cmFuc2NsdWRlPjwvdGJvZHk+J1xuICAgICAgICB9XG4gICAgfSlcbiAgICAuZGlyZWN0aXZlKFwiY3R2VGZvb3RcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8dGZvb3QgbmctdHJhbnNjbHVkZT48L3Rmb290PidcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLmRpcmVjdGl2ZShcImN0dlRzZWFyY2hcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHJlcXVpcmU6ICdeXmN0dlRhYmxlJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdAJyxcbiAgICAgICAgICAgICAgICBzaXplOiAnQCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIHRhYmxlQ3RybCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLnNob3dDaHVuayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLnNob3dDaHVuayh0YWJsZUN0cmwucGFnZU5vLCBzY29wZS5zZWFyY2hUZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2RpcmVjdGl2ZXMvc2VhcmNoaW5wdXQuaHRtbCdcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLmRpcmVjdGl2ZShcImN0dlRyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiAndHJ1ZScsXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8dHIgbmctdHJhbnNjbHVkZT48L3RyPidcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLmRpcmVjdGl2ZShcImN0dlRkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8dGQgbmctdHJhbnNjbHVkZT48L3RkPidcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLmRpcmVjdGl2ZShcImN0dlRwYWdpbmF0aW9uXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICByZXF1aXJlOiAnXl5jdHZUYWJsZScsXG4gICAgICAgICAgICBzY29wZToge30sXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIHRhYmxlQ3RybCkge1xuICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5hZGRQYWdpbmF0aW9uTWVudShzY29wZSk7XG4gICAgICAgICAgICAgICAgLy9zaG93Q2h1bmsoKSB3aWxsIGNhbGN1bGF0ZSBhbmQgc2V0IGNodW5rcyBpbiBzY29wZVxuICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5zaG93Q2h1bmsodGFibGVDdHJsLnBhZ2VObywgdGFibGVDdHJsLnNlYXJjaFRleHQpO1xuICAgICAgICAgICAgICAgIHNjb3BlLnNob3dDaHVuayA9IGZ1bmN0aW9uIChwYWdlTm8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLnNob3dDaHVuayhwYWdlTm8sIHRhYmxlQ3RybC5zZWFyY2hUZXh0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHNjb3BlLnNob3dQcmV2Q2h1bmsgPSB0YWJsZUN0cmwuc2hvd1ByZXZDaHVuaztcbiAgICAgICAgICAgICAgICBzY29wZS5zaG93TmV4dENodW5rID0gdGFibGVDdHJsLnNob3dOZXh0Q2h1bms7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2RpcmVjdGl2ZXMvcGFnaW5hdGlvbm1lbnUuaHRtbCdcbiAgICAgICAgfVxuICAgIH0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHZqYWluMyBvbiAzLzExLzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm1vZGVscycpXG4gICAgLmZhY3RvcnkoJ0FwcGxpY2F0aW9uR3JvdXBzTW9kZWwnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuICAgICAgICB2YXIgZ3JvdXBzbW9kZWwgPSBuZXcgQ29sbGVjdGlvbigkaHR0cCwgJHEsIENvbnRpdkdsb2JhbHMuQVBQTElDQVRJT05HUk9VUFNfRU5EUE9JTlQpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZW5lcmF0ZSBrZXkgZm9yIGFwcGxpY2F0aW9uIGdyb3VwXG4gICAgICAgICAqIEBwYXJhbSBncm91cFxuICAgICAgICAgKi9cbiAgICAgICAgZ3JvdXBzbW9kZWwuZ2VuZXJhdGVLZXkgPSBmdW5jdGlvbiAoZ3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiBncm91cC50ZW5hbnROYW1lICsgJzonICsgZ3JvdXAuZ3JvdXBOYW1lO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBncm91cHNtb2RlbDtcbiAgICB9XSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGhhcmRpayBnYW5kaGkgb24gNi8xNS8xNi5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnY29udGl2Lm1vZGVscycpXG4gICAgLmZhY3RvcnkoJ0JhbmR3aWR0aE1vZGVsJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcbiAgICAgICAgdmFyIGJhbmR3aWR0aG1vZGVsID0gbmV3IENvbGxlY3Rpb24oJGh0dHAsICRxLCBDb250aXZHbG9iYWxzLkJBTkRXSURUSF9FTkRQT0lOVCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdlbmVyYXRlIHBvbGljeSBrZXkgdG8gc2F2ZSBwb2xpY3kgb24gc2VydmVyXG4gICAgICAgICAqIEBwYXJhbSBwb2xpY3lcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIGJhbmR3aWR0aG1vZGVsLmdlbmVyYXRlS2V5ID0gZnVuY3Rpb24gKHBvbGljeSkge1xuICAgICAgICAgICAgcmV0dXJuIHBvbGljeS50ZW5hbnROYW1lICsgJzonICsgcG9saWN5LnByb2ZpbGVOYW1lO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBiYW5kd2lkdGhtb2RlbDtcbiAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2Lm1vZGVscycpXG4gICAgLmZhY3RvcnkoJ05ldHdvcmtzTW9kZWwnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24oJGh0dHAsICRxLCBDb250aXZHbG9iYWxzLk5FVFdPUktTX0VORFBPSU5UKTtcbiAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMjIvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubW9kZWxzJylcbiAgICAuZmFjdG9yeSgnTm9kZXNNb2RlbCcsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOb2Rlc0NvbGxlY3Rpb24gZXh0ZW5kcyBmcm9tIEJhc2VDb2xsZWN0aW9uLiBJdCBvdmVycmlkZXMgZXh0cmFjdCgpIGFuZCBhZGRzIGNvbW1pc3Npb24sIGRlY29tbWlzc2lvbiwgdXBncmFkZSBhbmRcbiAgICAgICAgICogZGlzY292ZXIgbWV0aG9kc1xuICAgICAgICAgKiBAcGFyYW0gJGh0dHBcbiAgICAgICAgICogQHBhcmFtICRxXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gTm9kZXNDb2xsZWN0aW9uKCRodHRwLCAkcSkge1xuICAgICAgICAgICAgQmFzZUNvbGxlY3Rpb24uY2FsbCh0aGlzLCAkaHR0cCwgJHEsIENvbnRpdkdsb2JhbHMuTk9ERVNfTElTVF9FTkRQT0lOVCk7XG4gICAgICAgIH1cblxuICAgICAgICBOb2Rlc0NvbGxlY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShCYXNlQ29sbGVjdGlvbi5wcm90b3R5cGUpO1xuXG4gICAgICAgIE5vZGVzQ29sbGVjdGlvbi5wcm90b3R5cGUuZXh0cmFjdCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIC8vQ29udmVydCB0byBhcnJheSBpZiB0aGUgcmV0dXJuZWQgY29sbGVjdGlvbiBpcyBub3QgYW4gYXJyYXlcbiAgICAgICAgICAgIHJldHVybiBfLm1hcChyZXN1bHQuZGF0YSwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS5rZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGtleVxuICAgICAgICAgKiBAcGFyYW0gZXh0cmFWYXJzIEpTT04gb2JqZWN0IG9mIGV4dHJhIGFuc2libGUgYW5kIGVudmlyb25tZW50IHZhcmlhYmxlcyB0byBiZSBwYXNzZWQgd2hpbGUgY29tbWlzc2lvbmluZyBhIG5vZGVcbiAgICAgICAgICoge1xuICAgICAgICAgICAgICogXCJlbnZcIjp7XCJodHRwX3Byb3h5XCI6XCJodHRwOi8vcHJveHkuZXNsLmNpc2NvLmNvbTo4MDgwXCIsIFwiaHR0cHNfcHJveHlcIjpcImh0dHA6Ly9wcm94eS5lc2wuY2lzY28uY29tOjgwODBcIn0sXG4gICAgICAgICAgICAgKiBcImNvbnRyb2xfaW50ZXJmYWNlXCI6IFwiZXRoMVwiLCBcInNlcnZpY2VfdmlwXCI6IFwiMTkyLjE2OC4yLjI1MlwiLCBcInZhbGlkYXRlX2NlcnRzXCI6IFwiZmFsc2VcIiwgXCJuZXRwbHVnaW5faWZcIiA6IFwiZXRoMlwiXG4gICAgICAgICAgICAgKiB9XG4gICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgKi9cbiAgICAgICAgTm9kZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5jb21taXNzaW9uID0gZnVuY3Rpb24gKG5vZGVPcHNPYmopIHtcbiAgICAgICAgICAgIHZhciBub2Rlc2NvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gbm9kZXNjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5OT0RFU19DT01NSVNTSU9OX0VORFBPSU5UO1xuICAgICAgICAgICAgbm9kZXNjb2xsZWN0aW9uLiRodHRwLnBvc3QodXJsLCBub2RlT3BzT2JqLCB7XG4gICAgICAgICAgICAgICAgICAgICdoZWFkZXJzJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9TZXJ2ZXIgZG9lc24ndCByZXR1cm4gYW55IGpzb24gaW4gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIE5vZGVzQ29sbGVjdGlvbi5wcm90b3R5cGUuZGVjb21taXNzaW9uID0gZnVuY3Rpb24gKG5vZGVPcHNPYmopIHtcbiAgICAgICAgICAgIHZhciBub2Rlc2NvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gbm9kZXNjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5OT0RFU19ERUNPTU1JU1NJT05fRU5EUE9JTlQ7XG4gICAgICAgICAgICBub2Rlc2NvbGxlY3Rpb24uJGh0dHAucG9zdCh1cmwsIG5vZGVPcHNPYmosIHtcbiAgICAgICAgICAgICAgICAgICAgJ2hlYWRlcnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgTm9kZXNDb2xsZWN0aW9uLnByb3RvdHlwZS51cGdyYWRlID0gZnVuY3Rpb24gKG5vZGVPcHNPYmopIHtcbiAgICAgICAgICAgIHZhciBub2Rlc2NvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gbm9kZXNjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5OT0RFU19NQUlOVEVOQU5DRV9FTkRQT0lOVDtcbiAgICAgICAgICAgIG5vZGVzY29sbGVjdGlvbi4kaHR0cC5wb3N0KHVybCwgbm9kZU9wc09iaiwge1xuICAgICAgICAgICAgICAgICAgICAnaGVhZGVycyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGlwXG4gICAgICAgICAqIEBwYXJhbSBleHRyYVZhcnMgSlNPTiBvYmplY3Qgb2YgZXh0cmEgYW5zaWJsZSBhbmQgZW52aXJvbm1lbnQgdmFyaWFibGVzIHRvIGJlIHBhc3NlZCB3aGlsZSBkaXNjb3ZlcmluZyBhIG5vZGVcbiAgICAgICAgICoge1xuICAgICAgICAgICAgICogXCJlbnZcIjp7XCJodHRwX3Byb3h5XCI6XCJodHRwOi8vcHJveHkuZXNsLmNpc2NvLmNvbTo4MDgwXCIsIFwiaHR0cHNfcHJveHlcIjpcImh0dHA6Ly9wcm94eS5lc2wuY2lzY28uY29tOjgwODBcIn0sXG4gICAgICAgICAgICAgKiBcImNvbnRyb2xfaW50ZXJmYWNlXCI6IFwiZXRoMVwiLCBcInNlcnZpY2VfdmlwXCI6IFwiMTkyLjE2OC4yLjI1MlwiLCBcImNsdXN0ZXItbmFtZVwiOiBcImNvbnRpdlwiLCBcIm5vZGUtbGFiZWxcIiA6IFwibm9kZTFcIlxuICAgICAgICAgICAgICogfVxuICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICovXG4gICAgICAgIE5vZGVzQ29sbGVjdGlvbi5wcm90b3R5cGUuZGlzY292ZXIgPSBmdW5jdGlvbiAobm9kZU9wc09iaikge1xuICAgICAgICAgICAgdmFyIG5vZGVzY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBub2Rlc2NvbGxlY3Rpb24uJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBDb250aXZHbG9iYWxzLk5PREVTX0RJU0NPVkVSX0VORFBPSU5UO1xuICAgICAgICAgICAgbm9kZXNjb2xsZWN0aW9uLiRodHRwLnBvc3QodXJsLCBub2RlT3BzT2JqLCB7XG4gICAgICAgICAgICAgICAgICAgICdoZWFkZXJzJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgbm9kZXNtb2RlbCA9IG5ldyBOb2Rlc0NvbGxlY3Rpb24oJGh0dHAsICRxKTtcbiAgICAgICAgcmV0dXJuIG5vZGVzbW9kZWw7XG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5tb2RlbHMnKVxuICAgIC5mYWN0b3J5KCdPcmdhbml6YXRpb25zTW9kZWwnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24oJGh0dHAsICRxLCBDb250aXZHbG9iYWxzLk9SR0FOSVpBVElPTlNfRU5EUE9JTlQpO1xuICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2Lm1vZGVscycpXG4gICAgLmZhY3RvcnkoJ1BvbGljaWVzTW9kZWwnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuICAgICAgICB2YXIgcG9saWNpZXNtb2RlbCA9IG5ldyBDb2xsZWN0aW9uKCRodHRwLCAkcSwgQ29udGl2R2xvYmFscy5QT0xJQ0lFU19FTkRQT0lOVCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdlbmVyYXRlIHBvbGljeSBrZXkgdG8gc2F2ZSBwb2xpY3kgb24gc2VydmVyXG4gICAgICAgICAqIEBwYXJhbSBwb2xpY3lcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHBvbGljaWVzbW9kZWwuZ2VuZXJhdGVLZXkgPSBmdW5jdGlvbiAocG9saWN5KSB7XG4gICAgICAgICAgICByZXR1cm4gcG9saWN5LnRlbmFudE5hbWUgKyAnOicgKyBwb2xpY3kucG9saWN5TmFtZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gcG9saWNpZXNtb2RlbDtcbiAgICB9XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvOC8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5tb2RlbHMnKVxuICAgIC5mYWN0b3J5KCdSdWxlc01vZGVsJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcbiAgICAgICAgdmFyIHJ1bGVzbW9kZWwgPSBuZXcgQ29sbGVjdGlvbigkaHR0cCwgJHEsIENvbnRpdkdsb2JhbHMuUlVMRVNfRU5EUE9JTlQpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgaW5jb21pbmcgcnVsZXMgZm9yIGEgZ2l2ZW4gcG9saWN5IGFuZCBhIHRlbmFudFxuICAgICAgICAgKiBAcGFyYW0gcG9saWN5TmFtZVxuICAgICAgICAgKiBAcGFyYW0gdGVuYW50TmFtZVxuICAgICAgICAgKiBAcmV0dXJucyB7Knx3ZWJkcml2ZXIucHJvbWlzZS5Qcm9taXNlfVxuICAgICAgICAgKi9cbiAgICAgICAgcnVsZXNtb2RlbC5nZXRJbmNvbWluZ1J1bGVzID0gZnVuY3Rpb24gKHBvbGljeU5hbWUsIHRlbmFudE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBydWxlc21vZGVsLmdldCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLmZpbHRlcihyZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3BvbGljeU5hbWUnOiBwb2xpY3lOYW1lLFxuICAgICAgICAgICAgICAgICAgICAnZGlyZWN0aW9uJzogJ2luJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RlbmFudE5hbWUnOiB0ZW5hbnROYW1lXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgb3V0Z29pbmcgcnVsZXMgZm9yIGEgZ2l2ZW4gcG9saWN5IGFuZCBhIHRlbmFudFxuICAgICAgICAgKiBAcGFyYW0gcG9saWN5TmFtZVxuICAgICAgICAgKiBAcGFyYW0gdGVuYW50TmFtZVxuICAgICAgICAgKiBAcmV0dXJucyB7Knx3ZWJkcml2ZXIucHJvbWlzZS5Qcm9taXNlfVxuICAgICAgICAgKi9cbiAgICAgICAgcnVsZXNtb2RlbC5nZXRPdXRnb2luZ1J1bGVzID0gZnVuY3Rpb24gKHBvbGljeU5hbWUsIHRlbmFudE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBydWxlc21vZGVsLmdldCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLmZpbHRlcihyZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3BvbGljeU5hbWUnOiBwb2xpY3lOYW1lLFxuICAgICAgICAgICAgICAgICAgICAnZGlyZWN0aW9uJzogJ291dCcsXG4gICAgICAgICAgICAgICAgICAgICd0ZW5hbnROYW1lJzogdGVuYW50TmFtZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2VuZXJhdGUgcnVsZSBrZXkgdG8gc2F2ZSBydWxlIG9uIHNlcnZlclxuICAgICAgICAgKiBAcGFyYW0gcnVsZVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgcnVsZXNtb2RlbC5nZW5lcmF0ZUtleSA9IGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gcnVsZS50ZW5hbnROYW1lICsgJzonICsgcnVsZS5wb2xpY3lOYW1lICsgJzonICsgcnVsZS5ydWxlSWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHJ1bGVzbW9kZWw7XG4gICAgfV0pOyIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNS8xMS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5tb2RlbHMnKVxuICAgIC5mYWN0b3J5KCdTZXJ2aWNlbGJzTW9kZWwnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24oJGh0dHAsICRxLCBDb250aXZHbG9iYWxzLlNFUlZJQ0VMQlNfRU5EUE9JTlQpO1xuICAgIH1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSB2amFpbjMgb24gNC8xOC8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NvbnRpdi5tb2RlbHMnKVxuICAgIC5mYWN0b3J5KCdTdG9yYWdlUG9saWNpZXNNb2RlbCcsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yYWdlUG9saWNpZXNDb2xsZWN0aW9uIGV4dGVuZHMgZnJvbSBCYXNlQ29sbGVjdGlvblxuICAgICAgICAgKiBAcGFyYW0gJGh0dHBcbiAgICAgICAgICogQHBhcmFtICRxXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gU3RvcmFnZVBvbGljaWVzQ29sbGVjdGlvbigkaHR0cCwgJHEpIHtcbiAgICAgICAgICAgIENvbGxlY3Rpb24uY2FsbCh0aGlzLCAkaHR0cCwgJHEsIENvbnRpdkdsb2JhbHMuU1RPUkFHRVBPTElDSUVTX0VORFBPSU5UKTtcbiAgICAgICAgfVxuXG4gICAgICAgIFN0b3JhZ2VQb2xpY2llc0NvbGxlY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDb2xsZWN0aW9uLnByb3RvdHlwZSk7XG5cbiAgICAgICAgU3RvcmFnZVBvbGljaWVzQ29sbGVjdGlvbi5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdXJsID0gY29sbGVjdGlvbi51cmwgKyBtb2RlbC5uYW1lO1xuICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb24ucHJvdG90eXBlLmNyZWF0ZS5jYWxsKGNvbGxlY3Rpb24sIG1vZGVsLCB1cmwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIFN0b3JhZ2VQb2xpY2llc0NvbGxlY3Rpb24ucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IGNvbGxlY3Rpb24uJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBjb2xsZWN0aW9uLnVybCArIG1vZGVsLm5hbWU7XG4gICAgICAgICAgICBjb2xsZWN0aW9uLiRodHRwLnBvc3QodXJsLCBtb2RlbClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5yZW1vdmUoY29sbGVjdGlvbi5tb2RlbHMsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5uYW1lID09IG1vZGVsLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLm1vZGVscy5wdXNoKG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcG9saWNpZXNtb2RlbCA9IG5ldyBTdG9yYWdlUG9saWNpZXNDb2xsZWN0aW9uKCRodHRwLCAkcSk7XG4gICAgICAgIHJldHVybiBwb2xpY2llc21vZGVsO1xuICAgIH1dKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDMvMjIvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYubW9kZWxzJylcbiAgICAuZmFjdG9yeSgnVm9sdW1lc01vZGVsJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZvbHVtZXNDb2xsZWN0aW9uIGV4dGVuZHMgZnJvbSBCYXNlQ29sbGVjdGlvblxuICAgICAgICAgKiBAcGFyYW0gJGh0dHBcbiAgICAgICAgICogQHBhcmFtICRxXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gVm9sdW1lc0NvbGxlY3Rpb24oJGh0dHAsICRxKSB7XG4gICAgICAgICAgICBDb2xsZWN0aW9uLmNhbGwodGhpcywgJGh0dHAsICRxLCBDb250aXZHbG9iYWxzLlZPTFVNRVNfRU5EUE9JTlQpO1xuICAgICAgICB9XG5cbiAgICAgICAgVm9sdW1lc0NvbGxlY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDb2xsZWN0aW9uLnByb3RvdHlwZSk7XG5cbiAgICAgICAgVm9sdW1lc0NvbGxlY3Rpb24ucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgdmFyIHZvbHVtZXNjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IHZvbHVtZXNjb2xsZWN0aW9uLiRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5WT0xVTUVTX0RFTEVURV9FTkRQT0lOVDtcbiAgICAgICAgICAgIC8vZGVsZXRlIGVuZHBvaW50IGV4cGVjdHMgdm9sdW1lIHByb3BlcnR5IGluIGFkZGl0aW9uIHRvIHBvbGljeS4gVE9ETyBhc2sgdG8gYmUgZml4ZWRcbiAgICAgICAgICAgIG1vZGVsLnZvbHVtZSA9IG1vZGVsLm5hbWU7XG4gICAgICAgICAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgIGRhdGE6IG1vZGVsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdm9sdW1lc2NvbGxlY3Rpb24uJGh0dHAuZGVsZXRlKHVybCwgY29uZmlnKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBfLnJlbW92ZSh2b2x1bWVzY29sbGVjdGlvbi5tb2RlbHMsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG4ubmFtZSA9PSBtb2RlbC5uYW1lICYmIG4ucG9saWN5ID09IG1vZGVsLnBvbGljeSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHZvbHVtZXNjb2xsZWN0aW9uLmV4dHJhY3QocmVzcG9uc2UpKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCh2b2x1bWVzY29sbGVjdGlvbi5leHRyYWN0KHJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICBWb2x1bWVzQ29sbGVjdGlvbi5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5WT0xVTUVTX0NSRUFURV9FTkRQT0lOVDtcbiAgICAgICAgICAgIHJldHVybiBDb2xsZWN0aW9uLnByb3RvdHlwZS5jcmVhdGUuY2FsbChjb2xsZWN0aW9uLCBtb2RlbCwgdXJsKTtcbiAgICAgICAgfTtcblxuICAgICAgICBWb2x1bWVzQ29sbGVjdGlvbi5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChtb2RlbCwgc25hcHNob3QsIG5ld1ZvbHVtZSkge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gY29sbGVjdGlvbi4kcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIHVybCA9IENvbnRpdkdsb2JhbHMuVk9MVU1FU19DT1BZU05BUFNIT1RTX0VORFBPSU5UO1xuICAgICAgICAgICAgdmFyIHZvbGNvcHltb2RlbCA9IHtcbiAgICAgICAgICAgICAgICB2b2x1bWU6IG1vZGVsLm5hbWUsXG4gICAgICAgICAgICAgICAgcG9saWN5OiBtb2RlbC5wb2xpY3ksXG4gICAgICAgICAgICAgICAgT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IG5ld1ZvbHVtZSxcbiAgICAgICAgICAgICAgICAgICAgc25hcHNob3Q6IHNuYXBzaG90XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uJGh0dHAucG9zdCh1cmwsIHZvbGNvcHltb2RlbClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBBZGQgdGhlIG5ldyB2b2x1bWUgdG8gdGhlIGNvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgLy9jb2xsZWN0aW9uLm1vZGVscy5wdXNoKGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGNvbGxlY3Rpb24uZXh0cmFjdChyZXNwb25zZSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHZvbHVtZXNtb2RlbCA9IG5ldyBWb2x1bWVzQ29sbGVjdGlvbigkaHR0cCwgJHEpO1xuICAgICAgICByZXR1cm4gdm9sdW1lc21vZGVsO1xuICAgIH1dKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgdmphaW4zIG9uIDQvMjkvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjb250aXYudXRpbHMnKVxuICAgIC5mYWN0b3J5KCdDUlVESGVscGVyU2VydmljZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHN0YXJ0TG9hZGVyKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnNob3dMb2FkZXIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBzdG9wTG9hZGVyKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnNob3dMb2FkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2hvd1NlcnZlckVycm9yKGNvbnRyb2xsZXIsIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnNob3dTZXJ2ZXJFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5zZXJ2ZXJFcnJvck1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoaWRlU2VydmVyRXJyb3IoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2hvd1NlcnZlckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhcnRMb2FkZXI6IHN0YXJ0TG9hZGVyLFxuICAgICAgICAgICAgICAgIHN0b3BMb2FkZXI6IHN0b3BMb2FkZXIsXG4gICAgICAgICAgICAgICAgc2hvd1NlcnZlckVycm9yOiBzaG93U2VydmVyRXJyb3IsXG4gICAgICAgICAgICAgICAgaGlkZVNlcnZlckVycm9yOiBoaWRlU2VydmVyRXJyb3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2LnV0aWxzJylcbiAgICAuZmFjdG9yeSgnTmV0d29ya1NlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldFNldHRpbmdzKCkge1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBDb250aXZHbG9iYWxzLk5FVFdPUktfU0VUVElOR1NfRU5EUE9JTlQ7XG4gICAgICAgICAgICAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC5kYXRhWzBdKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3VsdC5kYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChDb250aXZHbG9iYWxzLk5FVFdPUktfU0VUVElOR1NfRU5EUE9JTlQgXG4gICAgICAgICAgICAgICAgKyAnZ2xvYmFsLycsIHNldHRpbmcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRTZXR0aW5nczogZ2V0U2V0dGluZ3MsXG4gICAgICAgICAgICB1cGRhdGVTZXR0aW5nczogdXBkYXRlU2V0dGluZ3NcbiAgICAgICAgfVxuICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnY29udGl2LnV0aWxzJylcbiAgICAuZmFjdG9yeSgnTm9kZXNTZXJ2aWNlJywgWyckaHR0cCcsICckcScsXG4gICAgICAgIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcbiAgICAgICAgICAgIHZhciBub2RlX2NvbnN0YW50cyA9IHtcbiAgICAgICAgICAgICAgICBBUElDX0NPTlRSX1VOUkVTVFJJQ1RfTU9ERTogJ2FwaWNfY29udHJhY3RzX3VucmVzdHJpY3RlZF9tb2RlJyxcbiAgICAgICAgICAgICAgICBBUElDX0VQR19CUklER0VfRE9NQUlOOiAnYXBpY19lcGdfYnJpZGdlX2RvbWFpbicsXG4gICAgICAgICAgICAgICAgQVBJQ19MRUFGX05PREVTOiAnYXBpY19sZWFmX25vZGVzJyxcbiAgICAgICAgICAgICAgICBBUElDX1BBU1NXT1JEOiAnYXBpY19wYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgQVBJQ19QSFlTX0RPTUFJTjogJ2FwaWNfcGh5c19kb21haW4nLFxuICAgICAgICAgICAgICAgIEFQSUNfVVJMOiAnYXBpY191cmwnLFxuICAgICAgICAgICAgICAgIEFQSUNfVVNFUk5BTUU6ICdhcGljX3VzZXJuYW1lJyxcbiAgICAgICAgICAgICAgICBDT05USVZfTkVUX01PREU6ICdjb250aXZfbmV0d29ya19tb2RlJyxcbiAgICAgICAgICAgICAgICBDT05UUk9MX0lOVEVSRkFDRTogJ2NvbnRyb2xfaW50ZXJmYWNlJyxcbiAgICAgICAgICAgICAgICBFTlY6ICdlbnYnLFxuICAgICAgICAgICAgICAgIEZXRF9NT0RFOiAnZndkX21vZGUnLFxuICAgICAgICAgICAgICAgIERBVEFfSU5URVJGQUNFOiAnbmV0cGx1Z2luX2lmJyxcbiAgICAgICAgICAgICAgICBTQ0hFRF9QUk9WSURFUjogJ3NjaGVkdWxlcl9wcm92aWRlcicsXG4gICAgICAgICAgICAgICAgVklQX0FERFI6ICdzZXJ2aWNlX3ZpcCcsXG4gICAgICAgICAgICAgICAgVUNQX0JPT1RTVFJBUF9OT0RFOiAndWNwX2Jvb3RzdHJhcF9ub2RlX25hbWUnLFxuICAgICAgICAgICAgICAgIENMVVNURVJfTkFNRTogJ2NsdXN0ZXJfbmFtZSd9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTZXR0aW5ncyhjdHJsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gQ29udGl2R2xvYmFscy5OT0RFU19TRVRUSU5HU19HRVRfRU5EUE9JTlQ7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjdHJsLnNldHRpbmcgPSByZXN1bHQuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhVmFycyA9IGN0cmwuc2V0dGluZy5leHRyYV92YXJzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2NoZWRfcHJvdmlkZXIgPSBleHRyYVZhcnNbbm9kZV9jb25zdGFudHMuU0NIRURfUFJPVklERVJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV0d29ya19tb2RlID0gZXh0cmFWYXJzW25vZGVfY29uc3RhbnRzLkNPTlRJVl9ORVRfTU9ERV07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhVmFyc1tub2RlX2NvbnN0YW50cy5DT05UUk9MX0lOVEVSRkFDRV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5DT05UUk9MX0lOVEVSRkFDRV0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYVZhcnNbbm9kZV9jb25zdGFudHMuQ09OVFJPTF9JTlRFUkZBQ0VdOyBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0cmFWYXJzW25vZGVfY29uc3RhbnRzLkRBVEFfSU5URVJGQUNFXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5leHRyYV92YXJzW25vZGVfY29uc3RhbnRzLkRBVEFfSU5URVJGQUNFXSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhVmFyc1tub2RlX2NvbnN0YW50cy5EQVRBX0lOVEVSRkFDRV07IFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRyYVZhcnNbbm9kZV9jb25zdGFudHMuVklQX0FERFJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuVklQX0FERFJdID0gZXh0cmFWYXJzW25vZGVfY29uc3RhbnRzLlZJUF9BRERSXTsgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjaGVkX3Byb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuU0NIRURfUFJPVklERVJdID0gc2NoZWRfcHJvdmlkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZWRfcHJvdmlkZXIgPT09ICd1Y3Atc3dhcm0nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5leHRyYV92YXJzW25vZGVfY29uc3RhbnRzLlVDUF9CT09UU1RSQVBfTk9ERV0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFWYXJzW25vZGVfY29uc3RhbnRzLlVDUF9CT09UU1RSQVBfTk9ERV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ldHdvcmtfbW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5leHRyYV92YXJzW25vZGVfY29uc3RhbnRzLkNPTlRJVl9ORVRfTU9ERV0gPSBuZXR3b3JrX21vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV0d29ya19tb2RlID09PSAnc3RhbmRhbG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuRldEX01PREVdID0gZXh0cmFWYXJzW25vZGVfY29uc3RhbnRzLkZXRF9NT0RFXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5ldHdvcmtfbW9kZSA9PT0gJ2FjaScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19DT05UUl9VTlJFU1RSSUNUX01PREVdID0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhVmFyc1tub2RlX2NvbnN0YW50cy5BUElDX0NPTlRSX1VOUkVTVFJJQ1RfTU9ERV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5leHRyYV92YXJzW25vZGVfY29uc3RhbnRzLkFQSUNfRVBHX0JSSURHRV9ET01BSU5dID0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhVmFyc1tub2RlX2NvbnN0YW50cy5BUElDX0VQR19CUklER0VfRE9NQUlOXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19MRUFGX05PREVTXSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYVZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19MRUFGX05PREVTXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19QQVNTV09SRF0gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFWYXJzW25vZGVfY29uc3RhbnRzLkFQSUNfUEFTU1dPUkRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5BUElDX1BIWVNfRE9NQUlOXSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYVZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19QSFlTX0RPTUFJTl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5leHRyYV92YXJzW25vZGVfY29uc3RhbnRzLkFQSUNfVVJMXSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYVZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19VUkxdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5BUElDX1VTRVJOQU1FXSA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYVZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19VU0VSTkFNRV07ICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhVmFyc1tub2RlX2NvbnN0YW50cy5DTFVTVEVSX05BTUVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuQ0xVU1RFUl9OQU1FXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFWYXJzW25vZGVfY29uc3RhbnRzLkNMVVNURVJfTkFNRV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRW52VmFyaWFibGVzKGV4dHJhVmFyc1tub2RlX2NvbnN0YW50cy5FTlZdLCBjdHJsLmVudlZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUFuc2libGVWYXJpYWJsZXMoZXh0cmFWYXJzLCBjdHJsLmFuc2libGVWYXJpYWJsZXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXN1bHQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVFbnZWYXJpYWJsZXMoZW52VmFycywgZW52VmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICAgICAgZm9yIChpIGluIGVudlZhcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZW52VmFyaWFibGVzLnB1c2goeyduYW1lJzogaSwgJ3ZhbHVlJzogZW52VmFyc1tpXX0pO1xuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVBbnNpYmxlVmFyaWFibGVzKGV4dHJhVmFycywgYW5zaWJsZVZhcmlhYmxlcykge1xuICAgICAgICAgICAgICAgIHZhciBzZXR0aW5nX2ZpbHRlciA9IFtub2RlX2NvbnN0YW50cy5BUElDX0NPTlRSX1VOUkVTVFJJQ1RfTU9ERSxcbiAgICAgICAgICAgICAgICAgICAgbm9kZV9jb25zdGFudHMuQVBJQ19FUEdfQlJJREdFX0RPTUFJTiwgbm9kZV9jb25zdGFudHMuQVBJQ19MRUFGX05PREVTLCBcbiAgICAgICAgICAgICAgICAgICAgbm9kZV9jb25zdGFudHMuQVBJQ19QQVNTV09SRCwgbm9kZV9jb25zdGFudHMuQVBJQ19QSFlTX0RPTUFJTiwgXG4gICAgICAgICAgICAgICAgICAgIG5vZGVfY29uc3RhbnRzLkFQSUNfVVJMLCBub2RlX2NvbnN0YW50cy5BUElDX1VTRVJOQU1FLCBcbiAgICAgICAgICAgICAgICAgICAgbm9kZV9jb25zdGFudHMuQ09OVElWX05FVF9NT0RFLCBub2RlX2NvbnN0YW50cy5DT05UUk9MX0lOVEVSRkFDRSwgXG4gICAgICAgICAgICAgICAgICAgIG5vZGVfY29uc3RhbnRzLkVOViwgbm9kZV9jb25zdGFudHMuRldEX01PREUsIG5vZGVfY29uc3RhbnRzLkRBVEFfSU5URVJGQUNFLCBcbiAgICAgICAgICAgICAgICAgICAgbm9kZV9jb25zdGFudHMuU0NIRURfUFJPVklERVIsIG5vZGVfY29uc3RhbnRzLlZJUF9BRERSLCBcbiAgICAgICAgICAgICAgICAgICAgbm9kZV9jb25zdGFudHMuVUNQX0JPT1RTVFJBUF9OT0RFLCBub2RlX2NvbnN0YW50cy5DTFVTVEVSX05BTUVdO1xuICAgICAgICAgICAgICAgIHZhciBpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChpIGluIGV4dHJhVmFycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ19maWx0ZXIuaW5kZXhPZihpKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuc2libGVWYXJpYWJsZXMucHVzaCh7J25hbWUnOiBpLCAndmFsdWUnOiBleHRyYVZhcnNbaV19KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVNldHRpbmdzKG5vZGVPcHNPYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChDb250aXZHbG9iYWxzLk5PREVTX1NFVFRJTkdTX1NFVF9FTkRQT0lOVCwgbm9kZU9wc09iaiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlYWRlcnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUV4dHJhVmFycyhjdHJsKSB7XG4gICAgICAgICAgICAgICAgLy9BZGQgYW5zaWJsZSB2YXJpYWJsZXMgdG8gZXh0cmFfdmFyc1xuICAgICAgICAgICAgICAgIGN0cmwuYW5zaWJsZVZhcmlhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0cmwuZXh0cmFfdmFyc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vQWRkIGVudmlyb25tZW50IHZhcmlhYmxlcyB0byBleHRyYV92YXJzXG4gICAgICAgICAgICAgICAgdmFyIGVudlZhcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBjdHJsLmVudlZhcmlhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudlZhcnNbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY3RybC5leHRyYV92YXJzW25vZGVfY29uc3RhbnRzLkVOVl0gPSBlbnZWYXJzO1xuICAgICAgICAgICAgICAgIGN0cmwubm9kZU9wc09iai5leHRyYV92YXJzID0gSlNPTi5zdHJpbmdpZnkoY3RybC5leHRyYV92YXJzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2xlYW51cCBhbnNpYmxlIHZhcmlhYmxlcyBmb3IgbmV0d29yayBtb2RlIGFuZCBzY2hlZHVsZXIuIG5nLWlmIHJlbW92ZXMgaXQgZnJvbSB0aGUgdmlldyAoRE9NKSBidXQgbm90IGZyb21cbiAgICAgICAgICAgICAqIHRoZSBtb2RlbC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYW51cEV4dHJhVmFycyhjdHJsKSB7XG4gICAgICAgICAgICAgICAgLy9DbGVhbnVwIGZvciBuZXR3b3JrIG1vZGVcbiAgICAgICAgICAgICAgICBpZiAoY3RybC5leHRyYV92YXJzW25vZGVfY29uc3RhbnRzLkNPTlRJVl9ORVRfTU9ERV0gPT0gJ2FjaScpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5GV0RfTU9ERV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5BUElDX1VSTF07XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19VU0VSTkFNRV07XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19QQVNTV09SRF07XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjdHJsLmV4dHJhX3ZhcnNbbm9kZV9jb25zdGFudHMuQVBJQ19MRUFGX05PREVTXTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5BUElDX1BIWVNfRE9NQUlOXTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5BUElDX0VQR19CUklER0VfRE9NQUlOXTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5BUElDX0NPTlRSX1VOUkVTVFJJQ1RfTU9ERV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vQ2xlYW51cCBmb3Igc2NoZWR1bGVyXG4gICAgICAgICAgICAgICAgaWYgKGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5TQ0hFRF9QUk9WSURFUl0gPT0gJ25hdGl2ZS1zd2FybScpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGN0cmwuZXh0cmFfdmFyc1tub2RlX2NvbnN0YW50cy5VQ1BfQk9PVFNUUkFQX05PREVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldFNldHRpbmdzOiBnZXRTZXR0aW5ncyxcbiAgICAgICAgICAgIGNyZWF0ZUVudlZhcmlhYmxlczogY3JlYXRlRW52VmFyaWFibGVzLFxuICAgICAgICAgICAgY3JlYXRlQW5zaWJsZVZhcmlhYmxlczogY3JlYXRlQW5zaWJsZVZhcmlhYmxlcyxcbiAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzOiB1cGRhdGVTZXR0aW5ncyxcbiAgICAgICAgICAgIGNyZWF0ZUV4dHJhVmFyczogY3JlYXRlRXh0cmFWYXJzLFxuICAgICAgICAgICAgY2xlYW51cEV4dHJhVmFyczogY2xlYW51cEV4dHJhVmFyc1xuICAgICAgICB9XG4gICAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKFwiY29udGl2LmRpcmVjdGl2ZXNcIilcbiAgICAuZGlyZWN0aXZlKFwiY3R2QWNpdmFsaWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9kaXJlY3RpdmVzL25vZGVzL2FjaXZhbGlkLmh0bWwnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBmb3JtOiBcIj1cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKFwiY29udGl2LmRpcmVjdGl2ZXNcIilcbiAgICAuZGlyZWN0aXZlKFwiY3R2Q29udHJvbGludGVyZmFjZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2RpcmVjdGl2ZXMvbm9kZXMvY29udHJvbGludGVyZmFjZS5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgZXh0cmF2YXJzOiBcIj1cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKFwiY29udGl2LmRpcmVjdGl2ZXNcIilcbiAgICAuZGlyZWN0aXZlKFwiY3R2TmV0d29ya21vZGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9kaXJlY3RpdmVzL25vZGVzL25ldHdvcmttb2RlLmh0bWwnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBleHRyYXZhcnM6IFwiPVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoXCJjb250aXYuZGlyZWN0aXZlc1wiKVxuICAgIC5kaXJlY3RpdmUoXCJjdHZTY2hlZHVsZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9kaXJlY3RpdmVzL25vZGVzL3NjaGVkdWxlci5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgZXh0cmF2YXJzOiBcIj1cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
