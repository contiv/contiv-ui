<div class="ui basic segment" [ngClass]="{loading: servicelbInfoCtrl.showLoader}">
    <h4 class="ui header">Service Details</h4>
    <table class="ui very basic selectable table">
        <tbody>
        <tr>
            <td class="ctv-header three wide column">Name</td>
            <td>{{servicelbInfoCtrl.servicelb.serviceName}}</td>
        </tr>
        <tr>
            <td class="ctv-header three wide column">Network</td>
            <td>{{servicelbInfoCtrl.servicelb.networkName}}</td>
        </tr>
        <tr>
            <td class="ctv-header three wide column">IP address</td>
            <td>{{servicelbInfoCtrl.servicelb.ipAddress}}</td>
        </tr>
        </tbody>
    </table>
    <div [ngSwitch]="servicelbInfoCtrl.mode">
        <ctv-error *ngSwitchCase="'edit'" [hidden]="!servicelbInfoCtrl.showServerError"
                   header="Error saving service load balancer"
                   [error]="servicelbInfoCtrl.serverErrorMessage">
        </ctv-error>
        <ctv-error *ngSwitchCase="'details'" [hidden]="!servicelbInfoCtrl.showServerError"
                   header="Error deleting service load balancer"
                   [error]="servicelbInfoCtrl.serverErrorMessage">
        </ctv-error>
        <div *ngSwitchCase="'details'">
            <div class="ui section divider" style="margin-top: 40px"></div>
            <h4 class="ui header" style="margin-top: 40px">Label Selectors</h4>
            <table class="ui very basic selectable table">
                <tbody>
                    <tr *ngFor="let selector of servicelbInfoCtrl.servicelb.selectors">
                        <td class="ctv-header three wide column">{{selector.split('=')[0]}}</td>
                        <td>{{selector.split('=')[1]}}</td>
                    </tr>
                </tbody>
            </table>

            <div class="ui section divider" style="margin-top: 40px"></div>
            <h4 class="ui header" style="margin-top: 40px">Ports</h4>
            <table class="ui very basic unstackable table">
                <tbody>
                <tr>
                    <td class="ctv-header">Service port</td>
                    <td class="ctv-header">Provider port</td>
                    <td class="ctv-header">Protocol</td>
                </tr>
                <tr *ngFor="let port of servicelbInfoCtrl.servicelb.ports">
                    <td>{{port.split(':')[0]}}</td>
                    <td>{{port.split(':')[1]}}</td>
                    <td>{{port.split(':')[2]}}</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div *ngSwitchCase="'edit'">
            <div class="ui section divider" style="margin-top: 30px"></div>
            <div class="field">
                <ctv-collapsible title="Label Selectors">
                    <ctv-namevalue [items]="servicelbInfoCtrl.labelSelectors" (itemsChange)="servicelbInfoCtrl.labelSelectors=$event"></ctv-namevalue>
                </ctv-collapsible>
            </div>
            <div class="ui section divider"></div>
            <div class="field">
                <ctv-collapsible title="Ports">
                    <ctv-servicelbports [items]="servicelbInfoCtrl.servicelb.ports" (itemsChange)="servicelbInfoCtrl.servicelb.ports=$event"></ctv-servicelbports>
                </ctv-collapsible>
            </div>
        </div>
        <div class="ui grid" style="margin-top: 40px">
            <div class="right aligned sixteen wide column">
                <button *ngSwitchCase="'edit'" type="button" class="ui basic button"
                        (click)="servicelbInfoCtrl.cancelEditing()">Cancel
                </button>
                <button *ngSwitchCase="'edit'" type="button" class="ui blue button"
                        (click)="servicelbInfoCtrl.saveServicelb()">
                    Save
                </button>
            </div>
        </div>
    </div>
</div>