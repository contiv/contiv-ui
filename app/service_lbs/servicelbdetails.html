<div class="ui sixteen column grid">
    <div class="one wide column">
        <a ui-sref="contiv.menu.servicelbs.list()">
            <i class="large arrow left icon"></i>
        </a>
    </div>
    <div class="left floated ten wide column">
        <div class="content" style="font-size: 24px">Service Load Balancers (Details)</div>
    </div>
    <div ng-switch="servicelbDetailsCtrl.mode" class="right floated five wide column">
        <div id="delete-service-modal" class="ui small modal">
            <div class="header">Remove Service: {{servicelbDetailsCtrl.servicelb.serviceName}}</div>
            <div class="content">
                <p>Are you sure you want to remove this service?</p>
            </div>
            <div class="actions">
                <div class="ui negative button">No</div>
                <div class="ui positive button" ng-click="servicelbDetailsCtrl.deleteServicelb()">
                    Yes
                </div>
            </div>
        </div>
        <button ng-switch-when="edit" class="ui disabled button"
                ui-sref="contiv.menu.servicelbs.edit({key:servicelbDetailsCtrl.servicelb.key})">
            <i class="edit icon"></i>
            Edit
        </button>
        <button ng-switch-when="details" class="ui basic button"
                ui-sref="contiv.menu.servicelbs.edit({key:servicelbDetailsCtrl.servicelb.key})">
            <i class="edit icon"></i>
            Edit
        </button>
        <button class="ui basic button" onclick="$('#delete-service-modal').modal('show')">
            <i class="trash icon"></i>
            Remove
        </button>
    </div>
</div>

<div class="ui basic segment">
    <div class="ui active inverted dimmer" ng-show="servicelbDetailsCtrl.showLoader">
        <div class="ui loader"></div>
    </div>

    <h4 class="ui header">Service Details</h4>
    <table class="ui very basic selectable table">
        <tbody>
        <tr>
            <td class="ctv-header three wide column">Name</td>
            <td>{{servicelbDetailsCtrl.servicelb.serviceName}}</td>
        </tr>
        <tr>
            <td class="ctv-header three wide column">Network</td>
            <td>{{servicelbDetailsCtrl.servicelb.network}}</td>
        </tr>
        <tr>
            <td class="ctv-header three wide column">IP address</td>
            <td>{{servicelbDetailsCtrl.servicelb.ipAddress}}</td>
        </tr>
        </tbody>
    </table>
    <div ng-switch="servicelbDetailsCtrl.mode">

        <div ng-switch-when="details">
            <div class="ui section divider" style="margin-top: 40px"></div>
            <h4 class="ui header" style="margin-top: 40px">Label Selectors</h4>
            <table class="ui very basic selectable table">
                <tbody>
                <tr ng-repeat="selector in servicelbDetailsCtrl.servicelb.selectors">
                    <td class="ctv-header three wide column">{{selector.split('=')[0]}}</td>
                    <td>{{selector.split('=')[1]}}</td>
                </tr>
                </tbody>
            </table>

            <div class="ui section divider" style="margin-top: 40px"></div>
            <h4 class="ui header" style="margin-top: 40px">Ports</h4>
            <table class="ui very basic unstackable table">
                <tbody>
                <tr>
                    <td class="ctv-header">Service port</td>
                    <td class="ctv-header">Provider port</td>
                    <td class="ctv-header">Protocol</td>
                </tr>
                <tr ng-repeat="port in servicelbDetailsCtrl.servicelb.ports">
                    <td>{{port.split(':')[0]}}</td>
                    <td>{{port.split(':')[1]}}</td>
                    <td>{{port.split(':')[2]}}</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div ng-switch-when="edit">
            <div class="ui section divider" style="margin-top: 30px"></div>
            <div class="field">
                <div ng-click="servicelbDetailsCtrl.labelSelectorsVisible = !servicelbDetailsCtrl.labelSelectorsVisible">
                    <h4 class="ui header">
                        <i ng-if="servicelbDetailsCtrl.labelSelectorsVisible"
                           class="grey minus circle outline icon"></i>
                        <i ng-if="!servicelbDetailsCtrl.labelSelectorsVisible"
                           class="grey plus circle outline icon"></i>
                        Label Selectors
                    </h4>
                </div>
                <div ng-show="servicelbDetailsCtrl.labelSelectorsVisible">
                    <ctv-namevalue items="servicelbDetailsCtrl.labelSelectors"></ctv-namevalue>
                </div>
            </div>

            <div class="ui section divider"></div>
            <div class="field">
                <div ng-click="servicelbDetailsCtrl.portsVisible = !servicelbDetailsCtrl.portsVisible">
                    <h4 class="ui header">
                        <i ng-if="servicelbDetailsCtrl.portsVisible" class="grey minus circle outline icon"></i>
                        <i ng-if="!servicelbDetailsCtrl.portsVisible" class="grey plus circle outline icon"></i>
                        Ports
                    </h4>
                </div>
                <div ng-show="servicelbDetailsCtrl.portsVisible">
                    <ctv-servicelbports items="servicelbDetailsCtrl.servicelb.ports"></ctv-servicelbports>
                </div>
            </div>
        </div>
        <div style="margin-top: 40px">
            <button ng-switch-when="edit" type="button" class="ui basic button"
                    ng-click="servicelbDetailsCtrl.cancelEditing()">Cancel
            </button>
            <button ng-switch-when="edit" type="button" class="ui blue button"
                    ng-click="servicelbDetailsCtrl.saveServicelb()">
                Save
            </button>
            <ctv-error ng-switch-when="edit" ng-show="servicelbDetailsCtrl.showServerError"
                       header="Error saving service load balancer"
                       error="servicelbDetailsCtrl.serverErrorMessage">
            </ctv-error>
            <ctv-error ng-switch-when="details" ng-show="servicelbDetailsCtrl.showServerError"
                       header="Error deleting service load balancer"
                       error="servicelbDetailsCtrl.serverErrorMessage">
            </ctv-error>
        </div>
    </div>

</div>