<div [ngSwitch]="mode" class="field">
    <table *ngSwitchCase="'edit'" class="ui very basic collapsing unstackable table">
        <tbody>
        <tr>
            <td>
                <div class="ui left icon input">
                    <input name="applicationGroupSearchText"
                           type="text"
                           [(ngModel)]="applicationGroupSearchText"
                           placeholder="Filter by application group name"
                           size="30">
                    <i class="search icon"></i>
                </div>
            </td>
            <td>
                <select #selectApplicationGroupRef
                        name="selectApplicationGroups"
                        class="ui dropdown"
                        ngModel>
                    <option value="">-- Please select application group --</option>
                    <option *ngFor="let group of (applicationGroups | filter:applicationGroupSearchText)"
                            [value]="group.groupName">
                        {{group.groupName}}
                    </option>
                </select>
            </td>
            <td>
                <button type="button" class="ui icon button"
                        (click)="addApplicationGroup(selectApplicationGroupRef.value)">
                    <i class="blue add icon"></i>
                </button>
            </td>
        </tr>

        </tbody>
    </table>

    <ctv-table #tableRef
               [defaultSortColumn]="'groupName'"
               [items]="selectedApplicationGroups"
               (filtereditems)="filteredSelectedApplicationGroups=$event"
               [size]="5">
        <thead>
        <tr>
            <th>
                <ctv-th [sortfield]="'groupName'" (sortdata)="tableRef.applysort($event)"
                        [sortobject]="tableRef.sortObj"> Group name
                </ctv-th>
            </th>
            <th>
                <ctv-th [sortfield]="'policies'" (sortdata)="tableRef.applysort($event)"
                        [sortobject]="tableRef.sortObj"> Policies
                </ctv-th>
            </th>
            <th class="right floated three wide column">
                <ctv-search hidden (searchTextChange)="tableRef.showChunk(tableRef.table.pageNo,$event);"
                            [placeholder]="'Search application groups...'"></ctv-search>
            </th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let group of filteredSelectedApplicationGroups">
            <td class="three wide column">
                <a [routerLink]="['/m/applicationgroups/details', group.key]">{{group.groupName}}</a>
            </td>
            <td>{{group.policies.join(", ")}}</td>
            <td>
                <button *ngSwitchCase="'edit'"
                        type="button"
                        class="ui icon button"
                        (click)="removeApplicationGroup(group.groupName)">
                    <i class="trash icon"></i>
                </button>
            </td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <td colspan="5">
                <ctv-tpagination [chunks]="tableRef.pageChunks"
                                 (showPage)="tableRef.showChunk($event, tableRef.table.searchText)"
                                 (prevChunk)="tableRef.showPrevChunk()"
                                 (nextChunk)="tableRef.showNextChunk()">
                </ctv-tpagination>
            </td>
        </tr>
        </tfoot>
    </ctv-table>

</div>